{"version":3,"file":"bundle.9ac5931439a175fc6cda.js","mappings":"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","sources":["webpack://export-tests/./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js","webpack://export-tests/./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js","webpack://export-tests/./node_modules/style-loader/dist/runtime/styleTagTransform.js","webpack://export-tests/./node_modules/css-loader/dist/runtime/api.js","webpack://export-tests/./node_modules/@hpke/common/esm/src/errors.js","webpack://export-tests/./node_modules/@hpke/common/esm/_dnt.shims.js","webpack://export-tests/./node_modules/@hpke/common/esm/src/algorithm.js","webpack://export-tests/./node_modules/@hpke/common/esm/src/identifiers.js","webpack://export-tests/./node_modules/@hpke/common/esm/src/consts.js","webpack://export-tests/./node_modules/@hpke/common/esm/src/interfaces/kemInterface.js","webpack://export-tests/./node_modules/@hpke/common/esm/src/utils/misc.js","webpack://export-tests/./node_modules/@hpke/common/esm/src/kems/dhkem.js","webpack://export-tests/./node_modules/@hpke/common/esm/src/interfaces/dhkemPrimitives.js","webpack://export-tests/./node_modules/@hpke/common/esm/src/utils/bignum.js","webpack://export-tests/./node_modules/@hpke/common/esm/src/kems/dhkemPrimitives/ec.js","webpack://export-tests/./node_modules/@hpke/common/esm/src/kdfs/hkdf.js","webpack://export-tests/./node_modules/@hpke/common/esm/src/interfaces/aeadEncryptionContext.js","webpack://export-tests/./node_modules/@hpke/common/esm/src/curve/montgomery.js","webpack://export-tests/./node_modules/@hpke/core/esm/src/aeads/aesGcm.js","webpack://export-tests/./node_modules/@hpke/core/esm/src/aeads/exportOnly.js","webpack://export-tests/./node_modules/@hpke/core/esm/src/utils/emitNotSupported.js","webpack://export-tests/./node_modules/@hpke/core/esm/src/exporterContext.js","webpack://export-tests/./node_modules/@hpke/core/esm/src/encryptionContext.js","webpack://export-tests/./node_modules/@hpke/core/esm/src/recipientContext.js","webpack://export-tests/./node_modules/@hpke/core/esm/src/senderContext.js","webpack://export-tests/./node_modules/@hpke/core/esm/src/cipherSuiteNative.js","webpack://export-tests/./node_modules/@hpke/core/esm/src/kems/dhkemNative.js","webpack://export-tests/./node_modules/@hpke/core/esm/src/native.js","webpack://export-tests/./node_modules/@hpke/core/esm/src/kems/dhkemPrimitives/x25519.js","webpack://export-tests/./node_modules/@hpke/core/esm/src/kems/dhkemX25519.js","webpack://export-tests/./node_modules/@hpke/core/esm/src/kems/dhkemPrimitives/x448.js","webpack://export-tests/./node_modules/@hpke/core/esm/src/kems/dhkemX448.js","webpack://export-tests/./node_modules/css-loader/dist/runtime/sourceMaps.js","webpack://export-tests/./node_modules/style-loader/dist/runtime/insertStyleElement.js","webpack://export-tests/./node_modules/@noble/ed25519/index.js","webpack://export-tests/./node_modules/style-loader/dist/runtime/insertBySelector.js","webpack://export-tests/./node_modules/@noble/hashes/esm/utils.js","webpack://export-tests/./node_modules/@noble/hashes/esm/_md.js","webpack://export-tests/./node_modules/@noble/hashes/esm/_u64.js","webpack://export-tests/./node_modules/@noble/hashes/esm/sha2.js","webpack://export-tests/./node_modules/@noble/hashes/esm/sha512.js","webpack://export-tests/./node_modules/style-loader/dist/runtime/styleDomAPI.js"],"sourcesContent":["\"use strict\";\n\n/* istanbul ignore next  */\nfunction setAttributesWithoutAttributes(styleElement) {\n  var nonce = typeof __webpack_nonce__ !== \"undefined\" ? __webpack_nonce__ : null;\n  if (nonce) {\n    styleElement.setAttribute(\"nonce\", nonce);\n  }\n}\nmodule.exports = setAttributesWithoutAttributes;","\"use strict\";\n\nvar stylesInDOM = [];\nfunction getIndexByIdentifier(identifier) {\n  var result = -1;\n  for (var i = 0; i < stylesInDOM.length; i++) {\n    if (stylesInDOM[i].identifier === identifier) {\n      result = i;\n      break;\n    }\n  }\n  return result;\n}\nfunction modulesToDom(list, options) {\n  var idCountMap = {};\n  var identifiers = [];\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i];\n    var id = options.base ? item[0] + options.base : item[0];\n    var count = idCountMap[id] || 0;\n    var identifier = \"\".concat(id, \" \").concat(count);\n    idCountMap[id] = count + 1;\n    var indexByIdentifier = getIndexByIdentifier(identifier);\n    var obj = {\n      css: item[1],\n      media: item[2],\n      sourceMap: item[3],\n      supports: item[4],\n      layer: item[5]\n    };\n    if (indexByIdentifier !== -1) {\n      stylesInDOM[indexByIdentifier].references++;\n      stylesInDOM[indexByIdentifier].updater(obj);\n    } else {\n      var updater = addElementStyle(obj, options);\n      options.byIndex = i;\n      stylesInDOM.splice(i, 0, {\n        identifier: identifier,\n        updater: updater,\n        references: 1\n      });\n    }\n    identifiers.push(identifier);\n  }\n  return identifiers;\n}\nfunction addElementStyle(obj, options) {\n  var api = options.domAPI(options);\n  api.update(obj);\n  var updater = function updater(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap && newObj.supports === obj.supports && newObj.layer === obj.layer) {\n        return;\n      }\n      api.update(obj = newObj);\n    } else {\n      api.remove();\n    }\n  };\n  return updater;\n}\nmodule.exports = function (list, options) {\n  options = options || {};\n  list = list || [];\n  var lastIdentifiers = modulesToDom(list, options);\n  return function update(newList) {\n    newList = newList || [];\n    for (var i = 0; i < lastIdentifiers.length; i++) {\n      var identifier = lastIdentifiers[i];\n      var index = getIndexByIdentifier(identifier);\n      stylesInDOM[index].references--;\n    }\n    var newLastIdentifiers = modulesToDom(newList, options);\n    for (var _i = 0; _i < lastIdentifiers.length; _i++) {\n      var _identifier = lastIdentifiers[_i];\n      var _index = getIndexByIdentifier(_identifier);\n      if (stylesInDOM[_index].references === 0) {\n        stylesInDOM[_index].updater();\n        stylesInDOM.splice(_index, 1);\n      }\n    }\n    lastIdentifiers = newLastIdentifiers;\n  };\n};","\"use strict\";\n\n/* istanbul ignore next  */\nfunction styleTagTransform(css, styleElement) {\n  if (styleElement.styleSheet) {\n    styleElement.styleSheet.cssText = css;\n  } else {\n    while (styleElement.firstChild) {\n      styleElement.removeChild(styleElement.firstChild);\n    }\n    styleElement.appendChild(document.createTextNode(css));\n  }\n}\nmodule.exports = styleTagTransform;","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\nmodule.exports = function (cssWithMappingToString) {\n  var list = [];\n\n  // return the list of modules as css string\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = \"\";\n      var needLayer = typeof item[5] !== \"undefined\";\n      if (item[4]) {\n        content += \"@supports (\".concat(item[4], \") {\");\n      }\n      if (item[2]) {\n        content += \"@media \".concat(item[2], \" {\");\n      }\n      if (needLayer) {\n        content += \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\");\n      }\n      content += cssWithMappingToString(item);\n      if (needLayer) {\n        content += \"}\";\n      }\n      if (item[2]) {\n        content += \"}\";\n      }\n      if (item[4]) {\n        content += \"}\";\n      }\n      return content;\n    }).join(\"\");\n  };\n\n  // import a list of modules into the list\n  list.i = function i(modules, media, dedupe, supports, layer) {\n    if (typeof modules === \"string\") {\n      modules = [[null, modules, undefined]];\n    }\n    var alreadyImportedModules = {};\n    if (dedupe) {\n      for (var k = 0; k < this.length; k++) {\n        var id = this[k][0];\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n    for (var _k = 0; _k < modules.length; _k++) {\n      var item = [].concat(modules[_k]);\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        continue;\n      }\n      if (typeof layer !== \"undefined\") {\n        if (typeof item[5] === \"undefined\") {\n          item[5] = layer;\n        } else {\n          item[1] = \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\").concat(item[1], \"}\");\n          item[5] = layer;\n        }\n      }\n      if (media) {\n        if (!item[2]) {\n          item[2] = media;\n        } else {\n          item[1] = \"@media \".concat(item[2], \" {\").concat(item[1], \"}\");\n          item[2] = media;\n        }\n      }\n      if (supports) {\n        if (!item[4]) {\n          item[4] = \"\".concat(supports);\n        } else {\n          item[1] = \"@supports (\".concat(item[4], \") {\").concat(item[1], \"}\");\n          item[4] = supports;\n        }\n      }\n      list.push(item);\n    }\n  };\n  return list;\n};","/**\n * The base error class of hpke-js.\n * @group Errors\n */\nexport class HpkeError extends Error {\n    constructor(e) {\n        let message;\n        if (e instanceof Error) {\n            message = e.message;\n        }\n        else if (typeof e === \"string\") {\n            message = e;\n        }\n        else {\n            message = \"\";\n        }\n        super(message);\n        this.name = this.constructor.name;\n    }\n}\n/**\n * Invalid parameter.\n * @group Errors\n */\nexport class InvalidParamError extends HpkeError {\n}\n/**\n * KEM input or output validation failure.\n * @group Errors\n */\nexport class ValidationError extends HpkeError {\n}\n/**\n * Public or private key serialization failure.\n * @group Errors\n */\nexport class SerializeError extends HpkeError {\n}\n/**\n * Public or private key deserialization failure.\n * @group Errors\n */\nexport class DeserializeError extends HpkeError {\n}\n/**\n * encap() failure.\n * @group Errors\n */\nexport class EncapError extends HpkeError {\n}\n/**\n * decap() failure.\n * @group Errors\n */\nexport class DecapError extends HpkeError {\n}\n/**\n * Secret export failure.\n * @group Errors\n */\nexport class ExportError extends HpkeError {\n}\n/**\n * seal() failure.\n * @group Errors\n */\nexport class SealError extends HpkeError {\n}\n/**\n * open() failure.\n * @group Errors\n */\nexport class OpenError extends HpkeError {\n}\n/**\n * Sequence number overflow on the encryption context.\n * @group Errors\n */\nexport class MessageLimitReachedError extends HpkeError {\n}\n/**\n * Key pair derivation failure.\n * @group Errors\n */\nexport class DeriveKeyPairError extends HpkeError {\n}\n/**\n * Not supported failure.\n * @group Errors\n */\nexport class NotSupportedError extends HpkeError {\n}\n","const dntGlobals = {};\nexport const dntGlobalThis = createMergeProxy(globalThis, dntGlobals);\nfunction createMergeProxy(baseObj, extObj) {\n    return new Proxy(baseObj, {\n        get(_target, prop, _receiver) {\n            if (prop in extObj) {\n                return extObj[prop];\n            }\n            else {\n                return baseObj[prop];\n            }\n        },\n        set(_target, prop, value) {\n            if (prop in extObj) {\n                delete extObj[prop];\n            }\n            baseObj[prop] = value;\n            return true;\n        },\n        deleteProperty(_target, prop) {\n            let success = false;\n            if (prop in extObj) {\n                delete extObj[prop];\n                success = true;\n            }\n            if (prop in baseObj) {\n                delete baseObj[prop];\n                success = true;\n            }\n            return success;\n        },\n        ownKeys(_target) {\n            const baseKeys = Reflect.ownKeys(baseObj);\n            const extKeys = Reflect.ownKeys(extObj);\n            const extKeysSet = new Set(extKeys);\n            return [...baseKeys.filter((k) => !extKeysSet.has(k)), ...extKeys];\n        },\n        defineProperty(_target, prop, desc) {\n            if (prop in extObj) {\n                delete extObj[prop];\n            }\n            Reflect.defineProperty(baseObj, prop, desc);\n            return true;\n        },\n        getOwnPropertyDescriptor(_target, prop) {\n            if (prop in extObj) {\n                return Reflect.getOwnPropertyDescriptor(extObj, prop);\n            }\n            else {\n                return Reflect.getOwnPropertyDescriptor(baseObj, prop);\n            }\n        },\n        has(_target, prop) {\n            return prop in extObj || prop in baseObj;\n        },\n    });\n}\n","import * as dntShim from \"../_dnt.shims.js\";\nimport { NotSupportedError } from \"./errors.js\";\nasync function loadSubtleCrypto() {\n    if (dntShim.dntGlobalThis !== undefined && globalThis.crypto !== undefined) {\n        // Browsers, Node.js >= v19, Cloudflare Workers, Bun, etc.\n        return globalThis.crypto.subtle;\n    }\n    // Node.js <= v18\n    try {\n        // @ts-ignore: to ignore \"crypto\"\n        const { webcrypto } = await import(\"crypto\"); // node:crypto\n        return webcrypto.subtle;\n    }\n    catch (e) {\n        throw new NotSupportedError(e);\n    }\n}\nexport class NativeAlgorithm {\n    constructor() {\n        Object.defineProperty(this, \"_api\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: undefined\n        });\n    }\n    async _setup() {\n        if (this._api !== undefined) {\n            return;\n        }\n        this._api = await loadSubtleCrypto();\n    }\n}\n","/**\n * The supported HPKE modes.\n */\nexport const Mode = {\n    Base: 0x00,\n    Psk: 0x01,\n    Auth: 0x02,\n    AuthPsk: 0x03,\n};\n/**\n * The supported Key Encapsulation Mechanism (KEM) identifiers.\n */\nexport const KemId = {\n    NotAssigned: 0x0000,\n    DhkemP256HkdfSha256: 0x0010,\n    DhkemP384HkdfSha384: 0x0011,\n    DhkemP521HkdfSha512: 0x0012,\n    DhkemSecp256k1HkdfSha256: 0x0013,\n    DhkemX25519HkdfSha256: 0x0020,\n    DhkemX448HkdfSha512: 0x0021,\n    HybridkemX25519Kyber768: 0x0030,\n    MlKem512: 0x0040,\n    MlKem768: 0x0041,\n    MlKem1024: 0x0042,\n    XWing: 0x647a,\n};\n/**\n * The supported Key Derivation Function (KDF) identifiers.\n */\nexport const KdfId = {\n    HkdfSha256: 0x0001,\n    HkdfSha384: 0x0002,\n    HkdfSha512: 0x0003,\n};\n/**\n * The supported Authenticated Encryption with Associated Data (AEAD) identifiers.\n */\nexport const AeadId = {\n    Aes128Gcm: 0x0001,\n    Aes256Gcm: 0x0002,\n    Chacha20Poly1305: 0x0003,\n    ExportOnly: 0xFFFF,\n};\n","// The input length limit (psk, psk_id, info, exporter_context, ikm).\nexport const INPUT_LENGTH_LIMIT = 8192;\nexport const INFO_LENGTH_LIMIT = 65536;\n// The minimum length of a PSK.\nexport const MINIMUM_PSK_LENGTH = 32;\n// b\"\"\nexport const EMPTY = new Uint8Array(0);\n","// b\"KEM\"\nexport const SUITE_ID_HEADER_KEM = new Uint8Array([\n    75,\n    69,\n    77,\n    0,\n    0,\n]);\n","import * as dntShim from \"../../_dnt.shims.js\";\nimport { KemId } from \"../identifiers.js\";\nexport const isDenoV1 = () => \n// deno-lint-ignore no-explicit-any\ndntShim.dntGlobalThis.process === undefined;\n/**\n * Checks whether the runtime is Deno or not (Node.js).\n * @returns boolean - true if the runtime is Deno, false Node.js.\n */\nexport function isDeno() {\n    // deno-lint-ignore no-explicit-any\n    if (dntShim.dntGlobalThis.process === undefined) {\n        return true;\n    }\n    // deno-lint-ignore no-explicit-any\n    return dntShim.dntGlobalThis.process?.versions?.deno !== undefined;\n}\n/**\n * Checks whetehr the type of input is CryptoKeyPair or not.\n */\nexport const isCryptoKeyPair = (x) => typeof x === \"object\" &&\n    x !== null &&\n    typeof x.privateKey === \"object\" &&\n    typeof x.publicKey === \"object\";\n/**\n * Converts integer to octet string. I2OSP implementation.\n */\nexport function i2Osp(n, w) {\n    if (w <= 0) {\n        throw new Error(\"i2Osp: too small size\");\n    }\n    if (n >= 256 ** w) {\n        throw new Error(\"i2Osp: too large integer\");\n    }\n    const ret = new Uint8Array(w);\n    for (let i = 0; i < w && n; i++) {\n        ret[w - (i + 1)] = n % 256;\n        n = n >> 8;\n    }\n    return ret;\n}\n/**\n * Concatenates two Uint8Arrays.\n * @param a Uint8Array\n * @param b Uint8Array\n * @returns Concatenated Uint8Array\n */\nexport function concat(a, b) {\n    const ret = new Uint8Array(a.length + b.length);\n    ret.set(a, 0);\n    ret.set(b, a.length);\n    return ret;\n}\n/**\n * Decodes Base64Url-encoded data.\n * @param v Base64Url-encoded string\n * @returns Uint8Array\n */\nexport function base64UrlToBytes(v) {\n    const base64 = v.replace(/-/g, \"+\").replace(/_/g, \"/\");\n    const byteString = atob(base64);\n    const ret = new Uint8Array(byteString.length);\n    for (let i = 0; i < byteString.length; i++) {\n        ret[i] = byteString.charCodeAt(i);\n    }\n    return ret;\n}\n/**\n * Encodes Uint8Array to Base64Url.\n * @param v Uint8Array\n * @returns Base64Url-encoded string\n */\nexport function bytesToBase64Url(v) {\n    return btoa(String.fromCharCode(...v))\n        .replace(/\\+/g, \"-\")\n        .replace(/\\//g, \"_\")\n        .replace(/=*$/g, \"\");\n}\n/**\n * Decodes hex string to Uint8Array.\n * @param v Hex string\n * @returns Uint8Array\n * @throws Error if the input is not a hex string.\n */\nexport function hexToBytes(v) {\n    if (v.length === 0) {\n        return new Uint8Array([]);\n    }\n    const res = v.match(/[\\da-f]{2}/gi);\n    if (res == null) {\n        throw new Error(\"Not hex string.\");\n    }\n    return new Uint8Array(res.map(function (h) {\n        return parseInt(h, 16);\n    }));\n}\n/**\n * Encodes Uint8Array to hex string.\n * @param v Uint8Array\n * @returns Hex string\n */\nexport function bytesToHex(v) {\n    return [...v].map((x) => x.toString(16).padStart(2, \"0\")).join(\"\");\n}\n/**\n * Converts KemId to KeyAlgorithm.\n * @param kem KemId\n * @returns KeyAlgorithm\n */\nexport function kemToKeyGenAlgorithm(kem) {\n    switch (kem) {\n        case KemId.DhkemP256HkdfSha256:\n            return {\n                name: \"ECDH\",\n                namedCurve: \"P-256\",\n            };\n        case KemId.DhkemP384HkdfSha384:\n            return {\n                name: \"ECDH\",\n                namedCurve: \"P-384\",\n            };\n        case KemId.DhkemP521HkdfSha512:\n            return {\n                name: \"ECDH\",\n                namedCurve: \"P-521\",\n            };\n        default:\n            // case KemId.DhkemX25519HkdfSha256\n            return {\n                name: \"X25519\",\n            };\n    }\n}\nexport async function loadSubtleCrypto() {\n    if (dntShim.dntGlobalThis !== undefined && globalThis.crypto !== undefined) {\n        // Browsers, Node.js >= v19, Cloudflare Workers, Bun, etc.\n        return globalThis.crypto.subtle;\n    }\n    // Node.js <= v18\n    try {\n        // @ts-ignore: to ignore \"crypto\"\n        const { webcrypto } = await import(\"crypto\"); // node:crypto\n        return webcrypto.subtle;\n    }\n    catch (_e) {\n        throw new Error(\"Failed to load SubtleCrypto\");\n    }\n}\nexport async function loadCrypto() {\n    if (dntShim.dntGlobalThis !== undefined && globalThis.crypto !== undefined) {\n        // Browsers, Node.js >= v19, Cloudflare Workers, Bun, etc.\n        return globalThis.crypto;\n    }\n    // Node.js <= v18\n    try {\n        // @ts-ignore: to ignore \"crypto\"\n        const { webcrypto } = await import(\"crypto\"); // node:crypto\n        return webcrypto;\n    }\n    catch (_e) {\n        throw new Error(\"Web Cryptograph API not supported\");\n    }\n}\n/**\n * XOR for Uint8Array.\n */\nexport function xor(a, b) {\n    if (a.byteLength !== b.byteLength) {\n        throw new Error(\"xor: different length inputs\");\n    }\n    const buf = new Uint8Array(a.byteLength);\n    for (let i = 0; i < a.byteLength; i++) {\n        buf[i] = a[i] ^ b[i];\n    }\n    return buf;\n}\n","import { EMPTY, INPUT_LENGTH_LIMIT } from \"../consts.js\";\nimport { DecapError, EncapError, InvalidParamError } from \"../errors.js\";\nimport { SUITE_ID_HEADER_KEM } from \"../interfaces/kemInterface.js\";\nimport { concat, i2Osp, isCryptoKeyPair } from \"../utils/misc.js\";\n// b\"eae_prk\"\nconst LABEL_EAE_PRK = new Uint8Array([101, 97, 101, 95, 112, 114, 107]);\n// b\"shared_secret\"\n// deno-fmt-ignore\nconst LABEL_SHARED_SECRET = new Uint8Array([\n    115, 104, 97, 114, 101, 100, 95, 115, 101, 99,\n    114, 101, 116,\n]);\nfunction concat3(a, b, c) {\n    const ret = new Uint8Array(a.length + b.length + c.length);\n    ret.set(a, 0);\n    ret.set(b, a.length);\n    ret.set(c, a.length + b.length);\n    return ret;\n}\nexport class Dhkem {\n    constructor(id, prim, kdf) {\n        Object.defineProperty(this, \"id\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"secretSize\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 0\n        });\n        Object.defineProperty(this, \"encSize\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 0\n        });\n        Object.defineProperty(this, \"publicKeySize\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 0\n        });\n        Object.defineProperty(this, \"privateKeySize\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 0\n        });\n        Object.defineProperty(this, \"_prim\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"_kdf\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.id = id;\n        this._prim = prim;\n        this._kdf = kdf;\n        const suiteId = new Uint8Array(SUITE_ID_HEADER_KEM);\n        suiteId.set(i2Osp(this.id, 2), 3);\n        this._kdf.init(suiteId);\n    }\n    async serializePublicKey(key) {\n        return await this._prim.serializePublicKey(key);\n    }\n    async deserializePublicKey(key) {\n        return await this._prim.deserializePublicKey(key);\n    }\n    async serializePrivateKey(key) {\n        return await this._prim.serializePrivateKey(key);\n    }\n    async deserializePrivateKey(key) {\n        return await this._prim.deserializePrivateKey(key);\n    }\n    async importKey(format, key, isPublic = true) {\n        return await this._prim.importKey(format, key, isPublic);\n    }\n    async generateKeyPair() {\n        return await this._prim.generateKeyPair();\n    }\n    async deriveKeyPair(ikm) {\n        if (ikm.byteLength > INPUT_LENGTH_LIMIT) {\n            throw new InvalidParamError(\"Too long ikm\");\n        }\n        return await this._prim.deriveKeyPair(ikm);\n    }\n    async encap(params) {\n        let ke;\n        if (params.ekm === undefined) {\n            ke = await this.generateKeyPair();\n        }\n        else if (isCryptoKeyPair(params.ekm)) {\n            // params.ekm is only used for testing.\n            ke = params.ekm;\n        }\n        else {\n            // params.ekm is only used for testing.\n            ke = await this.deriveKeyPair(params.ekm);\n        }\n        const enc = await this._prim.serializePublicKey(ke.publicKey);\n        const pkrm = await this._prim.serializePublicKey(params.recipientPublicKey);\n        try {\n            let dh;\n            if (params.senderKey === undefined) {\n                dh = new Uint8Array(await this._prim.dh(ke.privateKey, params.recipientPublicKey));\n            }\n            else {\n                const sks = isCryptoKeyPair(params.senderKey)\n                    ? params.senderKey.privateKey\n                    : params.senderKey;\n                const dh1 = new Uint8Array(await this._prim.dh(ke.privateKey, params.recipientPublicKey));\n                const dh2 = new Uint8Array(await this._prim.dh(sks, params.recipientPublicKey));\n                dh = concat(dh1, dh2);\n            }\n            let kemContext;\n            if (params.senderKey === undefined) {\n                kemContext = concat(new Uint8Array(enc), new Uint8Array(pkrm));\n            }\n            else {\n                const pks = isCryptoKeyPair(params.senderKey)\n                    ? params.senderKey.publicKey\n                    : await this._prim.derivePublicKey(params.senderKey);\n                const pksm = await this._prim.serializePublicKey(pks);\n                kemContext = concat3(new Uint8Array(enc), new Uint8Array(pkrm), new Uint8Array(pksm));\n            }\n            const sharedSecret = await this._generateSharedSecret(dh, kemContext);\n            return {\n                enc: enc,\n                sharedSecret: sharedSecret,\n            };\n        }\n        catch (e) {\n            throw new EncapError(e);\n        }\n    }\n    async decap(params) {\n        const pke = await this._prim.deserializePublicKey(params.enc);\n        const skr = isCryptoKeyPair(params.recipientKey)\n            ? params.recipientKey.privateKey\n            : params.recipientKey;\n        const pkr = isCryptoKeyPair(params.recipientKey)\n            ? params.recipientKey.publicKey\n            : await this._prim.derivePublicKey(params.recipientKey);\n        const pkrm = await this._prim.serializePublicKey(pkr);\n        try {\n            let dh;\n            if (params.senderPublicKey === undefined) {\n                dh = new Uint8Array(await this._prim.dh(skr, pke));\n            }\n            else {\n                const dh1 = new Uint8Array(await this._prim.dh(skr, pke));\n                const dh2 = new Uint8Array(await this._prim.dh(skr, params.senderPublicKey));\n                dh = concat(dh1, dh2);\n            }\n            let kemContext;\n            if (params.senderPublicKey === undefined) {\n                kemContext = concat(new Uint8Array(params.enc), new Uint8Array(pkrm));\n            }\n            else {\n                const pksm = await this._prim.serializePublicKey(params.senderPublicKey);\n                kemContext = new Uint8Array(params.enc.byteLength + pkrm.byteLength + pksm.byteLength);\n                kemContext.set(new Uint8Array(params.enc), 0);\n                kemContext.set(new Uint8Array(pkrm), params.enc.byteLength);\n                kemContext.set(new Uint8Array(pksm), params.enc.byteLength + pkrm.byteLength);\n            }\n            return await this._generateSharedSecret(dh, kemContext);\n        }\n        catch (e) {\n            throw new DecapError(e);\n        }\n    }\n    async _generateSharedSecret(dh, kemContext) {\n        const labeledIkm = this._kdf.buildLabeledIkm(LABEL_EAE_PRK, dh);\n        const labeledInfo = this._kdf.buildLabeledInfo(LABEL_SHARED_SECRET, kemContext, this.secretSize);\n        return await this._kdf.extractAndExpand(EMPTY.buffer, labeledIkm.buffer, labeledInfo.buffer, this.secretSize);\n    }\n}\n","// The key usages for KEM.\nexport const KEM_USAGES = [\"deriveBits\"];\n// b\"dkp_prk\"\nexport const LABEL_DKP_PRK = new Uint8Array([\n    100,\n    107,\n    112,\n    95,\n    112,\n    114,\n    107,\n]);\n// b\"sk\"\nexport const LABEL_SK = new Uint8Array([115, 107]);\n","/**\n * The minimum inplementation of bignum to derive an EC key pair.\n */\nexport class Bignum {\n    constructor(size) {\n        Object.defineProperty(this, \"_num\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this._num = new Uint8Array(size);\n    }\n    val() {\n        return this._num;\n    }\n    reset() {\n        this._num.fill(0);\n    }\n    set(src) {\n        if (src.length !== this._num.length) {\n            throw new Error(\"Bignum.set: invalid argument\");\n        }\n        this._num.set(src);\n    }\n    isZero() {\n        for (let i = 0; i < this._num.length; i++) {\n            if (this._num[i] !== 0) {\n                return false;\n            }\n        }\n        return true;\n    }\n    lessThan(v) {\n        if (v.length !== this._num.length) {\n            throw new Error(\"Bignum.lessThan: invalid argument\");\n        }\n        for (let i = 0; i < this._num.length; i++) {\n            if (this._num[i] < v[i]) {\n                return true;\n            }\n            if (this._num[i] > v[i]) {\n                return false;\n            }\n        }\n        return false;\n    }\n}\n","import { NativeAlgorithm } from \"../../algorithm.js\";\nimport { EMPTY } from \"../../consts.js\";\nimport { DeriveKeyPairError, DeserializeError, NotSupportedError, SerializeError, } from \"../../errors.js\";\nimport { KemId } from \"../../identifiers.js\";\nimport { KEM_USAGES, LABEL_DKP_PRK } from \"../../interfaces/dhkemPrimitives.js\";\nimport { Bignum } from \"../../utils/bignum.js\";\nimport { base64UrlToBytes, i2Osp } from \"../../utils/misc.js\";\n// b\"candidate\"\n// deno-fmt-ignore\nconst LABEL_CANDIDATE = new Uint8Array([\n    99, 97, 110, 100, 105, 100, 97, 116, 101,\n]);\n// the order of the curve being used.\n// deno-fmt-ignore\nconst ORDER_P_256 = new Uint8Array([\n    0xff, 0xff, 0xff, 0xff, 0x00, 0x00, 0x00, 0x00,\n    0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,\n    0xbc, 0xe6, 0xfa, 0xad, 0xa7, 0x17, 0x9e, 0x84,\n    0xf3, 0xb9, 0xca, 0xc2, 0xfc, 0x63, 0x25, 0x51,\n]);\n// deno-fmt-ignore\nconst ORDER_P_384 = new Uint8Array([\n    0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,\n    0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,\n    0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,\n    0xc7, 0x63, 0x4d, 0x81, 0xf4, 0x37, 0x2d, 0xdf,\n    0x58, 0x1a, 0x0d, 0xb2, 0x48, 0xb0, 0xa7, 0x7a,\n    0xec, 0xec, 0x19, 0x6a, 0xcc, 0xc5, 0x29, 0x73,\n]);\n// deno-fmt-ignore\nconst ORDER_P_521 = new Uint8Array([\n    0x01, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,\n    0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,\n    0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,\n    0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,\n    0xff, 0xfa, 0x51, 0x86, 0x87, 0x83, 0xbf, 0x2f,\n    0x96, 0x6b, 0x7f, 0xcc, 0x01, 0x48, 0xf7, 0x09,\n    0xa5, 0xd0, 0x3b, 0xb5, 0xc9, 0xb8, 0x89, 0x9c,\n    0x47, 0xae, 0xbb, 0x6f, 0xb7, 0x1e, 0x91, 0x38,\n    0x64, 0x09,\n]);\n// deno-fmt-ignore\nconst PKCS8_ALG_ID_P_256 = new Uint8Array([\n    48, 65, 2, 1, 0, 48, 19, 6, 7, 42,\n    134, 72, 206, 61, 2, 1, 6, 8, 42, 134,\n    72, 206, 61, 3, 1, 7, 4, 39, 48, 37,\n    2, 1, 1, 4, 32,\n]);\n// deno-fmt-ignore\nconst PKCS8_ALG_ID_P_384 = new Uint8Array([\n    48, 78, 2, 1, 0, 48, 16, 6, 7, 42,\n    134, 72, 206, 61, 2, 1, 6, 5, 43, 129,\n    4, 0, 34, 4, 55, 48, 53, 2, 1, 1,\n    4, 48,\n]);\n// deno-fmt-ignore\nconst PKCS8_ALG_ID_P_521 = new Uint8Array([\n    48, 96, 2, 1, 0, 48, 16, 6, 7, 42,\n    134, 72, 206, 61, 2, 1, 6, 5, 43, 129,\n    4, 0, 35, 4, 73, 48, 71, 2, 1, 1,\n    4, 66,\n]);\nexport class Ec extends NativeAlgorithm {\n    constructor(kem, hkdf) {\n        super();\n        Object.defineProperty(this, \"_hkdf\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"_alg\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"_nPk\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"_nSk\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"_nDh\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        // EC specific arguments for deriving key pair.\n        Object.defineProperty(this, \"_order\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"_bitmask\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"_pkcs8AlgId\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this._hkdf = hkdf;\n        switch (kem) {\n            case KemId.DhkemP256HkdfSha256:\n                this._alg = { name: \"ECDH\", namedCurve: \"P-256\" };\n                this._nPk = 65;\n                this._nSk = 32;\n                this._nDh = 32;\n                this._order = ORDER_P_256;\n                this._bitmask = 0xFF;\n                this._pkcs8AlgId = PKCS8_ALG_ID_P_256;\n                break;\n            case KemId.DhkemP384HkdfSha384:\n                this._alg = { name: \"ECDH\", namedCurve: \"P-384\" };\n                this._nPk = 97;\n                this._nSk = 48;\n                this._nDh = 48;\n                this._order = ORDER_P_384;\n                this._bitmask = 0xFF;\n                this._pkcs8AlgId = PKCS8_ALG_ID_P_384;\n                break;\n            default:\n                // case KemId.DhkemP521HkdfSha512:\n                this._alg = { name: \"ECDH\", namedCurve: \"P-521\" };\n                this._nPk = 133;\n                this._nSk = 66;\n                this._nDh = 66;\n                this._order = ORDER_P_521;\n                this._bitmask = 0x01;\n                this._pkcs8AlgId = PKCS8_ALG_ID_P_521;\n                break;\n        }\n    }\n    async serializePublicKey(key) {\n        await this._setup();\n        try {\n            return await this._api.exportKey(\"raw\", key);\n        }\n        catch (e) {\n            throw new SerializeError(e);\n        }\n    }\n    async deserializePublicKey(key) {\n        await this._setup();\n        try {\n            return await this._importRawKey(key, true);\n        }\n        catch (e) {\n            throw new DeserializeError(e);\n        }\n    }\n    async serializePrivateKey(key) {\n        await this._setup();\n        try {\n            const jwk = await this._api.exportKey(\"jwk\", key);\n            if (!(\"d\" in jwk)) {\n                throw new Error(\"Not private key\");\n            }\n            return base64UrlToBytes(jwk[\"d\"]).buffer;\n        }\n        catch (e) {\n            throw new SerializeError(e);\n        }\n    }\n    async deserializePrivateKey(key) {\n        await this._setup();\n        try {\n            return await this._importRawKey(key, false);\n        }\n        catch (e) {\n            throw new DeserializeError(e);\n        }\n    }\n    async importKey(format, key, isPublic) {\n        await this._setup();\n        try {\n            if (format === \"raw\") {\n                return await this._importRawKey(key, isPublic);\n            }\n            // jwk\n            if (key instanceof ArrayBuffer) {\n                throw new Error(\"Invalid jwk key format\");\n            }\n            return await this._importJWK(key, isPublic);\n        }\n        catch (e) {\n            throw new DeserializeError(e);\n        }\n    }\n    async generateKeyPair() {\n        await this._setup();\n        try {\n            return await this._api.generateKey(this._alg, true, KEM_USAGES);\n        }\n        catch (e) {\n            throw new NotSupportedError(e);\n        }\n    }\n    async deriveKeyPair(ikm) {\n        await this._setup();\n        try {\n            const dkpPrk = await this._hkdf.labeledExtract(EMPTY.buffer, LABEL_DKP_PRK, new Uint8Array(ikm));\n            const bn = new Bignum(this._nSk);\n            for (let counter = 0; bn.isZero() || !bn.lessThan(this._order); counter++) {\n                if (counter > 255) {\n                    throw new Error(\"Faild to derive a key pair\");\n                }\n                const bytes = new Uint8Array(await this._hkdf.labeledExpand(dkpPrk, LABEL_CANDIDATE, i2Osp(counter, 1), this._nSk));\n                bytes[0] = bytes[0] & this._bitmask;\n                bn.set(bytes);\n            }\n            const sk = await this._deserializePkcs8Key(bn.val());\n            bn.reset();\n            return {\n                privateKey: sk,\n                publicKey: await this.derivePublicKey(sk),\n            };\n        }\n        catch (e) {\n            throw new DeriveKeyPairError(e);\n        }\n    }\n    async derivePublicKey(key) {\n        await this._setup();\n        try {\n            const jwk = await this._api.exportKey(\"jwk\", key);\n            delete jwk[\"d\"];\n            delete jwk[\"key_ops\"];\n            return await this._api.importKey(\"jwk\", jwk, this._alg, true, []);\n        }\n        catch (e) {\n            throw new DeserializeError(e);\n        }\n    }\n    async dh(sk, pk) {\n        try {\n            await this._setup();\n            const bits = await this._api.deriveBits({\n                name: \"ECDH\",\n                public: pk,\n            }, sk, this._nDh * 8);\n            return bits;\n        }\n        catch (e) {\n            throw new SerializeError(e);\n        }\n    }\n    async _importRawKey(key, isPublic) {\n        if (isPublic && key.byteLength !== this._nPk) {\n            throw new Error(\"Invalid public key for the ciphersuite\");\n        }\n        if (!isPublic && key.byteLength !== this._nSk) {\n            throw new Error(\"Invalid private key for the ciphersuite\");\n        }\n        if (isPublic) {\n            return await this._api.importKey(\"raw\", key, this._alg, true, []);\n        }\n        return await this._deserializePkcs8Key(new Uint8Array(key));\n    }\n    async _importJWK(key, isPublic) {\n        if (typeof key.crv === \"undefined\" || key.crv !== this._alg.namedCurve) {\n            throw new Error(`Invalid crv: ${key.crv}`);\n        }\n        if (isPublic) {\n            if (typeof key.d !== \"undefined\") {\n                throw new Error(\"Invalid key: `d` should not be set\");\n            }\n            return await this._api.importKey(\"jwk\", key, this._alg, true, []);\n        }\n        if (typeof key.d === \"undefined\") {\n            throw new Error(\"Invalid key: `d` not found\");\n        }\n        return await this._api.importKey(\"jwk\", key, this._alg, true, KEM_USAGES);\n    }\n    async _deserializePkcs8Key(k) {\n        const pkcs8Key = new Uint8Array(this._pkcs8AlgId.length + k.length);\n        pkcs8Key.set(this._pkcs8AlgId, 0);\n        pkcs8Key.set(k, this._pkcs8AlgId.length);\n        return await this._api.importKey(\"pkcs8\", pkcs8Key, this._alg, true, KEM_USAGES);\n    }\n}\n","import { EMPTY } from \"../consts.js\";\nimport { InvalidParamError } from \"../errors.js\";\nimport { KdfId } from \"../identifiers.js\";\nimport { NativeAlgorithm } from \"../algorithm.js\";\n// b\"HPKE-v1\"\nconst HPKE_VERSION = new Uint8Array([72, 80, 75, 69, 45, 118, 49]);\nexport class HkdfNative extends NativeAlgorithm {\n    constructor() {\n        super();\n        Object.defineProperty(this, \"id\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: KdfId.HkdfSha256\n        });\n        Object.defineProperty(this, \"hashSize\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 0\n        });\n        Object.defineProperty(this, \"_suiteId\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: EMPTY\n        });\n        Object.defineProperty(this, \"algHash\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: {\n                name: \"HMAC\",\n                hash: \"SHA-256\",\n                length: 256,\n            }\n        });\n    }\n    init(suiteId) {\n        this._suiteId = suiteId;\n    }\n    buildLabeledIkm(label, ikm) {\n        this._checkInit();\n        const ret = new Uint8Array(7 + this._suiteId.byteLength + label.byteLength + ikm.byteLength);\n        ret.set(HPKE_VERSION, 0);\n        ret.set(this._suiteId, 7);\n        ret.set(label, 7 + this._suiteId.byteLength);\n        ret.set(ikm, 7 + this._suiteId.byteLength + label.byteLength);\n        return ret;\n    }\n    buildLabeledInfo(label, info, len) {\n        this._checkInit();\n        const ret = new Uint8Array(9 + this._suiteId.byteLength + label.byteLength + info.byteLength);\n        ret.set(new Uint8Array([0, len]), 0);\n        ret.set(HPKE_VERSION, 2);\n        ret.set(this._suiteId, 9);\n        ret.set(label, 9 + this._suiteId.byteLength);\n        ret.set(info, 9 + this._suiteId.byteLength + label.byteLength);\n        return ret;\n    }\n    async extract(salt, ikm) {\n        await this._setup();\n        if (salt.byteLength === 0) {\n            salt = new ArrayBuffer(this.hashSize);\n        }\n        if (salt.byteLength !== this.hashSize) {\n            throw new InvalidParamError(\"The salt length must be the same as the hashSize\");\n        }\n        const key = await this._api.importKey(\"raw\", salt, this.algHash, false, [\n            \"sign\",\n        ]);\n        return await this._api.sign(\"HMAC\", key, ikm);\n    }\n    async expand(prk, info, len) {\n        await this._setup();\n        const key = await this._api.importKey(\"raw\", prk, this.algHash, false, [\n            \"sign\",\n        ]);\n        const okm = new ArrayBuffer(len);\n        const p = new Uint8Array(okm);\n        let prev = EMPTY;\n        const mid = new Uint8Array(info);\n        const tail = new Uint8Array(1);\n        if (len > 255 * this.hashSize) {\n            throw new Error(\"Entropy limit reached\");\n        }\n        const tmp = new Uint8Array(this.hashSize + mid.length + 1);\n        for (let i = 1, cur = 0; cur < p.length; i++) {\n            tail[0] = i;\n            tmp.set(prev, 0);\n            tmp.set(mid, prev.length);\n            tmp.set(tail, prev.length + mid.length);\n            prev = new Uint8Array(await this._api.sign(\"HMAC\", key, tmp.slice(0, prev.length + mid.length + 1)));\n            if (p.length - cur >= prev.length) {\n                p.set(prev, cur);\n                cur += prev.length;\n            }\n            else {\n                p.set(prev.slice(0, p.length - cur), cur);\n                cur += p.length - cur;\n            }\n        }\n        return okm;\n    }\n    async extractAndExpand(salt, ikm, info, len) {\n        await this._setup();\n        const baseKey = await this._api.importKey(\"raw\", ikm, \"HKDF\", false, [\"deriveBits\"]);\n        return await this._api.deriveBits({\n            name: \"HKDF\",\n            hash: this.algHash.hash,\n            salt: salt,\n            info: info,\n        }, baseKey, len * 8);\n    }\n    async labeledExtract(salt, label, ikm) {\n        return await this.extract(salt, this.buildLabeledIkm(label, ikm).buffer);\n    }\n    async labeledExpand(prk, label, info, len) {\n        return await this.expand(prk, this.buildLabeledInfo(label, info, len).buffer, len);\n    }\n    _checkInit() {\n        if (this._suiteId === EMPTY) {\n            throw new Error(\"Not initialized. Call init()\");\n        }\n    }\n}\nexport class HkdfSha256Native extends HkdfNative {\n    constructor() {\n        super(...arguments);\n        /** KdfId.HkdfSha256 (0x0001) */\n        Object.defineProperty(this, \"id\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: KdfId.HkdfSha256\n        });\n        /** 32 */\n        Object.defineProperty(this, \"hashSize\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 32\n        });\n        /** The parameters for Web Cryptography API */\n        Object.defineProperty(this, \"algHash\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: {\n                name: \"HMAC\",\n                hash: \"SHA-256\",\n                length: 256,\n            }\n        });\n    }\n}\nexport class HkdfSha384Native extends HkdfNative {\n    constructor() {\n        super(...arguments);\n        /** KdfId.HkdfSha384 (0x0002) */\n        Object.defineProperty(this, \"id\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: KdfId.HkdfSha384\n        });\n        /** 48 */\n        Object.defineProperty(this, \"hashSize\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 48\n        });\n        /** The parameters for Web Cryptography API */\n        Object.defineProperty(this, \"algHash\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: {\n                name: \"HMAC\",\n                hash: \"SHA-384\",\n                length: 384,\n            }\n        });\n    }\n}\nexport class HkdfSha512Native extends HkdfNative {\n    constructor() {\n        super(...arguments);\n        /** KdfId.HkdfSha512 (0x0003) */\n        Object.defineProperty(this, \"id\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: KdfId.HkdfSha512\n        });\n        /** 64 */\n        Object.defineProperty(this, \"hashSize\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 64\n        });\n        /** The parameters for Web Cryptography API */\n        Object.defineProperty(this, \"algHash\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: {\n                name: \"HMAC\",\n                hash: \"SHA-512\",\n                length: 512,\n            }\n        });\n    }\n}\n","// The key usages for AEAD.\nexport const AEAD_USAGES = [\"encrypt\", \"decrypt\"];\n","/**\n * This file is based on noble-curves (https://github.com/paulmillr/noble-curves).\n *\n * noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com)\n *\n * The original file is located at:\n * https://github.com/paulmillr/noble-curves/blob/b9d49d2b41d550571a0c5be443ecb62109fa3373/src/abstract/montgomery.ts\n */\n/**\n * Montgomery curve methods. It's not really whole montgomery curve,\n * just bunch of very specific methods for X25519 / X448 from\n * [RFC 7748](https://www.rfc-editor.org/rfc/rfc7748)\n * @module\n */\n/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */\nimport { abytes, aInRange, bytesToNumberLE, copyBytes, numberToBytesLE, randomBytesAsync, validateObject, } from \"../utils/noble.js\";\nimport { createKeygen } from \"./curve.js\";\nimport { mod } from \"./modular.js\";\nconst _0n = BigInt(0);\nconst _1n = BigInt(1);\nconst _2n = BigInt(2);\nfunction validateOpts(curve) {\n    validateObject(curve, {\n        adjustScalarBytes: \"function\",\n        powPminus2: \"function\",\n    });\n    return Object.freeze({ ...curve });\n}\nexport function montgomery(curveDef) {\n    const CURVE = validateOpts(curveDef);\n    const { P, type, adjustScalarBytes, powPminus2, randomBytes: rand } = CURVE;\n    const is25519 = type === \"x25519\";\n    if (!is25519 && type !== \"x448\")\n        throw new Error(\"invalid type\");\n    const randomBytes_ = rand || randomBytesAsync;\n    const montgomeryBits = is25519 ? 255 : 448;\n    const fieldLen = is25519 ? 32 : 56;\n    const Gu = is25519 ? BigInt(9) : BigInt(5);\n    // RFC 7748 #5:\n    // The constant a24 is (486662 - 2) / 4 = 121665 for curve25519/X25519 and\n    // (156326 - 2) / 4 = 39081 for curve448/X448\n    // const a = is25519 ? 156326n : 486662n;\n    const a24 = is25519 ? BigInt(121665) : BigInt(39081);\n    // RFC: x25519 \"the resulting integer is of the form 2^254 plus\n    // eight times a value between 0 and 2^251 - 1 (inclusive)\"\n    // x448: \"2^447 plus four times a value between 0 and 2^445 - 1 (inclusive)\"\n    const minScalar = is25519 ? _2n ** BigInt(254) : _2n ** BigInt(447);\n    const maxAdded = is25519\n        ? BigInt(8) * _2n ** BigInt(251) - _1n\n        : BigInt(4) * _2n ** BigInt(445) - _1n;\n    const maxScalar = minScalar + maxAdded + _1n; // (inclusive)\n    const modP = (n) => mod(n, P);\n    const GuBytes = encodeU(Gu);\n    function encodeU(u) {\n        return numberToBytesLE(modP(u), fieldLen);\n    }\n    function decodeU(u) {\n        const _u = copyBytes(abytes(u, fieldLen, \"uCoordinate\"));\n        // RFC: When receiving such an array, implementations of X25519\n        // (but not X448) MUST mask the most significant bit in the final byte.\n        if (is25519)\n            _u[31] &= 127; // 0b0111_1111\n        // RFC: Implementations MUST accept non-canonical values and process them as\n        // if they had been reduced modulo the field prime.  The non-canonical\n        // values are 2^255 - 19 through 2^255 - 1 for X25519 and 2^448 - 2^224\n        // - 1 through 2^448 - 1 for X448.\n        return modP(bytesToNumberLE(_u));\n    }\n    function decodeScalar(scalar) {\n        return bytesToNumberLE(adjustScalarBytes(copyBytes(abytes(scalar, fieldLen, \"scalar\"))));\n    }\n    function scalarMult(scalar, u) {\n        const pu = montgomeryLadder(decodeU(u), decodeScalar(scalar));\n        // Some public keys are useless, of low-order. Curve author doesn't think\n        // it needs to be validated, but we do it nonetheless.\n        // https://cr.yp.to/ecdh.html#validate\n        if (pu === _0n)\n            throw new Error(\"invalid private or public key received\");\n        return encodeU(pu);\n    }\n    // Computes public key from private. By doing scalar multiplication of base point.\n    function scalarMultBase(scalar) {\n        return scalarMult(scalar, GuBytes);\n    }\n    const getPublicKey = scalarMultBase;\n    const getSharedSecret = scalarMult;\n    // cswap from RFC7748 \"example code\"\n    function cswap(swap, x_2, x_3) {\n        // dummy = mask(swap) AND (x_2 XOR x_3)\n        // Where mask(swap) is the all-1 or all-0 word of the same length as x_2\n        // and x_3, computed, e.g., as mask(swap) = 0 - swap.\n        const dummy = modP(swap * (x_2 - x_3));\n        x_2 = modP(x_2 - dummy); // x_2 = x_2 XOR dummy\n        x_3 = modP(x_3 + dummy); // x_3 = x_3 XOR dummy\n        return { x_2, x_3 };\n    }\n    /**\n     * Montgomery x-only multiplication ladder.\n     * @param pointU u coordinate (x) on Montgomery Curve 25519\n     * @param scalar by which the point would be multiplied\n     * @returns new Point on Montgomery curve\n     */\n    function montgomeryLadder(u, scalar) {\n        aInRange(\"u\", u, _0n, P);\n        aInRange(\"scalar\", scalar, minScalar, maxScalar);\n        const k = scalar;\n        const x_1 = u;\n        let x_2 = _1n;\n        let z_2 = _0n;\n        let x_3 = u;\n        let z_3 = _1n;\n        let swap = _0n;\n        for (let t = BigInt(montgomeryBits - 1); t >= _0n; t--) {\n            const k_t = (k >> t) & _1n;\n            swap ^= k_t;\n            ({ x_2, x_3 } = cswap(swap, x_2, x_3));\n            ({ x_2: z_2, x_3: z_3 } = cswap(swap, z_2, z_3));\n            swap = k_t;\n            const A = x_2 + z_2;\n            const AA = modP(A * A);\n            const B = x_2 - z_2;\n            const BB = modP(B * B);\n            const E = AA - BB;\n            const C = x_3 + z_3;\n            const D = x_3 - z_3;\n            const DA = modP(D * A);\n            const CB = modP(C * B);\n            const dacb = DA + CB;\n            const da_cb = DA - CB;\n            x_3 = modP(dacb * dacb);\n            z_3 = modP(x_1 * modP(da_cb * da_cb));\n            x_2 = modP(AA * BB);\n            z_2 = modP(E * (AA + modP(a24 * E)));\n        }\n        ({ x_2, x_3 } = cswap(swap, x_2, x_3));\n        ({ x_2: z_2, x_3: z_3 } = cswap(swap, z_2, z_3));\n        const z2 = powPminus2(z_2); // `Fp.pow(x, P - _2n)` is much slower equivalent\n        return modP(x_2 * z2); // Return x_2 * (z_2^(p - 2))\n    }\n    const lengths = {\n        secretKey: fieldLen,\n        publicKey: fieldLen,\n        seed: fieldLen,\n    };\n    const randomSecretKey = async (seed) => {\n        if (seed === undefined) {\n            seed = await randomBytes_(fieldLen);\n        }\n        abytes(seed, lengths.seed, \"seed\");\n        return seed;\n    };\n    const utils = { randomSecretKey };\n    return Object.freeze({\n        keygen: createKeygen(randomSecretKey, getPublicKey),\n        getSharedSecret,\n        getPublicKey,\n        scalarMult,\n        scalarMultBase,\n        utils,\n        GuBytes: GuBytes.slice(),\n        lengths,\n    });\n}\n","import { AEAD_USAGES, AeadId, NativeAlgorithm } from \"@hpke/common\";\nexport class AesGcmContext extends NativeAlgorithm {\n    constructor(key) {\n        super();\n        Object.defineProperty(this, \"_rawKey\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"_key\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: undefined\n        });\n        this._rawKey = key;\n    }\n    async seal(iv, data, aad) {\n        await this._setupKey();\n        const alg = {\n            name: \"AES-GCM\",\n            iv: iv,\n            additionalData: aad,\n        };\n        const ct = await this._api.encrypt(alg, this._key, data);\n        return ct;\n    }\n    async open(iv, data, aad) {\n        await this._setupKey();\n        const alg = {\n            name: \"AES-GCM\",\n            iv: iv,\n            additionalData: aad,\n        };\n        const pt = await this._api.decrypt(alg, this._key, data);\n        return pt;\n    }\n    async _setupKey() {\n        if (this._key !== undefined) {\n            return;\n        }\n        await this._setup();\n        const key = await this._importKey(this._rawKey);\n        (new Uint8Array(this._rawKey)).fill(0);\n        this._key = key;\n        return;\n    }\n    async _importKey(key) {\n        return await this._api.importKey(\"raw\", key, { name: \"AES-GCM\" }, true, AEAD_USAGES);\n    }\n}\n/**\n * The AES-128-GCM for HPKE AEAD implementing {@link AeadInterface}.\n *\n * When using `@hpke/core`, the instance of this class must be specified\n * to the `aead` parameter of {@link CipherSuiteParams} instead of `AeadId.Aes128Gcm`.\n *\n * @example\n *\n * ```ts\n * import {\n *   Aes128Gcm,\n *   CipherSuite,\n *   DhkemP256HkdfSha256,\n *   HkdfSha256,\n * } from \"@hpke/core\";\n *\n * const suite = new CipherSuite({\n *   kem: new DhkemP256HkdfSha256(),\n *   kdf: new HkdfSha256(),\n *   aead: new Aes128Gcm(),\n * });\n * ```\n */\nexport class Aes128Gcm {\n    constructor() {\n        /** AeadId.Aes128Gcm (0x0001) */\n        Object.defineProperty(this, \"id\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: AeadId.Aes128Gcm\n        });\n        /** 16 */\n        Object.defineProperty(this, \"keySize\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 16\n        });\n        /** 12 */\n        Object.defineProperty(this, \"nonceSize\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 12\n        });\n        /** 16 */\n        Object.defineProperty(this, \"tagSize\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 16\n        });\n    }\n    createEncryptionContext(key) {\n        return new AesGcmContext(key);\n    }\n}\n/**\n * The AES-256-GCM for HPKE AEAD implementing {@link AeadInterface}.\n *\n * When using `@hpke/core`, the instance of this class must be specified\n * to the `aead` parameter of {@link CipherSuiteParams} instead of `AeadId.Aes256Gcm`\n * as follows:\n *\n * @example\n *\n * ```ts\n * import {\n *   Aes256Gcm,\n *   CipherSuite,\n *   DhkemP256HkdfSha256,\n *   HkdfSha256,\n * } from \"@hpke/core\";\n *\n * const suite = new CipherSuite({\n *   kem: new DhkemP256HkdfSha256(),\n *   kdf: new HkdfSha256(),\n *   aead: new Aes256Gcm(),\n * });\n * ```\n */\nexport class Aes256Gcm extends Aes128Gcm {\n    constructor() {\n        super(...arguments);\n        /** AeadId.Aes256Gcm (0x0002) */\n        Object.defineProperty(this, \"id\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: AeadId.Aes256Gcm\n        });\n        /** 32 */\n        Object.defineProperty(this, \"keySize\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 32\n        });\n        /** 12 */\n        Object.defineProperty(this, \"nonceSize\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 12\n        });\n        /** 16 */\n        Object.defineProperty(this, \"tagSize\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 16\n        });\n    }\n}\n","import { AeadId, NotSupportedError } from \"@hpke/common\";\n/**\n * The ExportOnly mode for HPKE AEAD implementing {@link AeadInterface}.\n *\n * When using `@hpke/core`, the instance of this class must be specified\n * to the `aead` parameter of {@link CipherSuiteParams} instead of `AeadId.ExportOnly`\n * as follows:\n *\n * @example\n *\n * ```ts\n * import {\n *   CipherSuite,\n *   DhkemP256HkdfSha256,\n *   ExportOnly,\n *   HkdfSha256,\n * } from \"@hpke/core\";\n *\n * const suite = new CipherSuite({\n *   kem: new DhkemP256HkdfSha256(),\n *   kdf: new HkdfSha256(),\n *   aead: new ExportOnly(),\n * });\n * ```\n */\nexport class ExportOnly {\n    constructor() {\n        Object.defineProperty(this, \"id\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: AeadId.ExportOnly\n        });\n        Object.defineProperty(this, \"keySize\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 0\n        });\n        Object.defineProperty(this, \"nonceSize\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 0\n        });\n        Object.defineProperty(this, \"tagSize\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 0\n        });\n    }\n    createEncryptionContext(_key) {\n        throw new NotSupportedError(\"Export only\");\n    }\n}\n","import { NotSupportedError } from \"@hpke/common\";\nexport function emitNotSupported() {\n    return new Promise((_resolve, reject) => {\n        reject(new NotSupportedError(\"Not supported\"));\n    });\n}\n","import { ExportError, INPUT_LENGTH_LIMIT, InvalidParamError, } from \"@hpke/common\";\nimport { emitNotSupported } from \"./utils/emitNotSupported.js\";\n// b\"sec\"\nconst LABEL_SEC = new Uint8Array([115, 101, 99]);\nexport class ExporterContextImpl {\n    constructor(api, kdf, exporterSecret) {\n        Object.defineProperty(this, \"_api\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"exporterSecret\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"_kdf\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this._api = api;\n        this._kdf = kdf;\n        this.exporterSecret = exporterSecret;\n    }\n    async seal(_data, _aad) {\n        return await emitNotSupported();\n    }\n    async open(_data, _aad) {\n        return await emitNotSupported();\n    }\n    async export(exporterContext, len) {\n        if (exporterContext.byteLength > INPUT_LENGTH_LIMIT) {\n            throw new InvalidParamError(\"Too long exporter context\");\n        }\n        try {\n            return await this._kdf.labeledExpand(this.exporterSecret, LABEL_SEC, new Uint8Array(exporterContext), len);\n        }\n        catch (e) {\n            throw new ExportError(e);\n        }\n    }\n}\nexport class RecipientExporterContextImpl extends ExporterContextImpl {\n}\nexport class SenderExporterContextImpl extends ExporterContextImpl {\n    constructor(api, kdf, exporterSecret, enc) {\n        super(api, kdf, exporterSecret);\n        Object.defineProperty(this, \"enc\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.enc = enc;\n        return;\n    }\n}\n","import { i2Osp, MessageLimitReachedError, xor } from \"@hpke/common\";\nimport { ExporterContextImpl } from \"./exporterContext.js\";\nexport class EncryptionContextImpl extends ExporterContextImpl {\n    constructor(api, kdf, params) {\n        super(api, kdf, params.exporterSecret);\n        // AEAD id.\n        Object.defineProperty(this, \"_aead\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        // The length in bytes of a key for the algorithm.\n        Object.defineProperty(this, \"_nK\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        // The length in bytes of a nonce for the algorithm.\n        Object.defineProperty(this, \"_nN\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        // The length in bytes of an authentication tag for the algorithm.\n        Object.defineProperty(this, \"_nT\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        // The end-to-end encryption key information.\n        Object.defineProperty(this, \"_ctx\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        if (params.key === undefined || params.baseNonce === undefined ||\n            params.seq === undefined) {\n            throw new Error(\"Required parameters are missing\");\n        }\n        this._aead = params.aead;\n        this._nK = this._aead.keySize;\n        this._nN = this._aead.nonceSize;\n        this._nT = this._aead.tagSize;\n        const key = this._aead.createEncryptionContext(params.key);\n        this._ctx = {\n            key: key,\n            baseNonce: params.baseNonce,\n            seq: params.seq,\n        };\n    }\n    computeNonce(k) {\n        const seqBytes = i2Osp(k.seq, k.baseNonce.byteLength);\n        return xor(k.baseNonce, seqBytes).buffer;\n    }\n    incrementSeq(k) {\n        // if (this.seq >= (1 << (8 * this.baseNonce.byteLength)) - 1) {\n        if (k.seq > Number.MAX_SAFE_INTEGER) {\n            throw new MessageLimitReachedError(\"Message limit reached\");\n        }\n        k.seq += 1;\n        return;\n    }\n}\n","import { EMPTY, OpenError } from \"@hpke/common\";\nimport { EncryptionContextImpl } from \"./encryptionContext.js\";\nexport class RecipientContextImpl extends EncryptionContextImpl {\n    async open(data, aad = EMPTY.buffer) {\n        let pt;\n        try {\n            pt = await this._ctx.key.open(this.computeNonce(this._ctx), data, aad);\n        }\n        catch (e) {\n            throw new OpenError(e);\n        }\n        this.incrementSeq(this._ctx);\n        return pt;\n    }\n}\n","import { EMPTY, SealError } from \"@hpke/common\";\nimport { EncryptionContextImpl } from \"./encryptionContext.js\";\nexport class SenderContextImpl extends EncryptionContextImpl {\n    constructor(api, kdf, params, enc) {\n        super(api, kdf, params);\n        Object.defineProperty(this, \"enc\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.enc = enc;\n    }\n    async seal(data, aad = EMPTY.buffer) {\n        let ct;\n        try {\n            ct = await this._ctx.key.seal(this.computeNonce(this._ctx), data, aad);\n        }\n        catch (e) {\n            throw new SealError(e);\n        }\n        this.incrementSeq(this._ctx);\n        return ct;\n    }\n}\n","import { AeadId, EMPTY, i2Osp, INFO_LENGTH_LIMIT, INPUT_LENGTH_LIMIT, InvalidParamError, MINIMUM_PSK_LENGTH, Mode, NativeAlgorithm, } from \"@hpke/common\";\nimport { RecipientExporterContextImpl, SenderExporterContextImpl, } from \"./exporterContext.js\";\nimport { RecipientContextImpl } from \"./recipientContext.js\";\nimport { SenderContextImpl } from \"./senderContext.js\";\n// b\"base_nonce\"\n// deno-fmt-ignore\nconst LABEL_BASE_NONCE = new Uint8Array([\n    98, 97, 115, 101, 95, 110, 111, 110, 99, 101,\n]);\n// b\"exp\"\nconst LABEL_EXP = new Uint8Array([101, 120, 112]);\n// b\"info_hash\"\n// deno-fmt-ignore\nconst LABEL_INFO_HASH = new Uint8Array([\n    105, 110, 102, 111, 95, 104, 97, 115, 104,\n]);\n// b\"key\"\nconst LABEL_KEY = new Uint8Array([107, 101, 121]);\n// b\"psk_id_hash\"\n// deno-fmt-ignore\nconst LABEL_PSK_ID_HASH = new Uint8Array([\n    112, 115, 107, 95, 105, 100, 95, 104, 97, 115, 104,\n]);\n// b\"secret\"\nconst LABEL_SECRET = new Uint8Array([115, 101, 99, 114, 101, 116]);\n// b\"HPKE\"\n// deno-fmt-ignore\nconst SUITE_ID_HEADER_HPKE = new Uint8Array([\n    72, 80, 75, 69, 0, 0, 0, 0, 0, 0,\n]);\n/**\n * The Hybrid Public Key Encryption (HPKE) ciphersuite,\n * which is implemented using only\n * {@link https://www.w3.org/TR/WebCryptoAPI/ | Web Cryptography API}.\n *\n * This is the super class of {@link CipherSuite} and the same as\n * {@link https://jsr.io/@hpke/core/doc/~/CipherSuite | @hpke/core#CipherSuite} as follows:\n * which supports only the ciphersuites that can be implemented on the native\n * {@link https://www.w3.org/TR/WebCryptoAPI/ | Web Cryptography API}.\n * Therefore, the following cryptographic algorithms are not supported for now:\n *   - DHKEM(X25519, HKDF-SHA256)\n *   - DHKEM(X448, HKDF-SHA512)\n *   - ChaCha20Poly1305\n *\n * In addtion, the HKDF functions contained in this class can only derive\n * keys of the same length as the `hashSize`.\n *\n * If you want to use the unsupported cryptographic algorithms\n * above or derive keys longer than the `hashSize`,\n * please use {@link CipherSuite}.\n *\n * This class provides following functions:\n *\n * - Creates encryption contexts both for senders and recipients.\n *   - {@link createSenderContext}\n *   - {@link createRecipientContext}\n * - Provides single-shot encryption API.\n *   - {@link seal}\n *   - {@link open}\n *\n * The calling of the constructor of this class is the starting\n * point for HPKE operations for both senders and recipients.\n *\n * @example Use only ciphersuites supported by Web Cryptography API.\n *\n * ```ts\n * import {\n *   Aes128Gcm,\n *   DhkemP256HkdfSha256,\n *   HkdfSha256,\n *   CipherSuite,\n * } from \"@hpke/core\";\n *\n * const suite = new CipherSuite({\n *   kem: new DhkemP256HkdfSha256(),\n *   kdf: new HkdfSha256(),\n *   aead: new Aes128Gcm(),\n * });\n * ```\n *\n * @example Use a ciphersuite which is currently not supported by Web Cryptography API.\n *\n * ```ts\n * import { Aes128Gcm, HkdfSha256, CipherSuite } from \"@hpke/core\";\n * // Use an extension module.\n * import { DhkemX25519HkdfSha256 } from \"@hpke/dhkem-x25519\";\n *\n * const suite = new CipherSuite({\n *   kem: new DhkemX25519HkdfSha256(),\n *   kdf: new HkdfSha256(),\n *   aead: new Aes128Gcm(),\n * });\n * ```\n */\nexport class CipherSuiteNative extends NativeAlgorithm {\n    /**\n     * @param params A set of parameters for building a cipher suite.\n     *\n     * If the error occurred, throws {@link InvalidParamError}.\n     *\n     * @throws {@link InvalidParamError}\n     */\n    constructor(params) {\n        super();\n        Object.defineProperty(this, \"_kem\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"_kdf\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"_aead\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"_suiteId\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        // KEM\n        if (typeof params.kem === \"number\") {\n            throw new InvalidParamError(\"KemId cannot be used\");\n        }\n        this._kem = params.kem;\n        // KDF\n        if (typeof params.kdf === \"number\") {\n            throw new InvalidParamError(\"KdfId cannot be used\");\n        }\n        this._kdf = params.kdf;\n        // AEAD\n        if (typeof params.aead === \"number\") {\n            throw new InvalidParamError(\"AeadId cannot be used\");\n        }\n        this._aead = params.aead;\n        this._suiteId = new Uint8Array(SUITE_ID_HEADER_HPKE);\n        this._suiteId.set(i2Osp(this._kem.id, 2), 4);\n        this._suiteId.set(i2Osp(this._kdf.id, 2), 6);\n        this._suiteId.set(i2Osp(this._aead.id, 2), 8);\n        this._kdf.init(this._suiteId);\n    }\n    /**\n     * Gets the KEM context of the ciphersuite.\n     */\n    get kem() {\n        return this._kem;\n    }\n    /**\n     * Gets the KDF context of the ciphersuite.\n     */\n    get kdf() {\n        return this._kdf;\n    }\n    /**\n     * Gets the AEAD context of the ciphersuite.\n     */\n    get aead() {\n        return this._aead;\n    }\n    /**\n     * Creates an encryption context for a sender.\n     *\n     * If the error occurred, throws {@link DecapError} | {@link ValidationError}.\n     *\n     * @param params A set of parameters for the sender encryption context.\n     * @returns A sender encryption context.\n     * @throws {@link EncapError}, {@link ValidationError}\n     */\n    async createSenderContext(params) {\n        this._validateInputLength(params);\n        await this._setup();\n        const dh = await this._kem.encap(params);\n        let mode;\n        if (params.psk !== undefined) {\n            mode = params.senderKey !== undefined ? Mode.AuthPsk : Mode.Psk;\n        }\n        else {\n            mode = params.senderKey !== undefined ? Mode.Auth : Mode.Base;\n        }\n        return await this._keyScheduleS(mode, dh.sharedSecret, dh.enc, params);\n    }\n    /**\n     * Creates an encryption context for a recipient.\n     *\n     * If the error occurred, throws {@link DecapError}\n     * | {@link DeserializeError} | {@link ValidationError}.\n     *\n     * @param params A set of parameters for the recipient encryption context.\n     * @returns A recipient encryption context.\n     * @throws {@link DecapError}, {@link DeserializeError}, {@link ValidationError}\n     */\n    async createRecipientContext(params) {\n        this._validateInputLength(params);\n        await this._setup();\n        const sharedSecret = await this._kem.decap(params);\n        let mode;\n        if (params.psk !== undefined) {\n            mode = params.senderPublicKey !== undefined ? Mode.AuthPsk : Mode.Psk;\n        }\n        else {\n            mode = params.senderPublicKey !== undefined ? Mode.Auth : Mode.Base;\n        }\n        return await this._keyScheduleR(mode, sharedSecret, params);\n    }\n    /**\n     * Encrypts a message to a recipient.\n     *\n     * If the error occurred, throws `EncapError` | `MessageLimitReachedError` | `SealError` | `ValidationError`.\n     *\n     * @param params A set of parameters for building a sender encryption context.\n     * @param pt A plain text as bytes to be encrypted.\n     * @param aad Additional authenticated data as bytes fed by an application.\n     * @returns A cipher text and an encapsulated key as bytes.\n     * @throws {@link EncapError}, {@link MessageLimitReachedError}, {@link SealError}, {@link ValidationError}\n     */\n    async seal(params, pt, aad = EMPTY.buffer) {\n        const ctx = await this.createSenderContext(params);\n        return {\n            ct: await ctx.seal(pt, aad),\n            enc: ctx.enc,\n        };\n    }\n    /**\n     * Decrypts a message from a sender.\n     *\n     * If the error occurred, throws `DecapError` | `DeserializeError` | `OpenError` | `ValidationError`.\n     *\n     * @param params A set of parameters for building a recipient encryption context.\n     * @param ct An encrypted text as bytes to be decrypted.\n     * @param aad Additional authenticated data as bytes fed by an application.\n     * @returns A decrypted plain text as bytes.\n     * @throws {@link DecapError}, {@link DeserializeError}, {@link OpenError}, {@link ValidationError}\n     */\n    async open(params, ct, aad = EMPTY.buffer) {\n        const ctx = await this.createRecipientContext(params);\n        return await ctx.open(ct, aad);\n    }\n    // private verifyPskInputs(mode: Mode, params: KeyScheduleParams) {\n    //   const gotPsk = (params.psk !== undefined);\n    //   const gotPskId = (params.psk !== undefined && params.psk.id.byteLength > 0);\n    //   if (gotPsk !== gotPskId) {\n    //     throw new Error('Inconsistent PSK inputs');\n    //   }\n    //   if (gotPsk && (mode === Mode.Base || mode === Mode.Auth)) {\n    //     throw new Error('PSK input provided when not needed');\n    //   }\n    //   if (!gotPsk && (mode === Mode.Psk || mode === Mode.AuthPsk)) {\n    //     throw new Error('Missing required PSK input');\n    //   }\n    //   return;\n    // }\n    async _keySchedule(mode, sharedSecret, params) {\n        // Currently, there is no point in executing this function\n        // because this hpke library does not allow users to explicitly specify the mode.\n        //\n        // this.verifyPskInputs(mode, params);\n        const pskId = params.psk === undefined\n            ? EMPTY\n            : new Uint8Array(params.psk.id);\n        const pskIdHash = await this._kdf.labeledExtract(EMPTY.buffer, LABEL_PSK_ID_HASH, pskId);\n        const info = params.info === undefined\n            ? EMPTY\n            : new Uint8Array(params.info);\n        const infoHash = await this._kdf.labeledExtract(EMPTY.buffer, LABEL_INFO_HASH, info);\n        const keyScheduleContext = new Uint8Array(1 + pskIdHash.byteLength + infoHash.byteLength);\n        keyScheduleContext.set(new Uint8Array([mode]), 0);\n        keyScheduleContext.set(new Uint8Array(pskIdHash), 1);\n        keyScheduleContext.set(new Uint8Array(infoHash), 1 + pskIdHash.byteLength);\n        const psk = params.psk === undefined\n            ? EMPTY\n            : new Uint8Array(params.psk.key);\n        const ikm = this._kdf.buildLabeledIkm(LABEL_SECRET, psk)\n            .buffer;\n        const exporterSecretInfo = this._kdf.buildLabeledInfo(LABEL_EXP, keyScheduleContext, this._kdf.hashSize).buffer;\n        const exporterSecret = await this._kdf.extractAndExpand(sharedSecret, ikm, exporterSecretInfo, this._kdf.hashSize);\n        if (this._aead.id === AeadId.ExportOnly) {\n            return { aead: this._aead, exporterSecret: exporterSecret };\n        }\n        const keyInfo = this._kdf.buildLabeledInfo(LABEL_KEY, keyScheduleContext, this._aead.keySize).buffer;\n        const key = await this._kdf.extractAndExpand(sharedSecret, ikm, keyInfo, this._aead.keySize);\n        const baseNonceInfo = this._kdf.buildLabeledInfo(LABEL_BASE_NONCE, keyScheduleContext, this._aead.nonceSize).buffer;\n        const baseNonce = await this._kdf.extractAndExpand(sharedSecret, ikm, baseNonceInfo, this._aead.nonceSize);\n        return {\n            aead: this._aead,\n            exporterSecret: exporterSecret,\n            key: key,\n            baseNonce: new Uint8Array(baseNonce),\n            seq: 0,\n        };\n    }\n    async _keyScheduleS(mode, sharedSecret, enc, params) {\n        const res = await this._keySchedule(mode, sharedSecret, params);\n        if (res.key === undefined) {\n            return new SenderExporterContextImpl(this._api, this._kdf, res.exporterSecret, enc);\n        }\n        return new SenderContextImpl(this._api, this._kdf, res, enc);\n    }\n    async _keyScheduleR(mode, sharedSecret, params) {\n        const res = await this._keySchedule(mode, sharedSecret, params);\n        if (res.key === undefined) {\n            return new RecipientExporterContextImpl(this._api, this._kdf, res.exporterSecret);\n        }\n        return new RecipientContextImpl(this._api, this._kdf, res);\n    }\n    _validateInputLength(params) {\n        if (params.info !== undefined &&\n            params.info.byteLength > INFO_LENGTH_LIMIT) {\n            throw new InvalidParamError(\"Too long info\");\n        }\n        if (params.psk !== undefined) {\n            if (params.psk.key.byteLength < MINIMUM_PSK_LENGTH) {\n                throw new InvalidParamError(`PSK must have at least ${MINIMUM_PSK_LENGTH} bytes`);\n            }\n            if (params.psk.key.byteLength > INPUT_LENGTH_LIMIT) {\n                throw new InvalidParamError(\"Too long psk.key\");\n            }\n            if (params.psk.id.byteLength > INPUT_LENGTH_LIMIT) {\n                throw new InvalidParamError(\"Too long psk.id\");\n            }\n        }\n        return;\n    }\n}\n","import { Dhkem, Ec, HkdfSha256Native, HkdfSha384Native, HkdfSha512Native, KemId, } from \"@hpke/common\";\nexport class DhkemP256HkdfSha256Native extends Dhkem {\n    constructor() {\n        const kdf = new HkdfSha256Native();\n        const prim = new Ec(KemId.DhkemP256HkdfSha256, kdf);\n        super(KemId.DhkemP256HkdfSha256, prim, kdf);\n        Object.defineProperty(this, \"id\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: KemId.DhkemP256HkdfSha256\n        });\n        Object.defineProperty(this, \"secretSize\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 32\n        });\n        Object.defineProperty(this, \"encSize\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 65\n        });\n        Object.defineProperty(this, \"publicKeySize\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 65\n        });\n        Object.defineProperty(this, \"privateKeySize\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 32\n        });\n    }\n}\nexport class DhkemP384HkdfSha384Native extends Dhkem {\n    constructor() {\n        const kdf = new HkdfSha384Native();\n        const prim = new Ec(KemId.DhkemP384HkdfSha384, kdf);\n        super(KemId.DhkemP384HkdfSha384, prim, kdf);\n        Object.defineProperty(this, \"id\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: KemId.DhkemP384HkdfSha384\n        });\n        Object.defineProperty(this, \"secretSize\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 48\n        });\n        Object.defineProperty(this, \"encSize\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 97\n        });\n        Object.defineProperty(this, \"publicKeySize\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 97\n        });\n        Object.defineProperty(this, \"privateKeySize\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 48\n        });\n    }\n}\nexport class DhkemP521HkdfSha512Native extends Dhkem {\n    constructor() {\n        const kdf = new HkdfSha512Native();\n        const prim = new Ec(KemId.DhkemP521HkdfSha512, kdf);\n        super(KemId.DhkemP521HkdfSha512, prim, kdf);\n        Object.defineProperty(this, \"id\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: KemId.DhkemP521HkdfSha512\n        });\n        Object.defineProperty(this, \"secretSize\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 64\n        });\n        Object.defineProperty(this, \"encSize\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 133\n        });\n        Object.defineProperty(this, \"publicKeySize\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 133\n        });\n        Object.defineProperty(this, \"privateKeySize\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 64\n        });\n    }\n}\n","import { HkdfSha256Native, HkdfSha384Native, HkdfSha512Native, } from \"@hpke/common\";\nimport { CipherSuiteNative } from \"./cipherSuiteNative.js\";\nimport { DhkemP256HkdfSha256Native, DhkemP384HkdfSha384Native, DhkemP521HkdfSha512Native, } from \"./kems/dhkemNative.js\";\n/**\n * The Hybrid Public Key Encryption (HPKE) ciphersuite,\n * which is implemented using only\n * {@link https://www.w3.org/TR/WebCryptoAPI/ | Web Cryptography API}.\n *\n * This class is the same as\n * {@link https://jsr.io/@hpke/core/doc/~/CipherSuiteNative | @hpke/core#CipherSuiteNative} as follows:\n * which supports only the ciphersuites that can be implemented on the native\n * {@link https://www.w3.org/TR/WebCryptoAPI/ | Web Cryptography API}.\n * Therefore, the following cryptographic algorithms are not supported for now:\n * - `DHKEM(X25519, HKDF-SHA256)`\n * - `DHKEM(X448, HKDF-SHA512)`\n * - `ChaCha20Poly1305`\n *\n * In addtion, the HKDF functions contained in this `CipherSuiteNative`\n * class can only derive keys of the same length as the `hashSize`.\n *\n * If you want to use the unsupported cryptographic algorithms\n * above or derive keys longer than the `hashSize`,\n * please use {@link https://jsr.io/@hpke/hpke-js/doc/~/CipherSuite | hpke-js#CipherSuite}.\n *\n * This class provides following functions:\n *\n * - Creates encryption contexts both for senders and recipients.\n *     - {@link createSenderContext}\n *     - {@link createRecipientContext}\n * - Provides single-shot encryption API.\n *     - {@link seal}\n *     - {@link open}\n *\n * The calling of the constructor of this class is the starting\n * point for HPKE operations for both senders and recipients.\n *\n * @example Use only ciphersuites supported by Web Cryptography API.\n *\n * ```ts\n * import {\n *   Aes128Gcm,\n *   DhkemP256HkdfSha256,\n *   HkdfSha256,\n *   CipherSuite,\n * } from \"@hpke/core\";\n *\n * const suite = new CipherSuite({\n *   kem: new DhkemP256HkdfSha256(),\n *   kdf: new HkdfSha256(),\n *   aead: new Aes128Gcm(),\n * });\n * ```\n *\n * @example Use a ciphersuite which is currently not supported by Web Cryptography API.\n *\n * ```ts\n * import { Aes128Gcm, HkdfSha256, CipherSuite } from \"@hpke/core\";\n * import { DhkemX25519HkdfSha256 } from \"@hpke/dhkem-x25519\";\n * const suite = new CipherSuite({\n *   kem: new DhkemX25519HkdfSha256(),\n *   kdf: new HkdfSha256(),\n *   aead: new Aes128Gcm(),\n * });\n * ```\n */\nexport class CipherSuite extends CipherSuiteNative {\n}\n/**\n * The DHKEM(P-256, HKDF-SHA256) for HPKE KEM implementing {@link KemInterface}.\n *\n * When using `@hpke/core`, the instance of this class must be specified\n * to the `kem` parameter of {@link CipherSuiteParams} instead of `KemId.DhkemP256HkdfSha256`\n * as follows:\n *\n * @example\n *\n * ```ts\n * import {\n *   Aes128Gcm,\n *   CipherSuite,\n *   DhkemP256HkdfSha256,\n *   HkdfSha256,\n * } from \"@hpke/core\";\n *\n * const suite = new CipherSuite({\n *   kem: new DhkemP256HkdfSha256(),\n *   kdf: new HkdfSha256(),\n *   aead: new Aes128Gcm(),\n * });\n * ```\n */\nexport class DhkemP256HkdfSha256 extends DhkemP256HkdfSha256Native {\n}\n/**\n * The DHKEM(P-384, HKDF-SHA384) for HPKE KEM implementing {@link KemInterface}.\n *\n * When using `@hpke/core`, the instance of this class must be specified\n * to the `kem` parameter of {@link CipherSuiteParams} instead of `KemId.DhkemP384HkdfSha384`\n * as follows:\n *\n * @example\n *\n * ```ts\n * import {\n *   Aes128Gcm,\n *   CipherSuite,\n *   DhkemP384HkdfSha384,\n *   HkdfSha384,\n * } from \"@hpke/core\";\n *\n * const suite = new CipherSuite({\n *   kem: new DhkemP384HkdfSha384(),\n *   kdf: new HkdfSha384(),\n *   aead: new Aes128Gcm(),\n * });\n * ```\n */\nexport class DhkemP384HkdfSha384 extends DhkemP384HkdfSha384Native {\n}\n/**\n * The DHKEM(P-521, HKDF-SHA512) for HPKE KEM implementing {@link KemInterface}.\n *\n * When using `@hpke/core`, the instance of this class must be specified\n * to the `kem` parameter of {@link CipherSuiteParams} instead of `KemId.DhkemP521HkdfSha512`\n * as follows:\n *\n * @example\n *\n * ```ts\n * import {\n *   Aes256Gcm,\n *   CipherSuite,\n *   DhkemP521HkdfSha512,\n *   HkdfSha512,\n * } from \"@hpke/core\";\n *\n * const suite = new CipherSuite({\n *   kem: new DhkemP521HkdfSha512(),\n *   kdf: new HkdfSha512(),\n *   aead: new Aes256Gcm(),\n * });\n * ```\n */\nexport class DhkemP521HkdfSha512 extends DhkemP521HkdfSha512Native {\n}\n/**\n * The HKDF-SHA256 for HPKE KDF implementing {@link KdfInterface}.\n *\n * When using `@hpke/core`, the instance of this class must be specified\n * to the `kem` parameter of {@link CipherSuiteParams} instead of `KdfId.HkdfSha256`.\n *\n * The KDF class can only derive keys of the same length as the `hashSize`.\n * If you want to derive keys longer than the `hashSize`,\n * please use {@link https://jsr.io/@hpke/hpke-js/doc/~/CipherSuite | hpke-js#CipherSuite}.\n *\n * @example\n *\n * ```ts\n * import {\n *   Aes128Gcm,\n *   CipherSuite,\n *   DhkemP256HkdfSha256,\n *   HkdfSha256,\n * } from \"@hpke/core\";\n *\n * const suite = new CipherSuite({\n *   kem: new DhkemP256HkdfSha256(),\n *   kdf: new HkdfSha256(),\n *   aead: new Aes128Gcm(),\n * });\n * ```\n */\nexport class HkdfSha256 extends HkdfSha256Native {\n}\n/**\n * The HKDF-SHA384 for HPKE KDF implementing {@link KdfInterface}.\n *\n * When using `@hpke/core`, the instance of this class must be specified\n * to the `kem` parameter of {@link CipherSuiteParams} instead of `KdfId.HkdfSha384`.\n *\n * The KDF class can only derive keys of the same length as the `hashSize`.\n * If you want to derive keys longer than the `hashSize`,\n * please use {@link https://jsr.io/@hpke/hpke-js/doc/~/CipherSuite | hpke-js#CipherSuite}.\n *\n * @example\n *\n * ```ts\n * import {\n *   Aes128Gcm,\n *   CipherSuite,\n *   DhkemP384HkdfSha384,\n *   HkdfSha384,\n * } from \"@hpke/core\";\n *\n * const suite = new CipherSuite({\n *   kem: new DhkemP384HkdfSha384(),\n *   kdf: new HkdfSha384(),\n *   aead: new Aes128Gcm(),\n * });\n * ```\n */\nexport class HkdfSha384 extends HkdfSha384Native {\n}\n/**\n * The HKDF-SHA512 for HPKE KDF implementing {@link KdfInterface}.\n *\n * When using `@hpke/core`, the instance of this class must be specified\n * to the `kem` parameter of {@link CipherSuiteParams} instead of `KdfId.HkdfSha512`.\n *\n * The KDF class can only derive keys of the same length as the `hashSize`.\n * If you want to derive keys longer than the `hashSize`,\n * please use {@link https://jsr.io/@hpke/hpke-js/doc/~/CipherSuite | hpke-js#CipherSuite}.\n *\n * @example\n *\n * ```ts\n * import {\n *   Aes256Gcm,\n *   CipherSuite,\n *   DhkemP521HkdfSha512,\n *   HkdfSha512,\n * } from \"@hpke/core\";\n *\n * const suite = new CipherSuite({\n *   kem: new DhkemP521HkdfSha512(),\n *   kdf: new HkdfSha512(),\n *   aead: new Aes256Gcm(),\n * });\n * ```\n */\nexport class HkdfSha512 extends HkdfSha512Native {\n}\n","import { base64UrlToBytes, DeriveKeyPairError, DeserializeError, EMPTY, KEM_USAGES, LABEL_DKP_PRK, LABEL_SK, NativeAlgorithm, NotSupportedError, SerializeError, } from \"@hpke/common\";\nconst ALG_NAME = \"X25519\";\n// deno-fmt-ignore\nconst PKCS8_ALG_ID_X25519 = new Uint8Array([\n    0x30, 0x2e, 0x02, 0x01, 0x00, 0x30, 0x05, 0x06,\n    0x03, 0x2b, 0x65, 0x6e, 0x04, 0x22, 0x04, 0x20,\n]);\nexport class X25519 extends NativeAlgorithm {\n    constructor(hkdf) {\n        super();\n        Object.defineProperty(this, \"_hkdf\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"_alg\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"_nPk\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"_nSk\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"_nDh\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"_pkcs8AlgId\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this._alg = { name: ALG_NAME };\n        this._hkdf = hkdf;\n        this._nPk = 32;\n        this._nSk = 32;\n        this._nDh = 32;\n        this._pkcs8AlgId = PKCS8_ALG_ID_X25519;\n    }\n    async serializePublicKey(key) {\n        await this._setup();\n        try {\n            return await this._api.exportKey(\"raw\", key);\n        }\n        catch (e) {\n            throw new SerializeError(e);\n        }\n    }\n    async deserializePublicKey(key) {\n        await this._setup();\n        try {\n            return await this._importRawKey(key, true);\n        }\n        catch (e) {\n            throw new DeserializeError(e);\n        }\n    }\n    async serializePrivateKey(key) {\n        await this._setup();\n        try {\n            const jwk = await this._api.exportKey(\"jwk\", key);\n            if (!(\"d\" in jwk)) {\n                throw new Error(\"Not private key\");\n            }\n            return base64UrlToBytes(jwk[\"d\"]).buffer;\n        }\n        catch (e) {\n            throw new SerializeError(e);\n        }\n    }\n    async deserializePrivateKey(key) {\n        await this._setup();\n        try {\n            return await this._importRawKey(key, false);\n        }\n        catch (e) {\n            throw new DeserializeError(e);\n        }\n    }\n    async importKey(format, key, isPublic) {\n        await this._setup();\n        try {\n            if (format === \"raw\") {\n                return await this._importRawKey(key, isPublic);\n            }\n            // jwk\n            if (key instanceof ArrayBuffer) {\n                throw new Error(\"Invalid jwk key format\");\n            }\n            return await this._importJWK(key, isPublic);\n        }\n        catch (e) {\n            throw new DeserializeError(e);\n        }\n    }\n    async generateKeyPair() {\n        await this._setup();\n        try {\n            return await this._api.generateKey(ALG_NAME, true, KEM_USAGES);\n        }\n        catch (e) {\n            throw new NotSupportedError(e);\n        }\n    }\n    async deriveKeyPair(ikm) {\n        await this._setup();\n        try {\n            const dkpPrk = await this._hkdf.labeledExtract(EMPTY.buffer, LABEL_DKP_PRK, new Uint8Array(ikm));\n            const rawSk = await this._hkdf.labeledExpand(dkpPrk, LABEL_SK, EMPTY, this._nSk);\n            const rawSkBytes = new Uint8Array(rawSk);\n            const sk = await this._deserializePkcs8Key(rawSkBytes);\n            rawSkBytes.fill(0);\n            return {\n                privateKey: sk,\n                publicKey: await this.derivePublicKey(sk),\n            };\n        }\n        catch (e) {\n            throw new DeriveKeyPairError(e);\n        }\n    }\n    async derivePublicKey(key) {\n        await this._setup();\n        try {\n            const jwk = await this._api.exportKey(\"jwk\", key);\n            delete jwk[\"d\"];\n            delete jwk[\"key_ops\"];\n            return await this._api.importKey(\"jwk\", jwk, this._alg, true, []);\n        }\n        catch (e) {\n            throw new DeserializeError(e);\n        }\n    }\n    async dh(sk, pk) {\n        await this._setup();\n        try {\n            const bits = await this._api.deriveBits({\n                name: ALG_NAME,\n                public: pk,\n            }, sk, this._nDh * 8);\n            return bits;\n        }\n        catch (e) {\n            throw new SerializeError(e);\n        }\n    }\n    async _importRawKey(key, isPublic) {\n        if (isPublic && key.byteLength !== this._nPk) {\n            throw new Error(\"Invalid public key for the ciphersuite\");\n        }\n        if (!isPublic && key.byteLength !== this._nSk) {\n            throw new Error(\"Invalid private key for the ciphersuite\");\n        }\n        if (isPublic) {\n            return await this._api.importKey(\"raw\", key, this._alg, true, []);\n        }\n        return await this._deserializePkcs8Key(new Uint8Array(key));\n    }\n    async _importJWK(key, isPublic) {\n        if (typeof key.kty === \"undefined\" || key.kty !== \"OKP\") {\n            throw new Error(`Invalid kty: ${key.crv}`);\n        }\n        if (typeof key.crv === \"undefined\" || key.crv !== ALG_NAME) {\n            throw new Error(`Invalid crv: ${key.crv}`);\n        }\n        if (isPublic) {\n            if (typeof key.d !== \"undefined\") {\n                throw new Error(\"Invalid key: `d` should not be set\");\n            }\n            return await this._api.importKey(\"jwk\", key, this._alg, true, []);\n        }\n        if (typeof key.d === \"undefined\") {\n            throw new Error(\"Invalid key: `d` not found\");\n        }\n        return await this._api.importKey(\"jwk\", key, this._alg, true, KEM_USAGES);\n    }\n    async _deserializePkcs8Key(k) {\n        const pkcs8Key = new Uint8Array(this._pkcs8AlgId.length + k.length);\n        pkcs8Key.set(this._pkcs8AlgId, 0);\n        pkcs8Key.set(k, this._pkcs8AlgId.length);\n        return await this._api.importKey(\"pkcs8\", pkcs8Key, this._alg, true, KEM_USAGES);\n    }\n}\n","import { Dhkem, HkdfSha256Native, KemId } from \"@hpke/common\";\nimport { X25519 } from \"./dhkemPrimitives/x25519.js\";\n/**\n * The DHKEM(X25519, HKDF-SHA256) for HPKE KEM implementing {@link KemInterface}.\n *\n * The instance of this class can be specified to the\n * {@link https://jsr.io/@hpke/core/doc/~/CipherSuiteParams | CipherSuiteParams} as follows:\n *\n * @example\n *\n * ```ts\n * import {\n *   Aes128Gcm,\n *   CipherSuite,\n *   HkdfSha256,\n *   DhkemX25519HkdfSha256,\n * } from \"@hpke/core\";\n *\n * const suite = new CipherSuite({\n *   kem: new DhkemX25519HkdfSha256(),\n *   kdf: new HkdfSha256(),\n *   aead: new Aes128Gcm(),\n * });\n * ```\n */\nexport class DhkemX25519HkdfSha256 extends Dhkem {\n    constructor() {\n        const kdf = new HkdfSha256Native();\n        super(KemId.DhkemX25519HkdfSha256, new X25519(kdf), kdf);\n        /** KemId.DhkemX25519HkdfSha256 (0x0020) */\n        Object.defineProperty(this, \"id\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: KemId.DhkemX25519HkdfSha256\n        });\n        /** 32 */\n        Object.defineProperty(this, \"secretSize\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 32\n        });\n        /** 32 */\n        Object.defineProperty(this, \"encSize\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 32\n        });\n        /** 32 */\n        Object.defineProperty(this, \"publicKeySize\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 32\n        });\n        /** 32 */\n        Object.defineProperty(this, \"privateKeySize\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 32\n        });\n    }\n}\n","import { base64UrlToBytes, DeriveKeyPairError, DeserializeError, EMPTY, KEM_USAGES, LABEL_DKP_PRK, LABEL_SK, NativeAlgorithm, NotSupportedError, SerializeError, } from \"@hpke/common\";\nconst ALG_NAME = \"X448\";\n// deno-fmt-ignore\nconst PKCS8_ALG_ID_X448 = new Uint8Array([\n    0x30, 0x46, 0x02, 0x01, 0x00, 0x30, 0x05, 0x06,\n    0x03, 0x2b, 0x65, 0x6f, 0x04, 0x3a, 0x04, 0x38,\n]);\nexport class X448 extends NativeAlgorithm {\n    constructor(hkdf) {\n        super();\n        Object.defineProperty(this, \"_hkdf\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"_alg\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"_nPk\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"_nSk\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"_nDh\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"_pkcs8AlgId\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this._alg = { name: ALG_NAME };\n        this._hkdf = hkdf;\n        this._nPk = 56;\n        this._nSk = 56;\n        this._nDh = 56;\n        this._pkcs8AlgId = PKCS8_ALG_ID_X448;\n    }\n    async serializePublicKey(key) {\n        await this._setup();\n        try {\n            return await this._api.exportKey(\"raw\", key);\n        }\n        catch (e) {\n            throw new SerializeError(e);\n        }\n    }\n    async deserializePublicKey(key) {\n        await this._setup();\n        try {\n            return await this._importRawKey(key, true);\n        }\n        catch (e) {\n            throw new DeserializeError(e);\n        }\n    }\n    async serializePrivateKey(key) {\n        await this._setup();\n        try {\n            const jwk = await this._api.exportKey(\"jwk\", key);\n            if (!(\"d\" in jwk)) {\n                throw new Error(\"Not private key\");\n            }\n            return base64UrlToBytes(jwk[\"d\"]).buffer;\n        }\n        catch (e) {\n            throw new SerializeError(e);\n        }\n    }\n    async deserializePrivateKey(key) {\n        await this._setup();\n        try {\n            return await this._importRawKey(key, false);\n        }\n        catch (e) {\n            throw new DeserializeError(e);\n        }\n    }\n    async importKey(format, key, isPublic) {\n        await this._setup();\n        try {\n            if (format === \"raw\") {\n                return await this._importRawKey(key, isPublic);\n            }\n            // jwk\n            if (key instanceof ArrayBuffer) {\n                throw new Error(\"Invalid jwk key format\");\n            }\n            return await this._importJWK(key, isPublic);\n        }\n        catch (e) {\n            throw new DeserializeError(e);\n        }\n    }\n    async generateKeyPair() {\n        await this._setup();\n        try {\n            return await this._api.generateKey(ALG_NAME, true, KEM_USAGES);\n        }\n        catch (e) {\n            throw new NotSupportedError(e);\n        }\n    }\n    async deriveKeyPair(ikm) {\n        await this._setup();\n        try {\n            const dkpPrk = await this._hkdf.labeledExtract(EMPTY.buffer, LABEL_DKP_PRK, new Uint8Array(ikm));\n            const rawSk = await this._hkdf.labeledExpand(dkpPrk, LABEL_SK, EMPTY, this._nSk);\n            const rawSkBytes = new Uint8Array(rawSk);\n            const sk = await this._deserializePkcs8Key(rawSkBytes);\n            rawSkBytes.fill(0);\n            return {\n                privateKey: sk,\n                publicKey: await this.derivePublicKey(sk),\n            };\n        }\n        catch (e) {\n            throw new DeriveKeyPairError(e);\n        }\n    }\n    async derivePublicKey(key) {\n        await this._setup();\n        try {\n            const jwk = await this._api.exportKey(\"jwk\", key);\n            delete jwk[\"d\"];\n            delete jwk[\"key_ops\"];\n            return await this._api.importKey(\"jwk\", jwk, this._alg, true, []);\n        }\n        catch (e) {\n            throw new DeserializeError(e);\n        }\n    }\n    async dh(sk, pk) {\n        await this._setup();\n        try {\n            const bits = await this._api.deriveBits({\n                name: ALG_NAME,\n                public: pk,\n            }, sk, this._nDh * 8);\n            return bits;\n        }\n        catch (e) {\n            throw new SerializeError(e);\n        }\n    }\n    async _importRawKey(key, isPublic) {\n        if (isPublic && key.byteLength !== this._nPk) {\n            throw new Error(\"Invalid public key for the ciphersuite\");\n        }\n        if (!isPublic && key.byteLength !== this._nSk) {\n            throw new Error(\"Invalid private key for the ciphersuite\");\n        }\n        if (isPublic) {\n            return await this._api.importKey(\"raw\", key, this._alg, true, []);\n        }\n        return await this._deserializePkcs8Key(new Uint8Array(key));\n    }\n    async _importJWK(key, isPublic) {\n        if (typeof key.kty === \"undefined\" || key.kty !== \"OKP\") {\n            throw new Error(`Invalid kty: ${key.crv}`);\n        }\n        if (typeof key.crv === \"undefined\" || key.crv !== ALG_NAME) {\n            throw new Error(`Invalid crv: ${key.crv}`);\n        }\n        if (isPublic) {\n            if (typeof key.d !== \"undefined\") {\n                throw new Error(\"Invalid key: `d` should not be set\");\n            }\n            return await this._api.importKey(\"jwk\", key, this._alg, true, []);\n        }\n        if (typeof key.d === \"undefined\") {\n            throw new Error(\"Invalid key: `d` not found\");\n        }\n        return await this._api.importKey(\"jwk\", key, this._alg, true, KEM_USAGES);\n    }\n    async _deserializePkcs8Key(k) {\n        const pkcs8Key = new Uint8Array(this._pkcs8AlgId.length + k.length);\n        pkcs8Key.set(this._pkcs8AlgId, 0);\n        pkcs8Key.set(k, this._pkcs8AlgId.length);\n        return await this._api.importKey(\"pkcs8\", pkcs8Key, this._alg, true, KEM_USAGES);\n    }\n}\n","import { Dhkem, HkdfSha512Native, KemId } from \"@hpke/common\";\nimport { X448 } from \"./dhkemPrimitives/x448.js\";\n/**\n * The DHKEM(X448, HKDF-SHA512) for HPKE KEM implementing {@link KemInterface}.\n *\n * The instance of this class can be specified to the\n * {@link https://jsr.io/@hpke/core/doc/~/CipherSuiteParams | CipherSuiteParams} as follows:\n *\n * @example\n *\n * ```ts\n * import {\n *   Aes256Gcm,\n *   CipherSuite,\n *   HkdfSha512,\n *   DhkemX448HkdfSha512,\n * } from \"@hpke/core\";\n *\n * const suite = new CipherSuite({\n *   kem: new DhkemX448HkdfSha512(),\n *   kdf: new HkdfSha512(),\n *   aead: new Aes256Gcm(),\n * });\n * ```\n */\nexport class DhkemX448HkdfSha512 extends Dhkem {\n    constructor() {\n        const kdf = new HkdfSha512Native();\n        super(KemId.DhkemX448HkdfSha512, new X448(kdf), kdf);\n        /** KemId.DhkemX448HkdfSha512 (0x0021) */\n        Object.defineProperty(this, \"id\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: KemId.DhkemX448HkdfSha512\n        });\n        /** 64 */\n        Object.defineProperty(this, \"secretSize\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 64\n        });\n        /** 56 */\n        Object.defineProperty(this, \"encSize\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 56\n        });\n        /** 56 */\n        Object.defineProperty(this, \"publicKeySize\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 56\n        });\n        /** 56 */\n        Object.defineProperty(this, \"privateKeySize\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 56\n        });\n    }\n}\n","\"use strict\";\n\nmodule.exports = function (item) {\n  var content = item[1];\n  var cssMapping = item[3];\n  if (!cssMapping) {\n    return content;\n  }\n  if (typeof btoa === \"function\") {\n    var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(cssMapping))));\n    var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n    var sourceMapping = \"/*# \".concat(data, \" */\");\n    return [content].concat([sourceMapping]).join(\"\\n\");\n  }\n  return [content].join(\"\\n\");\n};","\"use strict\";\n\n/* istanbul ignore next  */\nfunction insertStyleElement(options) {\n  var element = document.createElement(\"style\");\n  options.setAttributes(element, options.attributes);\n  options.insert(element, options.options);\n  return element;\n}\nmodule.exports = insertStyleElement;","/*! noble-ed25519 - MIT License (c) 2019 Paul Miller (paulmillr.com) */\n/**\n * 4KB JS implementation of ed25519 EdDSA signatures.\n * Compliant with RFC8032, FIPS 186-5 & ZIP215.\n * @module\n * @example\n * ```js\nimport * as ed from '@noble/ed25519';\n(async () => {\n  const privKey = ed.utils.randomPrivateKey();\n  const message = Uint8Array.from([0xab, 0xbc, 0xcd, 0xde]);\n  const pubKey = await ed.getPublicKeyAsync(privKey); // Sync methods are also present\n  const signature = await ed.signAsync(message, privKey);\n  const isValid = await ed.verifyAsync(signature, message, pubKey);\n})();\n```\n */\n/**\n * Curve params. ed25519 is twisted edwards curve. Equation is x + y = -a + dxy.\n * * P = `2n**255n - 19n` // field over which calculations are done\n * * N = `2n**252n + 27742317777372353535851937790883648493n` // group order, amount of curve points\n * * h = 8 // cofactor\n * * a = `Fp.create(BigInt(-1))` // equation param\n * * d = -121665/121666 a.k.a. `Fp.neg(121665 * Fp.inv(121666))` // equation param\n * * Gx, Gy are coordinates of Generator / base point\n */\nconst ed25519_CURVE = {\n    p: 0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffedn,\n    n: 0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3edn,\n    h: 8n,\n    a: 0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffecn,\n    d: 0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3n,\n    Gx: 0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51an,\n    Gy: 0x6666666666666666666666666666666666666666666666666666666666666658n,\n};\nconst { p: P, n: N, Gx, Gy, a: _a, d: _d } = ed25519_CURVE;\nconst h = 8n; // cofactor\nconst L = 32; // field / group byte length\nconst L2 = 64;\n// Helpers and Precomputes sections are reused between libraries\n// ## Helpers\n// ----------\n// error helper, messes-up stack trace\nconst err = (m = '') => {\n    throw new Error(m);\n};\nconst isBig = (n) => typeof n === 'bigint'; // is big integer\nconst isStr = (s) => typeof s === 'string'; // is string\nconst isBytes = (a) => a instanceof Uint8Array || (ArrayBuffer.isView(a) && a.constructor.name === 'Uint8Array');\n/** assert is Uint8Array (of specific length) */\nconst abytes = (a, l) => !isBytes(a) || (typeof l === 'number' && l > 0 && a.length !== l)\n    ? err('Uint8Array expected')\n    : a;\n/** create Uint8Array */\nconst u8n = (len) => new Uint8Array(len);\nconst u8fr = (buf) => Uint8Array.from(buf);\nconst padh = (n, pad) => n.toString(16).padStart(pad, '0');\nconst bytesToHex = (b) => Array.from(abytes(b))\n    .map((e) => padh(e, 2))\n    .join('');\nconst C = { _0: 48, _9: 57, A: 65, F: 70, a: 97, f: 102 }; // ASCII characters\nconst _ch = (ch) => {\n    if (ch >= C._0 && ch <= C._9)\n        return ch - C._0; // '2' => 50-48\n    if (ch >= C.A && ch <= C.F)\n        return ch - (C.A - 10); // 'B' => 66-(65-10)\n    if (ch >= C.a && ch <= C.f)\n        return ch - (C.a - 10); // 'b' => 98-(97-10)\n    return;\n};\nconst hexToBytes = (hex) => {\n    const e = 'hex invalid';\n    if (!isStr(hex))\n        return err(e);\n    const hl = hex.length;\n    const al = hl / 2;\n    if (hl % 2)\n        return err(e);\n    const array = u8n(al);\n    for (let ai = 0, hi = 0; ai < al; ai++, hi += 2) {\n        // treat each char as ASCII\n        const n1 = _ch(hex.charCodeAt(hi)); // parse first char, multiply it by 16\n        const n2 = _ch(hex.charCodeAt(hi + 1)); // parse second char\n        if (n1 === undefined || n2 === undefined)\n            return err(e);\n        array[ai] = n1 * 16 + n2; // example: 'A9' => 10*16 + 9\n    }\n    return array;\n};\n/** normalize hex or ui8a to ui8a */\nconst toU8 = (a, len) => abytes(isStr(a) ? hexToBytes(a) : u8fr(abytes(a)), len);\nconst cr = () => globalThis?.crypto; // WebCrypto is available in all modern environments\nconst subtle = () => cr()?.subtle ?? err('crypto.subtle must be defined');\n// prettier-ignore\nconst concatBytes = (...arrs) => {\n    const r = u8n(arrs.reduce((sum, a) => sum + abytes(a).length, 0)); // create u8a of summed length\n    let pad = 0; // walk through each array,\n    arrs.forEach(a => { r.set(a, pad); pad += a.length; }); // ensure they have proper type\n    return r;\n};\n/** WebCrypto OS-level CSPRNG (random number generator). Will throw when not available. */\nconst randomBytes = (len = L) => {\n    const c = cr();\n    return c.getRandomValues(u8n(len));\n};\nconst big = BigInt;\nconst arange = (n, min, max, msg = 'bad number: out of range') => isBig(n) && min <= n && n < max ? n : err(msg);\n/** modular division */\nconst M = (a, b = P) => {\n    const r = a % b;\n    return r >= 0n ? r : b + r;\n};\nconst modN = (a) => M(a, N);\n/** Modular inversion using eucledian GCD (non-CT). No negative exponent for now. */\n// prettier-ignore\nconst invert = (num, md) => {\n    if (num === 0n || md <= 0n)\n        err('no inverse n=' + num + ' mod=' + md);\n    let a = M(num, md), b = md, x = 0n, y = 1n, u = 1n, v = 0n;\n    while (a !== 0n) {\n        const q = b / a, r = b % a;\n        const m = x - u * q, n = y - v * q;\n        b = a, a = r, x = u, y = v, u = m, v = n;\n    }\n    return b === 1n ? M(x, md) : err('no inverse'); // b is gcd at this point\n};\nconst callHash = (name) => {\n    // @ts-ignore\n    const fn = etc[name];\n    if (typeof fn !== 'function')\n        err('hashes.' + name + ' not set');\n    return fn;\n};\nconst apoint = (p) => (p instanceof Point ? p : err('Point expected'));\n// ## End of Helpers\n// -----------------\nconst B256 = 2n ** 256n;\n/** Point in XYZT extended coordinates. */\nclass Point {\n    static BASE;\n    static ZERO;\n    ex;\n    ey;\n    ez;\n    et;\n    constructor(ex, ey, ez, et) {\n        const max = B256;\n        this.ex = arange(ex, 0n, max);\n        this.ey = arange(ey, 0n, max);\n        this.ez = arange(ez, 1n, max);\n        this.et = arange(et, 0n, max);\n        Object.freeze(this);\n    }\n    static fromAffine(p) {\n        return new Point(p.x, p.y, 1n, M(p.x * p.y));\n    }\n    /** RFC8032 5.1.3: Uint8Array to Point. */\n    static fromBytes(hex, zip215 = false) {\n        const d = _d;\n        // Copy array to not mess it up.\n        const normed = u8fr(abytes(hex, L));\n        // adjust first LE byte = last BE byte\n        const lastByte = hex[31];\n        normed[31] = lastByte & ~0x80;\n        const y = bytesToNumLE(normed);\n        // zip215=true:           0 <= y < 2^256\n        // zip215=false, RFC8032: 0 <= y < 2^255-19\n        const max = zip215 ? B256 : P;\n        arange(y, 0n, max);\n        const y2 = M(y * y); // y\n        const u = M(y2 - 1n); // u=y-1\n        const v = M(d * y2 + 1n); // v=dy+1\n        let { isValid, value: x } = uvRatio(u, v); // (uv)(uv)^(p-5)/8; square root\n        if (!isValid)\n            err('bad point: y not sqrt'); // not square root: bad point\n        const isXOdd = (x & 1n) === 1n; // adjust sign of x coordinate\n        const isLastByteOdd = (lastByte & 0x80) !== 0; // x_0, last bit\n        if (!zip215 && x === 0n && isLastByteOdd)\n            err('bad point: x==0, isLastByteOdd'); // x=0, x_0=1\n        if (isLastByteOdd !== isXOdd)\n            x = M(-x);\n        return new Point(x, y, 1n, M(x * y)); // Z=1, T=xy\n    }\n    /** Checks if the point is valid and on-curve. */\n    assertValidity() {\n        const a = _a;\n        const d = _d;\n        const p = this;\n        if (p.is0())\n            throw new Error('bad point: ZERO'); // TODO: optimize, with vars below?\n        // Equation in affine coordinates: ax + y = 1 + dxy\n        // Equation in projective coordinates (X/Z, Y/Z, Z):  (aX + Y)Z = Z + dXY\n        const { ex: X, ey: Y, ez: Z, et: T } = p;\n        const X2 = M(X * X); // X\n        const Y2 = M(Y * Y); // Y\n        const Z2 = M(Z * Z); // Z\n        const Z4 = M(Z2 * Z2); // Z\n        const aX2 = M(X2 * a); // aX\n        const left = M(Z2 * M(aX2 + Y2)); // (aX + Y)Z\n        const right = M(Z4 + M(d * M(X2 * Y2))); // Z + dXY\n        if (left !== right)\n            throw new Error('bad point: equation left != right (1)');\n        // In Extended coordinates we also have T, which is x*y=T/Z: check X*Y == Z*T\n        const XY = M(X * Y);\n        const ZT = M(Z * T);\n        if (XY !== ZT)\n            throw new Error('bad point: equation left != right (2)');\n        return this;\n    }\n    /** Equality check: compare points P&Q. */\n    equals(other) {\n        const { ex: X1, ey: Y1, ez: Z1 } = this;\n        const { ex: X2, ey: Y2, ez: Z2 } = apoint(other); // checks class equality\n        const X1Z2 = M(X1 * Z2);\n        const X2Z1 = M(X2 * Z1);\n        const Y1Z2 = M(Y1 * Z2);\n        const Y2Z1 = M(Y2 * Z1);\n        return X1Z2 === X2Z1 && Y1Z2 === Y2Z1;\n    }\n    is0() {\n        return this.equals(I);\n    }\n    /** Flip point over y coordinate. */\n    negate() {\n        return new Point(M(-this.ex), this.ey, this.ez, M(-this.et));\n    }\n    /** Point doubling. Complete formula. Cost: `4M + 4S + 1*a + 6add + 1*2`. */\n    double() {\n        const { ex: X1, ey: Y1, ez: Z1 } = this;\n        const a = _a;\n        // https://hyperelliptic.org/EFD/g1p/auto-twisted-extended.html#doubling-dbl-2008-hwcd\n        const A = M(X1 * X1);\n        const B = M(Y1 * Y1);\n        const C = M(2n * M(Z1 * Z1));\n        const D = M(a * A);\n        const x1y1 = X1 + Y1;\n        const E = M(M(x1y1 * x1y1) - A - B);\n        const G = D + B;\n        const F = G - C;\n        const H = D - B;\n        const X3 = M(E * F);\n        const Y3 = M(G * H);\n        const T3 = M(E * H);\n        const Z3 = M(F * G);\n        return new Point(X3, Y3, Z3, T3);\n    }\n    /** Point addition. Complete formula. Cost: `8M + 1*k + 8add + 1*2`. */\n    add(other) {\n        const { ex: X1, ey: Y1, ez: Z1, et: T1 } = this;\n        const { ex: X2, ey: Y2, ez: Z2, et: T2 } = apoint(other); // doesn't check if other on-curve\n        const a = _a;\n        const d = _d;\n        // https://hyperelliptic.org/EFD/g1p/auto-twisted-extended-1.html#addition-add-2008-hwcd-3\n        const A = M(X1 * X2);\n        const B = M(Y1 * Y2);\n        const C = M(T1 * d * T2);\n        const D = M(Z1 * Z2);\n        const E = M((X1 + Y1) * (X2 + Y2) - A - B);\n        const F = M(D - C);\n        const G = M(D + C);\n        const H = M(B - a * A);\n        const X3 = M(E * F);\n        const Y3 = M(G * H);\n        const T3 = M(E * H);\n        const Z3 = M(F * G);\n        return new Point(X3, Y3, Z3, T3);\n    }\n    /**\n     * Point-by-scalar multiplication. Scalar must be in range 1 <= n < CURVE.n.\n     * Uses {@link wNAF} for base point.\n     * Uses fake point to mitigate side-channel leakage.\n     * @param n scalar by which point is multiplied\n     * @param safe safe mode guards against timing attacks; unsafe mode is faster\n     */\n    multiply(n, safe = true) {\n        if (!safe && (n === 0n || this.is0()))\n            return I;\n        arange(n, 1n, N);\n        if (n === 1n)\n            return this;\n        if (this.equals(G))\n            return wNAF(n).p;\n        // init result point & fake point\n        let p = I;\n        let f = G;\n        for (let d = this; n > 0n; d = d.double(), n >>= 1n) {\n            // if bit is present, add to point\n            // if not present, add to fake, for timing safety\n            if (n & 1n)\n                p = p.add(d);\n            else if (safe)\n                f = f.add(d);\n        }\n        return p;\n    }\n    /** Convert point to 2d xy affine point. (X, Y, Z)  (x=X/Z, y=Y/Z) */\n    toAffine() {\n        const { ex: x, ey: y, ez: z } = this;\n        // fast-paths for ZERO point OR Z=1\n        if (this.equals(I))\n            return { x: 0n, y: 1n };\n        const iz = invert(z, P);\n        // (Z * Z^-1) must be 1, otherwise bad math\n        if (M(z * iz) !== 1n)\n            err('invalid inverse');\n        // x = X*Z^-1; y = Y*Z^-1\n        return { x: M(x * iz), y: M(y * iz) };\n    }\n    toBytes() {\n        const { x, y } = this.assertValidity().toAffine();\n        const b = numTo32bLE(y);\n        // store sign in first LE byte\n        b[31] |= x & 1n ? 0x80 : 0;\n        return b;\n    }\n    toHex() {\n        return bytesToHex(this.toBytes());\n    } // encode to hex string\n    clearCofactor() {\n        return this.multiply(big(h), false);\n    }\n    isSmallOrder() {\n        return this.clearCofactor().is0();\n    }\n    isTorsionFree() {\n        // multiply by big number CURVE.n\n        let p = this.multiply(N / 2n, false).double(); // ensures the point is not \"bad\".\n        if (N % 2n)\n            p = p.add(this); // P^(N+1) // P*N == (P*(N/2))*2+P\n        return p.is0();\n    }\n    static fromHex(hex, zip215) {\n        return Point.fromBytes(toU8(hex), zip215);\n    }\n    get x() {\n        return this.toAffine().x;\n    }\n    get y() {\n        return this.toAffine().y;\n    }\n    toRawBytes() {\n        return this.toBytes();\n    }\n}\n/** Generator / base point */\nconst G = new Point(Gx, Gy, 1n, M(Gx * Gy));\n/** Identity / zero point */\nconst I = new Point(0n, 1n, 1n, 0n);\n// Static aliases\nPoint.BASE = G;\nPoint.ZERO = I;\nconst numTo32bLE = (num) => hexToBytes(padh(arange(num, 0n, B256), L2)).reverse();\nconst bytesToNumLE = (b) => big('0x' + bytesToHex(u8fr(abytes(b)).reverse()));\nconst pow2 = (x, power) => {\n    // pow2(x, 4) == x^(2^4)\n    let r = x;\n    while (power-- > 0n) {\n        r *= r;\n        r %= P;\n    }\n    return r;\n};\n// prettier-ignore\nconst pow_2_252_3 = (x) => {\n    const x2 = (x * x) % P; // x^2,       bits 1\n    const b2 = (x2 * x) % P; // x^3,       bits 11\n    const b4 = (pow2(b2, 2n) * b2) % P; // x^(2^4-1), bits 1111\n    const b5 = (pow2(b4, 1n) * x) % P; // x^(2^5-1), bits 11111\n    const b10 = (pow2(b5, 5n) * b5) % P; // x^(2^10)\n    const b20 = (pow2(b10, 10n) * b10) % P; // x^(2^20)\n    const b40 = (pow2(b20, 20n) * b20) % P; // x^(2^40)\n    const b80 = (pow2(b40, 40n) * b40) % P; // x^(2^80)\n    const b160 = (pow2(b80, 80n) * b80) % P; // x^(2^160)\n    const b240 = (pow2(b160, 80n) * b80) % P; // x^(2^240)\n    const b250 = (pow2(b240, 10n) * b10) % P; // x^(2^250)\n    const pow_p_5_8 = (pow2(b250, 2n) * x) % P; // < To pow to (p+3)/8, multiply it by x.\n    return { pow_p_5_8, b2 };\n};\nconst RM1 = 0x2b8324804fc1df0b2b4d00993dfbd7a72f431806ad2fe478c4ee1b274a0ea0b0n; // -1\n// for sqrt comp\n// prettier-ignore\nconst uvRatio = (u, v) => {\n    const v3 = M(v * v * v); // v\n    const v7 = M(v3 * v3 * v); // v\n    const pow = pow_2_252_3(u * v7).pow_p_5_8; // (uv)^(p-5)/8\n    let x = M(u * v3 * pow); // (uv)(uv)^(p-5)/8\n    const vx2 = M(v * x * x); // vx\n    const root1 = x; // First root candidate\n    const root2 = M(x * RM1); // Second root candidate; RM1 is -1\n    const useRoot1 = vx2 === u; // If vx = u (mod p), x is a square root\n    const useRoot2 = vx2 === M(-u); // If vx = -u, set x <-- x * 2^((p-1)/4)\n    const noRoot = vx2 === M(-u * RM1); // There is no valid root, vx = -u-1\n    if (useRoot1)\n        x = root1;\n    if (useRoot2 || noRoot)\n        x = root2; // We return root2 anyway, for const-time\n    if ((M(x) & 1n) === 1n)\n        x = M(-x); // edIsNegative\n    return { isValid: useRoot1 || useRoot2, value: x };\n};\n// N == L, just weird naming\nconst modL_LE = (hash) => modN(bytesToNumLE(hash)); // modulo L; but little-endian\nconst sha512a = (...m) => etc.sha512Async(...m); // Async SHA512\nconst sha512s = (...m) => callHash('sha512Sync')(...m);\n// RFC8032 5.1.5\nconst hash2extK = (hashed) => {\n    // slice creates a copy, unlike subarray\n    const head = hashed.slice(0, L);\n    head[0] &= 248; // Clamp bits: 0b1111_1000\n    head[31] &= 127; // 0b0111_1111\n    head[31] |= 64; // 0b0100_0000\n    const prefix = hashed.slice(L, L2); // private key \"prefix\"\n    const scalar = modL_LE(head); // modular division over curve order\n    const point = G.multiply(scalar); // public key point\n    const pointBytes = point.toBytes(); // point serialized to Uint8Array\n    return { head, prefix, scalar, point, pointBytes };\n};\n// RFC8032 5.1.5; getPublicKey async, sync. Hash priv key and extract point.\nconst getExtendedPublicKeyAsync = (priv) => sha512a(toU8(priv, L)).then(hash2extK);\nconst getExtendedPublicKey = (priv) => hash2extK(sha512s(toU8(priv, L)));\n/** Creates 32-byte ed25519 public key from 32-byte private key. Async. */\nconst getPublicKeyAsync = (priv) => getExtendedPublicKeyAsync(priv).then((p) => p.pointBytes);\n/** Creates 32-byte ed25519 public key from 32-byte private key. To use, set `etc.sha512Sync` first. */\nconst getPublicKey = (priv) => getExtendedPublicKey(priv).pointBytes;\nconst hashFinishA = (res) => sha512a(res.hashable).then(res.finish);\nconst hashFinishS = (res) => res.finish(sha512s(res.hashable));\nconst _sign = (e, rBytes, msg) => {\n    // sign() shared code\n    const { pointBytes: P, scalar: s } = e;\n    const r = modL_LE(rBytes); // r was created outside, reduce it modulo L\n    const R = G.multiply(r).toBytes(); // R = [r]B\n    const hashable = concatBytes(R, P, msg); // dom2(F, C) || R || A || PH(M)\n    const finish = (hashed) => {\n        // k = SHA512(dom2(F, C) || R || A || PH(M))\n        const S = modN(r + modL_LE(hashed) * s); // S = (r + k * s) mod L; 0 <= s < l\n        return abytes(concatBytes(R, numTo32bLE(S)), L2); // 64-byte sig: 32b R.x + 32b LE(S)\n    };\n    return { hashable, finish };\n};\n/**\n * Signs message (NOT message hash) using private key. Async.\n * Follows RFC8032 5.1.6.\n */\nconst signAsync = async (msg, privKey) => {\n    const m = toU8(msg);\n    const e = await getExtendedPublicKeyAsync(privKey);\n    const rBytes = await sha512a(e.prefix, m); // r = SHA512(dom2(F, C) || prefix || PH(M))\n    return hashFinishA(_sign(e, rBytes, m)); // gen R, k, S, then 64-byte signature\n};\n/**\n * Signs message (NOT message hash) using private key. To use, set `hashes.sha512` first.\n * Follows RFC8032 5.1.6.\n */\nconst sign = (msg, privKey) => {\n    const m = toU8(msg);\n    const e = getExtendedPublicKey(privKey);\n    const rBytes = sha512s(e.prefix, m); // r = SHA512(dom2(F, C) || prefix || PH(M))\n    return hashFinishS(_sign(e, rBytes, m)); // gen R, k, S, then 64-byte signature\n};\nconst veriOpts = { zip215: true };\nconst _verify = (sig, msg, pub, opts = veriOpts) => {\n    sig = toU8(sig, L2); // Signature hex str/Bytes, must be 64 bytes\n    msg = toU8(msg); // Message hex str/Bytes\n    pub = toU8(pub, L);\n    const { zip215 } = opts; // switch between zip215 and rfc8032 verif\n    let A;\n    let R;\n    let s;\n    let SB;\n    let hashable = Uint8Array.of();\n    try {\n        A = Point.fromHex(pub, zip215); // public key A decoded\n        R = Point.fromHex(sig.slice(0, L), zip215); // 0 <= R < 2^256: ZIP215 R can be >= P\n        s = bytesToNumLE(sig.slice(L, L2)); // Decode second half as an integer S\n        SB = G.multiply(s, false); // in the range 0 <= s < L\n        hashable = concatBytes(R.toBytes(), A.toBytes(), msg); // dom2(F, C) || R || A || PH(M)\n    }\n    catch (error) { }\n    const finish = (hashed) => {\n        // k = SHA512(dom2(F, C) || R || A || PH(M))\n        if (SB == null)\n            return false; // false if try-catch catched an error\n        if (!zip215 && A.isSmallOrder())\n            return false; // false for SBS: Strongly Binding Signature\n        const k = modL_LE(hashed); // decode in little-endian, modulo L\n        const RkA = R.add(A.multiply(k, false)); // [8]R + [8][k]A'\n        return RkA.add(SB.negate()).clearCofactor().is0(); // [8][S]B = [8]R + [8][k]A'\n    };\n    return { hashable, finish };\n};\n/** Verifies signature on message and public key. Async. Follows RFC8032 5.1.7. */\nconst verifyAsync = async (s, m, p, opts = veriOpts) => hashFinishA(_verify(s, m, p, opts));\n/** Verifies signature on message and public key. To use, set `hashes.sha512` first. Follows RFC8032 5.1.7. */\nconst verify = (s, m, p, opts = veriOpts) => hashFinishS(_verify(s, m, p, opts));\n/** Math, hex, byte helpers. Not in `utils` because utils share API with noble-curves. */\nconst etc = {\n    sha512Async: async (...messages) => {\n        const s = subtle();\n        const m = concatBytes(...messages);\n        return u8n(await s.digest('SHA-512', m.buffer));\n    },\n    sha512Sync: undefined,\n    bytesToHex: bytesToHex,\n    hexToBytes: hexToBytes,\n    concatBytes: concatBytes,\n    mod: M,\n    invert: invert,\n    randomBytes: randomBytes,\n};\n/** ed25519-specific key utilities. */\nconst utils = {\n    getExtendedPublicKeyAsync: getExtendedPublicKeyAsync,\n    getExtendedPublicKey: getExtendedPublicKey,\n    randomPrivateKey: () => randomBytes(L),\n    precompute: (w = 8, p = G) => {\n        p.multiply(3n);\n        w;\n        return p;\n    }, // no-op\n};\n// ## Precomputes\n// --------------\nconst W = 8; // W is window size\nconst scalarBits = 256;\nconst pwindows = Math.ceil(scalarBits / W) + 1; // 33 for W=8\nconst pwindowSize = 2 ** (W - 1); // 128 for W=8\nconst precompute = () => {\n    const points = [];\n    let p = G;\n    let b = p;\n    for (let w = 0; w < pwindows; w++) {\n        b = p;\n        points.push(b);\n        for (let i = 1; i < pwindowSize; i++) {\n            b = b.add(p);\n            points.push(b);\n        } // i=1, bc we skip 0\n        p = b.double();\n    }\n    return points;\n};\nlet Gpows = undefined; // precomputes for base point G\n// const-time negate\nconst ctneg = (cnd, p) => {\n    const n = p.negate();\n    return cnd ? n : p;\n};\n/**\n * Precomputes give 12x faster getPublicKey(), 10x sign(), 2x verify() by\n * caching multiples of G (base point). Cache is stored in 32MB of RAM.\n * Any time `G.multiply` is done, precomputes are used.\n * Not used for getSharedSecret, which instead multiplies random pubkey `P.multiply`.\n *\n * w-ary non-adjacent form (wNAF) precomputation method is 10% slower than windowed method,\n * but takes 2x less RAM. RAM reduction is possible by utilizing `.subtract`.\n *\n * !! Precomputes can be disabled by commenting-out call of the wNAF() inside Point#multiply().\n */\nconst wNAF = (n) => {\n    const comp = Gpows || (Gpows = precompute());\n    let p = I;\n    let f = G; // f must be G, or could become I in the end\n    const pow_2_w = 2 ** W; // 256 for W=8\n    const maxNum = pow_2_w; // 256 for W=8\n    const mask = big(pow_2_w - 1); // 255 for W=8 == mask 0b11111111\n    const shiftBy = big(W); // 8 for W=8\n    for (let w = 0; w < pwindows; w++) {\n        let wbits = Number(n & mask); // extract W bits.\n        n >>= shiftBy; // shift number by W bits.\n        if (wbits > pwindowSize) {\n            wbits -= maxNum;\n            n += 1n;\n        } // split if bits > max: +224 => 256-32\n        const off = w * pwindowSize;\n        const offF = off; // offsets, evaluate both\n        const offP = off + Math.abs(wbits) - 1;\n        const isEven = w % 2 !== 0; // conditions, evaluate both\n        const isNeg = wbits < 0;\n        if (wbits === 0) {\n            // off == I: can't add it. Adding random offF instead.\n            f = f.add(ctneg(isEven, comp[offF])); // bits are 0: add garbage to fake point\n        }\n        else {\n            p = p.add(ctneg(isNeg, comp[offP])); // bits are 1: add to result point\n        }\n    }\n    return { p, f }; // return both real and fake points for JIT\n};\n// !! Remove the export to easily use in REPL / browser console\nexport { ed25519_CURVE as CURVE, etc, Point as ExtendedPoint, getPublicKey, getPublicKeyAsync, Point, sign, signAsync, utils, verify, verifyAsync, };\n","\"use strict\";\n\nvar memo = {};\n\n/* istanbul ignore next  */\nfunction getTarget(target) {\n  if (typeof memo[target] === \"undefined\") {\n    var styleTarget = document.querySelector(target);\n\n    // Special case to return head of iframe instead of iframe itself\n    if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n      try {\n        // This will throw an exception if access to iframe is blocked\n        // due to cross-origin restrictions\n        styleTarget = styleTarget.contentDocument.head;\n      } catch (e) {\n        // istanbul ignore next\n        styleTarget = null;\n      }\n    }\n    memo[target] = styleTarget;\n  }\n  return memo[target];\n}\n\n/* istanbul ignore next  */\nfunction insertBySelector(insert, style) {\n  var target = getTarget(insert);\n  if (!target) {\n    throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n  }\n  target.appendChild(style);\n}\nmodule.exports = insertBySelector;","/**\n * Utilities for hex, bytes, CSPRNG.\n * @module\n */\n/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */\n// We use WebCrypto aka globalThis.crypto, which exists in browsers and node.js 16+.\n// node.js versions earlier than v19 don't declare it in global scope.\n// For node.js, package.json#exports field mapping rewrites import\n// from `crypto` to `cryptoNode`, which imports native module.\n// Makes the utils un-importable in browsers without a bundler.\n// Once node.js 18 is deprecated (2025-04-30), we can just drop the import.\nimport { crypto } from '@noble/hashes/crypto';\n/** Checks if something is Uint8Array. Be careful: nodejs Buffer will return true. */\nexport function isBytes(a) {\n    return a instanceof Uint8Array || (ArrayBuffer.isView(a) && a.constructor.name === 'Uint8Array');\n}\n/** Asserts something is positive integer. */\nexport function anumber(n) {\n    if (!Number.isSafeInteger(n) || n < 0)\n        throw new Error('positive integer expected, got ' + n);\n}\n/** Asserts something is Uint8Array. */\nexport function abytes(b, ...lengths) {\n    if (!isBytes(b))\n        throw new Error('Uint8Array expected');\n    if (lengths.length > 0 && !lengths.includes(b.length))\n        throw new Error('Uint8Array expected of length ' + lengths + ', got length=' + b.length);\n}\n/** Asserts something is hash */\nexport function ahash(h) {\n    if (typeof h !== 'function' || typeof h.create !== 'function')\n        throw new Error('Hash should be wrapped by utils.createHasher');\n    anumber(h.outputLen);\n    anumber(h.blockLen);\n}\n/** Asserts a hash instance has not been destroyed / finished */\nexport function aexists(instance, checkFinished = true) {\n    if (instance.destroyed)\n        throw new Error('Hash instance has been destroyed');\n    if (checkFinished && instance.finished)\n        throw new Error('Hash#digest() has already been called');\n}\n/** Asserts output is properly-sized byte array */\nexport function aoutput(out, instance) {\n    abytes(out);\n    const min = instance.outputLen;\n    if (out.length < min) {\n        throw new Error('digestInto() expects output buffer of length at least ' + min);\n    }\n}\n/** Cast u8 / u16 / u32 to u8. */\nexport function u8(arr) {\n    return new Uint8Array(arr.buffer, arr.byteOffset, arr.byteLength);\n}\n/** Cast u8 / u16 / u32 to u32. */\nexport function u32(arr) {\n    return new Uint32Array(arr.buffer, arr.byteOffset, Math.floor(arr.byteLength / 4));\n}\n/** Zeroize a byte array. Warning: JS provides no guarantees. */\nexport function clean(...arrays) {\n    for (let i = 0; i < arrays.length; i++) {\n        arrays[i].fill(0);\n    }\n}\n/** Create DataView of an array for easy byte-level manipulation. */\nexport function createView(arr) {\n    return new DataView(arr.buffer, arr.byteOffset, arr.byteLength);\n}\n/** The rotate right (circular right shift) operation for uint32 */\nexport function rotr(word, shift) {\n    return (word << (32 - shift)) | (word >>> shift);\n}\n/** The rotate left (circular left shift) operation for uint32 */\nexport function rotl(word, shift) {\n    return (word << shift) | ((word >>> (32 - shift)) >>> 0);\n}\n/** Is current platform little-endian? Most are. Big-Endian platform: IBM */\nexport const isLE = /* @__PURE__ */ (() => new Uint8Array(new Uint32Array([0x11223344]).buffer)[0] === 0x44)();\n/** The byte swap operation for uint32 */\nexport function byteSwap(word) {\n    return (((word << 24) & 0xff000000) |\n        ((word << 8) & 0xff0000) |\n        ((word >>> 8) & 0xff00) |\n        ((word >>> 24) & 0xff));\n}\n/** Conditionally byte swap if on a big-endian platform */\nexport const swap8IfBE = isLE\n    ? (n) => n\n    : (n) => byteSwap(n);\n/** @deprecated */\nexport const byteSwapIfBE = swap8IfBE;\n/** In place byte swap for Uint32Array */\nexport function byteSwap32(arr) {\n    for (let i = 0; i < arr.length; i++) {\n        arr[i] = byteSwap(arr[i]);\n    }\n    return arr;\n}\nexport const swap32IfBE = isLE\n    ? (u) => u\n    : byteSwap32;\n// Built-in hex conversion https://caniuse.com/mdn-javascript_builtins_uint8array_fromhex\nconst hasHexBuiltin = /* @__PURE__ */ (() => \n// @ts-ignore\ntypeof Uint8Array.from([]).toHex === 'function' && typeof Uint8Array.fromHex === 'function')();\n// Array where index 0xf0 (240) is mapped to string 'f0'\nconst hexes = /* @__PURE__ */ Array.from({ length: 256 }, (_, i) => i.toString(16).padStart(2, '0'));\n/**\n * Convert byte array to hex string. Uses built-in function, when available.\n * @example bytesToHex(Uint8Array.from([0xca, 0xfe, 0x01, 0x23])) // 'cafe0123'\n */\nexport function bytesToHex(bytes) {\n    abytes(bytes);\n    // @ts-ignore\n    if (hasHexBuiltin)\n        return bytes.toHex();\n    // pre-caching improves the speed 6x\n    let hex = '';\n    for (let i = 0; i < bytes.length; i++) {\n        hex += hexes[bytes[i]];\n    }\n    return hex;\n}\n// We use optimized technique to convert hex string to byte array\nconst asciis = { _0: 48, _9: 57, A: 65, F: 70, a: 97, f: 102 };\nfunction asciiToBase16(ch) {\n    if (ch >= asciis._0 && ch <= asciis._9)\n        return ch - asciis._0; // '2' => 50-48\n    if (ch >= asciis.A && ch <= asciis.F)\n        return ch - (asciis.A - 10); // 'B' => 66-(65-10)\n    if (ch >= asciis.a && ch <= asciis.f)\n        return ch - (asciis.a - 10); // 'b' => 98-(97-10)\n    return;\n}\n/**\n * Convert hex string to byte array. Uses built-in function, when available.\n * @example hexToBytes('cafe0123') // Uint8Array.from([0xca, 0xfe, 0x01, 0x23])\n */\nexport function hexToBytes(hex) {\n    if (typeof hex !== 'string')\n        throw new Error('hex string expected, got ' + typeof hex);\n    // @ts-ignore\n    if (hasHexBuiltin)\n        return Uint8Array.fromHex(hex);\n    const hl = hex.length;\n    const al = hl / 2;\n    if (hl % 2)\n        throw new Error('hex string expected, got unpadded hex of length ' + hl);\n    const array = new Uint8Array(al);\n    for (let ai = 0, hi = 0; ai < al; ai++, hi += 2) {\n        const n1 = asciiToBase16(hex.charCodeAt(hi));\n        const n2 = asciiToBase16(hex.charCodeAt(hi + 1));\n        if (n1 === undefined || n2 === undefined) {\n            const char = hex[hi] + hex[hi + 1];\n            throw new Error('hex string expected, got non-hex character \"' + char + '\" at index ' + hi);\n        }\n        array[ai] = n1 * 16 + n2; // multiply first octet, e.g. 'a3' => 10*16+3 => 160 + 3 => 163\n    }\n    return array;\n}\n/**\n * There is no setImmediate in browser and setTimeout is slow.\n * Call of async fn will return Promise, which will be fullfiled only on\n * next scheduler queue processing step and this is exactly what we need.\n */\nexport const nextTick = async () => { };\n/** Returns control to thread each 'tick' ms to avoid blocking. */\nexport async function asyncLoop(iters, tick, cb) {\n    let ts = Date.now();\n    for (let i = 0; i < iters; i++) {\n        cb(i);\n        // Date.now() is not monotonic, so in case if clock goes backwards we return return control too\n        const diff = Date.now() - ts;\n        if (diff >= 0 && diff < tick)\n            continue;\n        await nextTick();\n        ts += diff;\n    }\n}\n/**\n * Converts string to bytes using UTF8 encoding.\n * @example utf8ToBytes('abc') // Uint8Array.from([97, 98, 99])\n */\nexport function utf8ToBytes(str) {\n    if (typeof str !== 'string')\n        throw new Error('string expected');\n    return new Uint8Array(new TextEncoder().encode(str)); // https://bugzil.la/1681809\n}\n/**\n * Converts bytes to string using UTF8 encoding.\n * @example bytesToUtf8(Uint8Array.from([97, 98, 99])) // 'abc'\n */\nexport function bytesToUtf8(bytes) {\n    return new TextDecoder().decode(bytes);\n}\n/**\n * Normalizes (non-hex) string or Uint8Array to Uint8Array.\n * Warning: when Uint8Array is passed, it would NOT get copied.\n * Keep in mind for future mutable operations.\n */\nexport function toBytes(data) {\n    if (typeof data === 'string')\n        data = utf8ToBytes(data);\n    abytes(data);\n    return data;\n}\n/**\n * Helper for KDFs: consumes uint8array or string.\n * When string is passed, does utf8 decoding, using TextDecoder.\n */\nexport function kdfInputToBytes(data) {\n    if (typeof data === 'string')\n        data = utf8ToBytes(data);\n    abytes(data);\n    return data;\n}\n/** Copies several Uint8Arrays into one. */\nexport function concatBytes(...arrays) {\n    let sum = 0;\n    for (let i = 0; i < arrays.length; i++) {\n        const a = arrays[i];\n        abytes(a);\n        sum += a.length;\n    }\n    const res = new Uint8Array(sum);\n    for (let i = 0, pad = 0; i < arrays.length; i++) {\n        const a = arrays[i];\n        res.set(a, pad);\n        pad += a.length;\n    }\n    return res;\n}\nexport function checkOpts(defaults, opts) {\n    if (opts !== undefined && {}.toString.call(opts) !== '[object Object]')\n        throw new Error('options should be object or undefined');\n    const merged = Object.assign(defaults, opts);\n    return merged;\n}\n/** For runtime check if class implements interface */\nexport class Hash {\n}\n/** Wraps hash function, creating an interface on top of it */\nexport function createHasher(hashCons) {\n    const hashC = (msg) => hashCons().update(toBytes(msg)).digest();\n    const tmp = hashCons();\n    hashC.outputLen = tmp.outputLen;\n    hashC.blockLen = tmp.blockLen;\n    hashC.create = () => hashCons();\n    return hashC;\n}\nexport function createOptHasher(hashCons) {\n    const hashC = (msg, opts) => hashCons(opts).update(toBytes(msg)).digest();\n    const tmp = hashCons({});\n    hashC.outputLen = tmp.outputLen;\n    hashC.blockLen = tmp.blockLen;\n    hashC.create = (opts) => hashCons(opts);\n    return hashC;\n}\nexport function createXOFer(hashCons) {\n    const hashC = (msg, opts) => hashCons(opts).update(toBytes(msg)).digest();\n    const tmp = hashCons({});\n    hashC.outputLen = tmp.outputLen;\n    hashC.blockLen = tmp.blockLen;\n    hashC.create = (opts) => hashCons(opts);\n    return hashC;\n}\nexport const wrapConstructor = createHasher;\nexport const wrapConstructorWithOpts = createOptHasher;\nexport const wrapXOFConstructorWithOpts = createXOFer;\n/** Cryptographically secure PRNG. Uses internal OS-level `crypto.getRandomValues`. */\nexport function randomBytes(bytesLength = 32) {\n    if (crypto && typeof crypto.getRandomValues === 'function') {\n        return crypto.getRandomValues(new Uint8Array(bytesLength));\n    }\n    // Legacy Node.js compatibility\n    if (crypto && typeof crypto.randomBytes === 'function') {\n        return Uint8Array.from(crypto.randomBytes(bytesLength));\n    }\n    throw new Error('crypto.getRandomValues must be defined');\n}\n//# sourceMappingURL=utils.js.map","/**\n * Internal Merkle-Damgard hash utils.\n * @module\n */\nimport { Hash, abytes, aexists, aoutput, clean, createView, toBytes } from \"./utils.js\";\n/** Polyfill for Safari 14. https://caniuse.com/mdn-javascript_builtins_dataview_setbiguint64 */\nexport function setBigUint64(view, byteOffset, value, isLE) {\n    if (typeof view.setBigUint64 === 'function')\n        return view.setBigUint64(byteOffset, value, isLE);\n    const _32n = BigInt(32);\n    const _u32_max = BigInt(0xffffffff);\n    const wh = Number((value >> _32n) & _u32_max);\n    const wl = Number(value & _u32_max);\n    const h = isLE ? 4 : 0;\n    const l = isLE ? 0 : 4;\n    view.setUint32(byteOffset + h, wh, isLE);\n    view.setUint32(byteOffset + l, wl, isLE);\n}\n/** Choice: a ? b : c */\nexport function Chi(a, b, c) {\n    return (a & b) ^ (~a & c);\n}\n/** Majority function, true if any two inputs is true. */\nexport function Maj(a, b, c) {\n    return (a & b) ^ (a & c) ^ (b & c);\n}\n/**\n * Merkle-Damgard hash construction base class.\n * Could be used to create MD5, RIPEMD, SHA1, SHA2.\n */\nexport class HashMD extends Hash {\n    constructor(blockLen, outputLen, padOffset, isLE) {\n        super();\n        this.finished = false;\n        this.length = 0;\n        this.pos = 0;\n        this.destroyed = false;\n        this.blockLen = blockLen;\n        this.outputLen = outputLen;\n        this.padOffset = padOffset;\n        this.isLE = isLE;\n        this.buffer = new Uint8Array(blockLen);\n        this.view = createView(this.buffer);\n    }\n    update(data) {\n        aexists(this);\n        data = toBytes(data);\n        abytes(data);\n        const { view, buffer, blockLen } = this;\n        const len = data.length;\n        for (let pos = 0; pos < len;) {\n            const take = Math.min(blockLen - this.pos, len - pos);\n            // Fast path: we have at least one block in input, cast it to view and process\n            if (take === blockLen) {\n                const dataView = createView(data);\n                for (; blockLen <= len - pos; pos += blockLen)\n                    this.process(dataView, pos);\n                continue;\n            }\n            buffer.set(data.subarray(pos, pos + take), this.pos);\n            this.pos += take;\n            pos += take;\n            if (this.pos === blockLen) {\n                this.process(view, 0);\n                this.pos = 0;\n            }\n        }\n        this.length += data.length;\n        this.roundClean();\n        return this;\n    }\n    digestInto(out) {\n        aexists(this);\n        aoutput(out, this);\n        this.finished = true;\n        // Padding\n        // We can avoid allocation of buffer for padding completely if it\n        // was previously not allocated here. But it won't change performance.\n        const { buffer, view, blockLen, isLE } = this;\n        let { pos } = this;\n        // append the bit '1' to the message\n        buffer[pos++] = 0b10000000;\n        clean(this.buffer.subarray(pos));\n        // we have less than padOffset left in buffer, so we cannot put length in\n        // current block, need process it and pad again\n        if (this.padOffset > blockLen - pos) {\n            this.process(view, 0);\n            pos = 0;\n        }\n        // Pad until full block byte with zeros\n        for (let i = pos; i < blockLen; i++)\n            buffer[i] = 0;\n        // Note: sha512 requires length to be 128bit integer, but length in JS will overflow before that\n        // You need to write around 2 exabytes (u64_max / 8 / (1024**6)) for this to happen.\n        // So we just write lowest 64 bits of that value.\n        setBigUint64(view, blockLen - 8, BigInt(this.length * 8), isLE);\n        this.process(view, 0);\n        const oview = createView(out);\n        const len = this.outputLen;\n        // NOTE: we do division by 4 later, which should be fused in single op with modulo by JIT\n        if (len % 4)\n            throw new Error('_sha2: outputLen should be aligned to 32bit');\n        const outLen = len / 4;\n        const state = this.get();\n        if (outLen > state.length)\n            throw new Error('_sha2: outputLen bigger than state');\n        for (let i = 0; i < outLen; i++)\n            oview.setUint32(4 * i, state[i], isLE);\n    }\n    digest() {\n        const { buffer, outputLen } = this;\n        this.digestInto(buffer);\n        const res = buffer.slice(0, outputLen);\n        this.destroy();\n        return res;\n    }\n    _cloneInto(to) {\n        to || (to = new this.constructor());\n        to.set(...this.get());\n        const { blockLen, buffer, length, finished, destroyed, pos } = this;\n        to.destroyed = destroyed;\n        to.finished = finished;\n        to.length = length;\n        to.pos = pos;\n        if (length % blockLen)\n            to.buffer.set(buffer);\n        return to;\n    }\n    clone() {\n        return this._cloneInto();\n    }\n}\n/**\n * Initial SHA-2 state: fractional parts of square roots of first 16 primes 2..53.\n * Check out `test/misc/sha2-gen-iv.js` for recomputation guide.\n */\n/** Initial SHA256 state. Bits 0..32 of frac part of sqrt of primes 2..19 */\nexport const SHA256_IV = /* @__PURE__ */ Uint32Array.from([\n    0x6a09e667, 0xbb67ae85, 0x3c6ef372, 0xa54ff53a, 0x510e527f, 0x9b05688c, 0x1f83d9ab, 0x5be0cd19,\n]);\n/** Initial SHA224 state. Bits 32..64 of frac part of sqrt of primes 23..53 */\nexport const SHA224_IV = /* @__PURE__ */ Uint32Array.from([\n    0xc1059ed8, 0x367cd507, 0x3070dd17, 0xf70e5939, 0xffc00b31, 0x68581511, 0x64f98fa7, 0xbefa4fa4,\n]);\n/** Initial SHA384 state. Bits 0..64 of frac part of sqrt of primes 23..53 */\nexport const SHA384_IV = /* @__PURE__ */ Uint32Array.from([\n    0xcbbb9d5d, 0xc1059ed8, 0x629a292a, 0x367cd507, 0x9159015a, 0x3070dd17, 0x152fecd8, 0xf70e5939,\n    0x67332667, 0xffc00b31, 0x8eb44a87, 0x68581511, 0xdb0c2e0d, 0x64f98fa7, 0x47b5481d, 0xbefa4fa4,\n]);\n/** Initial SHA512 state. Bits 0..64 of frac part of sqrt of primes 2..19 */\nexport const SHA512_IV = /* @__PURE__ */ Uint32Array.from([\n    0x6a09e667, 0xf3bcc908, 0xbb67ae85, 0x84caa73b, 0x3c6ef372, 0xfe94f82b, 0xa54ff53a, 0x5f1d36f1,\n    0x510e527f, 0xade682d1, 0x9b05688c, 0x2b3e6c1f, 0x1f83d9ab, 0xfb41bd6b, 0x5be0cd19, 0x137e2179,\n]);\n//# sourceMappingURL=_md.js.map","/**\n * Internal helpers for u64. BigUint64Array is too slow as per 2025, so we implement it using Uint32Array.\n * @todo re-check https://issues.chromium.org/issues/42212588\n * @module\n */\nconst U32_MASK64 = /* @__PURE__ */ BigInt(2 ** 32 - 1);\nconst _32n = /* @__PURE__ */ BigInt(32);\nfunction fromBig(n, le = false) {\n    if (le)\n        return { h: Number(n & U32_MASK64), l: Number((n >> _32n) & U32_MASK64) };\n    return { h: Number((n >> _32n) & U32_MASK64) | 0, l: Number(n & U32_MASK64) | 0 };\n}\nfunction split(lst, le = false) {\n    const len = lst.length;\n    let Ah = new Uint32Array(len);\n    let Al = new Uint32Array(len);\n    for (let i = 0; i < len; i++) {\n        const { h, l } = fromBig(lst[i], le);\n        [Ah[i], Al[i]] = [h, l];\n    }\n    return [Ah, Al];\n}\nconst toBig = (h, l) => (BigInt(h >>> 0) << _32n) | BigInt(l >>> 0);\n// for Shift in [0, 32)\nconst shrSH = (h, _l, s) => h >>> s;\nconst shrSL = (h, l, s) => (h << (32 - s)) | (l >>> s);\n// Right rotate for Shift in [1, 32)\nconst rotrSH = (h, l, s) => (h >>> s) | (l << (32 - s));\nconst rotrSL = (h, l, s) => (h << (32 - s)) | (l >>> s);\n// Right rotate for Shift in (32, 64), NOTE: 32 is special case.\nconst rotrBH = (h, l, s) => (h << (64 - s)) | (l >>> (s - 32));\nconst rotrBL = (h, l, s) => (h >>> (s - 32)) | (l << (64 - s));\n// Right rotate for shift===32 (just swaps l&h)\nconst rotr32H = (_h, l) => l;\nconst rotr32L = (h, _l) => h;\n// Left rotate for Shift in [1, 32)\nconst rotlSH = (h, l, s) => (h << s) | (l >>> (32 - s));\nconst rotlSL = (h, l, s) => (l << s) | (h >>> (32 - s));\n// Left rotate for Shift in (32, 64), NOTE: 32 is special case.\nconst rotlBH = (h, l, s) => (l << (s - 32)) | (h >>> (64 - s));\nconst rotlBL = (h, l, s) => (h << (s - 32)) | (l >>> (64 - s));\n// JS uses 32-bit signed integers for bitwise operations which means we cannot\n// simple take carry out of low bit sum by shift, we need to use division.\nfunction add(Ah, Al, Bh, Bl) {\n    const l = (Al >>> 0) + (Bl >>> 0);\n    return { h: (Ah + Bh + ((l / 2 ** 32) | 0)) | 0, l: l | 0 };\n}\n// Addition with more than 2 elements\nconst add3L = (Al, Bl, Cl) => (Al >>> 0) + (Bl >>> 0) + (Cl >>> 0);\nconst add3H = (low, Ah, Bh, Ch) => (Ah + Bh + Ch + ((low / 2 ** 32) | 0)) | 0;\nconst add4L = (Al, Bl, Cl, Dl) => (Al >>> 0) + (Bl >>> 0) + (Cl >>> 0) + (Dl >>> 0);\nconst add4H = (low, Ah, Bh, Ch, Dh) => (Ah + Bh + Ch + Dh + ((low / 2 ** 32) | 0)) | 0;\nconst add5L = (Al, Bl, Cl, Dl, El) => (Al >>> 0) + (Bl >>> 0) + (Cl >>> 0) + (Dl >>> 0) + (El >>> 0);\nconst add5H = (low, Ah, Bh, Ch, Dh, Eh) => (Ah + Bh + Ch + Dh + Eh + ((low / 2 ** 32) | 0)) | 0;\n// prettier-ignore\nexport { add, add3H, add3L, add4H, add4L, add5H, add5L, fromBig, rotlBH, rotlBL, rotlSH, rotlSL, rotr32H, rotr32L, rotrBH, rotrBL, rotrSH, rotrSL, shrSH, shrSL, split, toBig };\n// prettier-ignore\nconst u64 = {\n    fromBig, split, toBig,\n    shrSH, shrSL,\n    rotrSH, rotrSL, rotrBH, rotrBL,\n    rotr32H, rotr32L,\n    rotlSH, rotlSL, rotlBH, rotlBL,\n    add, add3L, add3H, add4L, add4H, add5H, add5L,\n};\nexport default u64;\n//# sourceMappingURL=_u64.js.map","/**\n * SHA2 hash function. A.k.a. sha256, sha384, sha512, sha512_224, sha512_256.\n * SHA256 is the fastest hash implementable in JS, even faster than Blake3.\n * Check out [RFC 4634](https://datatracker.ietf.org/doc/html/rfc4634) and\n * [FIPS 180-4](https://nvlpubs.nist.gov/nistpubs/FIPS/NIST.FIPS.180-4.pdf).\n * @module\n */\nimport { Chi, HashMD, Maj, SHA224_IV, SHA256_IV, SHA384_IV, SHA512_IV } from \"./_md.js\";\nimport * as u64 from \"./_u64.js\";\nimport { clean, createHasher, rotr } from \"./utils.js\";\n/**\n * Round constants:\n * First 32 bits of fractional parts of the cube roots of the first 64 primes 2..311)\n */\n// prettier-ignore\nconst SHA256_K = /* @__PURE__ */ Uint32Array.from([\n    0x428a2f98, 0x71374491, 0xb5c0fbcf, 0xe9b5dba5, 0x3956c25b, 0x59f111f1, 0x923f82a4, 0xab1c5ed5,\n    0xd807aa98, 0x12835b01, 0x243185be, 0x550c7dc3, 0x72be5d74, 0x80deb1fe, 0x9bdc06a7, 0xc19bf174,\n    0xe49b69c1, 0xefbe4786, 0x0fc19dc6, 0x240ca1cc, 0x2de92c6f, 0x4a7484aa, 0x5cb0a9dc, 0x76f988da,\n    0x983e5152, 0xa831c66d, 0xb00327c8, 0xbf597fc7, 0xc6e00bf3, 0xd5a79147, 0x06ca6351, 0x14292967,\n    0x27b70a85, 0x2e1b2138, 0x4d2c6dfc, 0x53380d13, 0x650a7354, 0x766a0abb, 0x81c2c92e, 0x92722c85,\n    0xa2bfe8a1, 0xa81a664b, 0xc24b8b70, 0xc76c51a3, 0xd192e819, 0xd6990624, 0xf40e3585, 0x106aa070,\n    0x19a4c116, 0x1e376c08, 0x2748774c, 0x34b0bcb5, 0x391c0cb3, 0x4ed8aa4a, 0x5b9cca4f, 0x682e6ff3,\n    0x748f82ee, 0x78a5636f, 0x84c87814, 0x8cc70208, 0x90befffa, 0xa4506ceb, 0xbef9a3f7, 0xc67178f2\n]);\n/** Reusable temporary buffer. \"W\" comes straight from spec. */\nconst SHA256_W = /* @__PURE__ */ new Uint32Array(64);\nexport class SHA256 extends HashMD {\n    constructor(outputLen = 32) {\n        super(64, outputLen, 8, false);\n        // We cannot use array here since array allows indexing by variable\n        // which means optimizer/compiler cannot use registers.\n        this.A = SHA256_IV[0] | 0;\n        this.B = SHA256_IV[1] | 0;\n        this.C = SHA256_IV[2] | 0;\n        this.D = SHA256_IV[3] | 0;\n        this.E = SHA256_IV[4] | 0;\n        this.F = SHA256_IV[5] | 0;\n        this.G = SHA256_IV[6] | 0;\n        this.H = SHA256_IV[7] | 0;\n    }\n    get() {\n        const { A, B, C, D, E, F, G, H } = this;\n        return [A, B, C, D, E, F, G, H];\n    }\n    // prettier-ignore\n    set(A, B, C, D, E, F, G, H) {\n        this.A = A | 0;\n        this.B = B | 0;\n        this.C = C | 0;\n        this.D = D | 0;\n        this.E = E | 0;\n        this.F = F | 0;\n        this.G = G | 0;\n        this.H = H | 0;\n    }\n    process(view, offset) {\n        // Extend the first 16 words into the remaining 48 words w[16..63] of the message schedule array\n        for (let i = 0; i < 16; i++, offset += 4)\n            SHA256_W[i] = view.getUint32(offset, false);\n        for (let i = 16; i < 64; i++) {\n            const W15 = SHA256_W[i - 15];\n            const W2 = SHA256_W[i - 2];\n            const s0 = rotr(W15, 7) ^ rotr(W15, 18) ^ (W15 >>> 3);\n            const s1 = rotr(W2, 17) ^ rotr(W2, 19) ^ (W2 >>> 10);\n            SHA256_W[i] = (s1 + SHA256_W[i - 7] + s0 + SHA256_W[i - 16]) | 0;\n        }\n        // Compression function main loop, 64 rounds\n        let { A, B, C, D, E, F, G, H } = this;\n        for (let i = 0; i < 64; i++) {\n            const sigma1 = rotr(E, 6) ^ rotr(E, 11) ^ rotr(E, 25);\n            const T1 = (H + sigma1 + Chi(E, F, G) + SHA256_K[i] + SHA256_W[i]) | 0;\n            const sigma0 = rotr(A, 2) ^ rotr(A, 13) ^ rotr(A, 22);\n            const T2 = (sigma0 + Maj(A, B, C)) | 0;\n            H = G;\n            G = F;\n            F = E;\n            E = (D + T1) | 0;\n            D = C;\n            C = B;\n            B = A;\n            A = (T1 + T2) | 0;\n        }\n        // Add the compressed chunk to the current hash value\n        A = (A + this.A) | 0;\n        B = (B + this.B) | 0;\n        C = (C + this.C) | 0;\n        D = (D + this.D) | 0;\n        E = (E + this.E) | 0;\n        F = (F + this.F) | 0;\n        G = (G + this.G) | 0;\n        H = (H + this.H) | 0;\n        this.set(A, B, C, D, E, F, G, H);\n    }\n    roundClean() {\n        clean(SHA256_W);\n    }\n    destroy() {\n        this.set(0, 0, 0, 0, 0, 0, 0, 0);\n        clean(this.buffer);\n    }\n}\nexport class SHA224 extends SHA256 {\n    constructor() {\n        super(28);\n        this.A = SHA224_IV[0] | 0;\n        this.B = SHA224_IV[1] | 0;\n        this.C = SHA224_IV[2] | 0;\n        this.D = SHA224_IV[3] | 0;\n        this.E = SHA224_IV[4] | 0;\n        this.F = SHA224_IV[5] | 0;\n        this.G = SHA224_IV[6] | 0;\n        this.H = SHA224_IV[7] | 0;\n    }\n}\n// SHA2-512 is slower than sha256 in js because u64 operations are slow.\n// Round contants\n// First 32 bits of the fractional parts of the cube roots of the first 80 primes 2..409\n// prettier-ignore\nconst K512 = /* @__PURE__ */ (() => u64.split([\n    '0x428a2f98d728ae22', '0x7137449123ef65cd', '0xb5c0fbcfec4d3b2f', '0xe9b5dba58189dbbc',\n    '0x3956c25bf348b538', '0x59f111f1b605d019', '0x923f82a4af194f9b', '0xab1c5ed5da6d8118',\n    '0xd807aa98a3030242', '0x12835b0145706fbe', '0x243185be4ee4b28c', '0x550c7dc3d5ffb4e2',\n    '0x72be5d74f27b896f', '0x80deb1fe3b1696b1', '0x9bdc06a725c71235', '0xc19bf174cf692694',\n    '0xe49b69c19ef14ad2', '0xefbe4786384f25e3', '0x0fc19dc68b8cd5b5', '0x240ca1cc77ac9c65',\n    '0x2de92c6f592b0275', '0x4a7484aa6ea6e483', '0x5cb0a9dcbd41fbd4', '0x76f988da831153b5',\n    '0x983e5152ee66dfab', '0xa831c66d2db43210', '0xb00327c898fb213f', '0xbf597fc7beef0ee4',\n    '0xc6e00bf33da88fc2', '0xd5a79147930aa725', '0x06ca6351e003826f', '0x142929670a0e6e70',\n    '0x27b70a8546d22ffc', '0x2e1b21385c26c926', '0x4d2c6dfc5ac42aed', '0x53380d139d95b3df',\n    '0x650a73548baf63de', '0x766a0abb3c77b2a8', '0x81c2c92e47edaee6', '0x92722c851482353b',\n    '0xa2bfe8a14cf10364', '0xa81a664bbc423001', '0xc24b8b70d0f89791', '0xc76c51a30654be30',\n    '0xd192e819d6ef5218', '0xd69906245565a910', '0xf40e35855771202a', '0x106aa07032bbd1b8',\n    '0x19a4c116b8d2d0c8', '0x1e376c085141ab53', '0x2748774cdf8eeb99', '0x34b0bcb5e19b48a8',\n    '0x391c0cb3c5c95a63', '0x4ed8aa4ae3418acb', '0x5b9cca4f7763e373', '0x682e6ff3d6b2b8a3',\n    '0x748f82ee5defb2fc', '0x78a5636f43172f60', '0x84c87814a1f0ab72', '0x8cc702081a6439ec',\n    '0x90befffa23631e28', '0xa4506cebde82bde9', '0xbef9a3f7b2c67915', '0xc67178f2e372532b',\n    '0xca273eceea26619c', '0xd186b8c721c0c207', '0xeada7dd6cde0eb1e', '0xf57d4f7fee6ed178',\n    '0x06f067aa72176fba', '0x0a637dc5a2c898a6', '0x113f9804bef90dae', '0x1b710b35131c471b',\n    '0x28db77f523047d84', '0x32caab7b40c72493', '0x3c9ebe0a15c9bebc', '0x431d67c49c100d4c',\n    '0x4cc5d4becb3e42b6', '0x597f299cfc657e2a', '0x5fcb6fab3ad6faec', '0x6c44198c4a475817'\n].map(n => BigInt(n))))();\nconst SHA512_Kh = /* @__PURE__ */ (() => K512[0])();\nconst SHA512_Kl = /* @__PURE__ */ (() => K512[1])();\n// Reusable temporary buffers\nconst SHA512_W_H = /* @__PURE__ */ new Uint32Array(80);\nconst SHA512_W_L = /* @__PURE__ */ new Uint32Array(80);\nexport class SHA512 extends HashMD {\n    constructor(outputLen = 64) {\n        super(128, outputLen, 16, false);\n        // We cannot use array here since array allows indexing by variable\n        // which means optimizer/compiler cannot use registers.\n        // h -- high 32 bits, l -- low 32 bits\n        this.Ah = SHA512_IV[0] | 0;\n        this.Al = SHA512_IV[1] | 0;\n        this.Bh = SHA512_IV[2] | 0;\n        this.Bl = SHA512_IV[3] | 0;\n        this.Ch = SHA512_IV[4] | 0;\n        this.Cl = SHA512_IV[5] | 0;\n        this.Dh = SHA512_IV[6] | 0;\n        this.Dl = SHA512_IV[7] | 0;\n        this.Eh = SHA512_IV[8] | 0;\n        this.El = SHA512_IV[9] | 0;\n        this.Fh = SHA512_IV[10] | 0;\n        this.Fl = SHA512_IV[11] | 0;\n        this.Gh = SHA512_IV[12] | 0;\n        this.Gl = SHA512_IV[13] | 0;\n        this.Hh = SHA512_IV[14] | 0;\n        this.Hl = SHA512_IV[15] | 0;\n    }\n    // prettier-ignore\n    get() {\n        const { Ah, Al, Bh, Bl, Ch, Cl, Dh, Dl, Eh, El, Fh, Fl, Gh, Gl, Hh, Hl } = this;\n        return [Ah, Al, Bh, Bl, Ch, Cl, Dh, Dl, Eh, El, Fh, Fl, Gh, Gl, Hh, Hl];\n    }\n    // prettier-ignore\n    set(Ah, Al, Bh, Bl, Ch, Cl, Dh, Dl, Eh, El, Fh, Fl, Gh, Gl, Hh, Hl) {\n        this.Ah = Ah | 0;\n        this.Al = Al | 0;\n        this.Bh = Bh | 0;\n        this.Bl = Bl | 0;\n        this.Ch = Ch | 0;\n        this.Cl = Cl | 0;\n        this.Dh = Dh | 0;\n        this.Dl = Dl | 0;\n        this.Eh = Eh | 0;\n        this.El = El | 0;\n        this.Fh = Fh | 0;\n        this.Fl = Fl | 0;\n        this.Gh = Gh | 0;\n        this.Gl = Gl | 0;\n        this.Hh = Hh | 0;\n        this.Hl = Hl | 0;\n    }\n    process(view, offset) {\n        // Extend the first 16 words into the remaining 64 words w[16..79] of the message schedule array\n        for (let i = 0; i < 16; i++, offset += 4) {\n            SHA512_W_H[i] = view.getUint32(offset);\n            SHA512_W_L[i] = view.getUint32((offset += 4));\n        }\n        for (let i = 16; i < 80; i++) {\n            // s0 := (w[i-15] rightrotate 1) xor (w[i-15] rightrotate 8) xor (w[i-15] rightshift 7)\n            const W15h = SHA512_W_H[i - 15] | 0;\n            const W15l = SHA512_W_L[i - 15] | 0;\n            const s0h = u64.rotrSH(W15h, W15l, 1) ^ u64.rotrSH(W15h, W15l, 8) ^ u64.shrSH(W15h, W15l, 7);\n            const s0l = u64.rotrSL(W15h, W15l, 1) ^ u64.rotrSL(W15h, W15l, 8) ^ u64.shrSL(W15h, W15l, 7);\n            // s1 := (w[i-2] rightrotate 19) xor (w[i-2] rightrotate 61) xor (w[i-2] rightshift 6)\n            const W2h = SHA512_W_H[i - 2] | 0;\n            const W2l = SHA512_W_L[i - 2] | 0;\n            const s1h = u64.rotrSH(W2h, W2l, 19) ^ u64.rotrBH(W2h, W2l, 61) ^ u64.shrSH(W2h, W2l, 6);\n            const s1l = u64.rotrSL(W2h, W2l, 19) ^ u64.rotrBL(W2h, W2l, 61) ^ u64.shrSL(W2h, W2l, 6);\n            // SHA256_W[i] = s0 + s1 + SHA256_W[i - 7] + SHA256_W[i - 16];\n            const SUMl = u64.add4L(s0l, s1l, SHA512_W_L[i - 7], SHA512_W_L[i - 16]);\n            const SUMh = u64.add4H(SUMl, s0h, s1h, SHA512_W_H[i - 7], SHA512_W_H[i - 16]);\n            SHA512_W_H[i] = SUMh | 0;\n            SHA512_W_L[i] = SUMl | 0;\n        }\n        let { Ah, Al, Bh, Bl, Ch, Cl, Dh, Dl, Eh, El, Fh, Fl, Gh, Gl, Hh, Hl } = this;\n        // Compression function main loop, 80 rounds\n        for (let i = 0; i < 80; i++) {\n            // S1 := (e rightrotate 14) xor (e rightrotate 18) xor (e rightrotate 41)\n            const sigma1h = u64.rotrSH(Eh, El, 14) ^ u64.rotrSH(Eh, El, 18) ^ u64.rotrBH(Eh, El, 41);\n            const sigma1l = u64.rotrSL(Eh, El, 14) ^ u64.rotrSL(Eh, El, 18) ^ u64.rotrBL(Eh, El, 41);\n            //const T1 = (H + sigma1 + Chi(E, F, G) + SHA256_K[i] + SHA256_W[i]) | 0;\n            const CHIh = (Eh & Fh) ^ (~Eh & Gh);\n            const CHIl = (El & Fl) ^ (~El & Gl);\n            // T1 = H + sigma1 + Chi(E, F, G) + SHA512_K[i] + SHA512_W[i]\n            // prettier-ignore\n            const T1ll = u64.add5L(Hl, sigma1l, CHIl, SHA512_Kl[i], SHA512_W_L[i]);\n            const T1h = u64.add5H(T1ll, Hh, sigma1h, CHIh, SHA512_Kh[i], SHA512_W_H[i]);\n            const T1l = T1ll | 0;\n            // S0 := (a rightrotate 28) xor (a rightrotate 34) xor (a rightrotate 39)\n            const sigma0h = u64.rotrSH(Ah, Al, 28) ^ u64.rotrBH(Ah, Al, 34) ^ u64.rotrBH(Ah, Al, 39);\n            const sigma0l = u64.rotrSL(Ah, Al, 28) ^ u64.rotrBL(Ah, Al, 34) ^ u64.rotrBL(Ah, Al, 39);\n            const MAJh = (Ah & Bh) ^ (Ah & Ch) ^ (Bh & Ch);\n            const MAJl = (Al & Bl) ^ (Al & Cl) ^ (Bl & Cl);\n            Hh = Gh | 0;\n            Hl = Gl | 0;\n            Gh = Fh | 0;\n            Gl = Fl | 0;\n            Fh = Eh | 0;\n            Fl = El | 0;\n            ({ h: Eh, l: El } = u64.add(Dh | 0, Dl | 0, T1h | 0, T1l | 0));\n            Dh = Ch | 0;\n            Dl = Cl | 0;\n            Ch = Bh | 0;\n            Cl = Bl | 0;\n            Bh = Ah | 0;\n            Bl = Al | 0;\n            const All = u64.add3L(T1l, sigma0l, MAJl);\n            Ah = u64.add3H(All, T1h, sigma0h, MAJh);\n            Al = All | 0;\n        }\n        // Add the compressed chunk to the current hash value\n        ({ h: Ah, l: Al } = u64.add(this.Ah | 0, this.Al | 0, Ah | 0, Al | 0));\n        ({ h: Bh, l: Bl } = u64.add(this.Bh | 0, this.Bl | 0, Bh | 0, Bl | 0));\n        ({ h: Ch, l: Cl } = u64.add(this.Ch | 0, this.Cl | 0, Ch | 0, Cl | 0));\n        ({ h: Dh, l: Dl } = u64.add(this.Dh | 0, this.Dl | 0, Dh | 0, Dl | 0));\n        ({ h: Eh, l: El } = u64.add(this.Eh | 0, this.El | 0, Eh | 0, El | 0));\n        ({ h: Fh, l: Fl } = u64.add(this.Fh | 0, this.Fl | 0, Fh | 0, Fl | 0));\n        ({ h: Gh, l: Gl } = u64.add(this.Gh | 0, this.Gl | 0, Gh | 0, Gl | 0));\n        ({ h: Hh, l: Hl } = u64.add(this.Hh | 0, this.Hl | 0, Hh | 0, Hl | 0));\n        this.set(Ah, Al, Bh, Bl, Ch, Cl, Dh, Dl, Eh, El, Fh, Fl, Gh, Gl, Hh, Hl);\n    }\n    roundClean() {\n        clean(SHA512_W_H, SHA512_W_L);\n    }\n    destroy() {\n        clean(this.buffer);\n        this.set(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0);\n    }\n}\nexport class SHA384 extends SHA512 {\n    constructor() {\n        super(48);\n        this.Ah = SHA384_IV[0] | 0;\n        this.Al = SHA384_IV[1] | 0;\n        this.Bh = SHA384_IV[2] | 0;\n        this.Bl = SHA384_IV[3] | 0;\n        this.Ch = SHA384_IV[4] | 0;\n        this.Cl = SHA384_IV[5] | 0;\n        this.Dh = SHA384_IV[6] | 0;\n        this.Dl = SHA384_IV[7] | 0;\n        this.Eh = SHA384_IV[8] | 0;\n        this.El = SHA384_IV[9] | 0;\n        this.Fh = SHA384_IV[10] | 0;\n        this.Fl = SHA384_IV[11] | 0;\n        this.Gh = SHA384_IV[12] | 0;\n        this.Gl = SHA384_IV[13] | 0;\n        this.Hh = SHA384_IV[14] | 0;\n        this.Hl = SHA384_IV[15] | 0;\n    }\n}\n/**\n * Truncated SHA512/256 and SHA512/224.\n * SHA512_IV is XORed with 0xa5a5a5a5a5a5a5a5, then used as \"intermediary\" IV of SHA512/t.\n * Then t hashes string to produce result IV.\n * See `test/misc/sha2-gen-iv.js`.\n */\n/** SHA512/224 IV */\nconst T224_IV = /* @__PURE__ */ Uint32Array.from([\n    0x8c3d37c8, 0x19544da2, 0x73e19966, 0x89dcd4d6, 0x1dfab7ae, 0x32ff9c82, 0x679dd514, 0x582f9fcf,\n    0x0f6d2b69, 0x7bd44da8, 0x77e36f73, 0x04c48942, 0x3f9d85a8, 0x6a1d36c8, 0x1112e6ad, 0x91d692a1,\n]);\n/** SHA512/256 IV */\nconst T256_IV = /* @__PURE__ */ Uint32Array.from([\n    0x22312194, 0xfc2bf72c, 0x9f555fa3, 0xc84c64c2, 0x2393b86b, 0x6f53b151, 0x96387719, 0x5940eabd,\n    0x96283ee2, 0xa88effe3, 0xbe5e1e25, 0x53863992, 0x2b0199fc, 0x2c85b8aa, 0x0eb72ddc, 0x81c52ca2,\n]);\nexport class SHA512_224 extends SHA512 {\n    constructor() {\n        super(28);\n        this.Ah = T224_IV[0] | 0;\n        this.Al = T224_IV[1] | 0;\n        this.Bh = T224_IV[2] | 0;\n        this.Bl = T224_IV[3] | 0;\n        this.Ch = T224_IV[4] | 0;\n        this.Cl = T224_IV[5] | 0;\n        this.Dh = T224_IV[6] | 0;\n        this.Dl = T224_IV[7] | 0;\n        this.Eh = T224_IV[8] | 0;\n        this.El = T224_IV[9] | 0;\n        this.Fh = T224_IV[10] | 0;\n        this.Fl = T224_IV[11] | 0;\n        this.Gh = T224_IV[12] | 0;\n        this.Gl = T224_IV[13] | 0;\n        this.Hh = T224_IV[14] | 0;\n        this.Hl = T224_IV[15] | 0;\n    }\n}\nexport class SHA512_256 extends SHA512 {\n    constructor() {\n        super(32);\n        this.Ah = T256_IV[0] | 0;\n        this.Al = T256_IV[1] | 0;\n        this.Bh = T256_IV[2] | 0;\n        this.Bl = T256_IV[3] | 0;\n        this.Ch = T256_IV[4] | 0;\n        this.Cl = T256_IV[5] | 0;\n        this.Dh = T256_IV[6] | 0;\n        this.Dl = T256_IV[7] | 0;\n        this.Eh = T256_IV[8] | 0;\n        this.El = T256_IV[9] | 0;\n        this.Fh = T256_IV[10] | 0;\n        this.Fl = T256_IV[11] | 0;\n        this.Gh = T256_IV[12] | 0;\n        this.Gl = T256_IV[13] | 0;\n        this.Hh = T256_IV[14] | 0;\n        this.Hl = T256_IV[15] | 0;\n    }\n}\n/**\n * SHA2-256 hash function from RFC 4634.\n *\n * It is the fastest JS hash, even faster than Blake3.\n * To break sha256 using birthday attack, attackers need to try 2^128 hashes.\n * BTC network is doing 2^70 hashes/sec (2^95 hashes/year) as per 2025.\n */\nexport const sha256 = /* @__PURE__ */ createHasher(() => new SHA256());\n/** SHA2-224 hash function from RFC 4634 */\nexport const sha224 = /* @__PURE__ */ createHasher(() => new SHA224());\n/** SHA2-512 hash function from RFC 4634. */\nexport const sha512 = /* @__PURE__ */ createHasher(() => new SHA512());\n/** SHA2-384 hash function from RFC 4634. */\nexport const sha384 = /* @__PURE__ */ createHasher(() => new SHA384());\n/**\n * SHA2-512/256 \"truncated\" hash function, with improved resistance to length extension attacks.\n * See the paper on [truncated SHA512](https://eprint.iacr.org/2010/548.pdf).\n */\nexport const sha512_256 = /* @__PURE__ */ createHasher(() => new SHA512_256());\n/**\n * SHA2-512/224 \"truncated\" hash function, with improved resistance to length extension attacks.\n * See the paper on [truncated SHA512](https://eprint.iacr.org/2010/548.pdf).\n */\nexport const sha512_224 = /* @__PURE__ */ createHasher(() => new SHA512_224());\n//# sourceMappingURL=sha2.js.map","/**\n * SHA2-512 a.k.a. sha512 and sha384. It is slower than sha256 in js because u64 operations are slow.\n *\n * Check out [RFC 4634](https://datatracker.ietf.org/doc/html/rfc4634) and\n * [the paper on truncated SHA512/256](https://eprint.iacr.org/2010/548.pdf).\n * @module\n * @deprecated\n */\nimport { SHA384 as SHA384n, sha384 as sha384n, sha512_224 as sha512_224n, SHA512_224 as SHA512_224n, sha512_256 as sha512_256n, SHA512_256 as SHA512_256n, SHA512 as SHA512n, sha512 as sha512n, } from \"./sha2.js\";\n/** @deprecated Use import from `noble/hashes/sha2` module */\nexport const SHA512 = SHA512n;\n/** @deprecated Use import from `noble/hashes/sha2` module */\nexport const sha512 = sha512n;\n/** @deprecated Use import from `noble/hashes/sha2` module */\nexport const SHA384 = SHA384n;\n/** @deprecated Use import from `noble/hashes/sha2` module */\nexport const sha384 = sha384n;\n/** @deprecated Use import from `noble/hashes/sha2` module */\nexport const SHA512_224 = SHA512_224n;\n/** @deprecated Use import from `noble/hashes/sha2` module */\nexport const sha512_224 = sha512_224n;\n/** @deprecated Use import from `noble/hashes/sha2` module */\nexport const SHA512_256 = SHA512_256n;\n/** @deprecated Use import from `noble/hashes/sha2` module */\nexport const sha512_256 = sha512_256n;\n//# sourceMappingURL=sha512.js.map","\"use strict\";\n\n/* istanbul ignore next  */\nfunction apply(styleElement, options, obj) {\n  var css = \"\";\n  if (obj.supports) {\n    css += \"@supports (\".concat(obj.supports, \") {\");\n  }\n  if (obj.media) {\n    css += \"@media \".concat(obj.media, \" {\");\n  }\n  var needLayer = typeof obj.layer !== \"undefined\";\n  if (needLayer) {\n    css += \"@layer\".concat(obj.layer.length > 0 ? \" \".concat(obj.layer) : \"\", \" {\");\n  }\n  css += obj.css;\n  if (needLayer) {\n    css += \"}\";\n  }\n  if (obj.media) {\n    css += \"}\";\n  }\n  if (obj.supports) {\n    css += \"}\";\n  }\n  var sourceMap = obj.sourceMap;\n  if (sourceMap && typeof btoa !== \"undefined\") {\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\n  }\n\n  // For old IE\n  /* istanbul ignore if  */\n  options.styleTagTransform(css, styleElement, options.options);\n}\nfunction removeStyleElement(styleElement) {\n  // istanbul ignore if\n  if (styleElement.parentNode === null) {\n    return false;\n  }\n  styleElement.parentNode.removeChild(styleElement);\n}\n\n/* istanbul ignore next  */\nfunction domAPI(options) {\n  if (typeof document === \"undefined\") {\n    return {\n      update: function update() {},\n      remove: function remove() {}\n    };\n  }\n  var styleElement = options.insertStyleElement(options);\n  return {\n    update: function update(obj) {\n      apply(styleElement, options, obj);\n    },\n    remove: function remove() {\n      removeStyleElement(styleElement);\n    }\n  };\n}\nmodule.exports = domAPI;"],"names":["module","exports","styleElement","nonce","setAttribute","stylesInDOM","getIndexByIdentifier","identifier","result","i","length","modulesToDom","list","options","idCountMap","identifiers","item","id","base","count","concat","indexByIdentifier","obj","css","media","sourceMap","supports","layer","references","updater","addElementStyle","byIndex","splice","push","api","domAPI","update","newObj","remove","lastIdentifiers","newList","index","newLastIdentifiers","_i","_index","styleSheet","cssText","firstChild","removeChild","appendChild","document","createTextNode","cssWithMappingToString","toString","this","map","content","needLayer","join","modules","dedupe","undefined","alreadyImportedModules","k","_k","HpkeError","Error","constructor","e","message","super","name","ValidationError","EncapError","DecapError","ExportError","SealError","OpenError","MessageLimitReachedError","DeriveKeyPairError","dntGlobalThis","baseObj","globalThis","extObj","Proxy","get","_target","prop","_receiver","set","value","deleteProperty","success","ownKeys","baseKeys","Reflect","extKeys","extKeysSet","Set","filter","has","defineProperty","desc","getOwnPropertyDescriptor","NativeAlgorithm","Object","enumerable","configurable","writable","_setup","_api","async","crypto","subtle","webcrypto","loadSubtleCrypto","NotAssigned","DhkemP256HkdfSha256","DhkemP384HkdfSha384","DhkemP521HkdfSha512","DhkemSecp256k1HkdfSha256","DhkemX25519HkdfSha256","DhkemX448HkdfSha512","HybridkemX25519Kyber768","MlKem512","MlKem768","MlKem1024","XWing","KdfId","HkdfSha256","HkdfSha384","HkdfSha512","AeadId","Aes128Gcm","Aes256Gcm","Chacha20Poly1305","ExportOnly","INPUT_LENGTH_LIMIT","Uint8Array","x","privateKey","publicKey","n","w","ret","a","b","base64UrlToBytes","v","base64","replace","byteString","atob","charCodeAt","LABEL_EAE_PRK","LABEL_SHARED_SECRET","Dhkem","prim","kdf","_prim","_kdf","suiteId","init","serializePublicKey","key","deserializePublicKey","serializePrivateKey","deserializePrivateKey","importKey","format","isPublic","generateKeyPair","deriveKeyPair","ikm","byteLength","encap","params","ke","ekm","enc","pkrm","recipientPublicKey","dh","kemContext","senderKey","sks","pks","derivePublicKey","pksm","c","concat3","sharedSecret","_generateSharedSecret","decap","pke","skr","recipientKey","pkr","senderPublicKey","labeledIkm","buildLabeledIkm","labeledInfo","buildLabeledInfo","secretSize","extractAndExpand","buffer","KEM_USAGES","Bignum","size","_num","val","reset","fill","src","isZero","lessThan","LABEL_CANDIDATE","ORDER_P_256","ORDER_P_384","ORDER_P_521","PKCS8_ALG_ID_P_256","PKCS8_ALG_ID_P_384","PKCS8_ALG_ID_P_521","Ec","kem","hkdf","_hkdf","_alg","namedCurve","_nPk","_nSk","_nDh","_order","_bitmask","_pkcs8AlgId","exportKey","_importRawKey","jwk","ArrayBuffer","_importJWK","generateKey","dkpPrk","labeledExtract","bn","counter","bytes","labeledExpand","sk","_deserializePkcs8Key","pk","deriveBits","public","crv","d","pkcs8Key","HPKE_VERSION","HkdfNative","hash","_suiteId","label","_checkInit","info","len","extract","salt","hashSize","algHash","sign","expand","prk","okm","p","prev","mid","tail","tmp","cur","slice","baseKey","HkdfSha256Native","arguments","HkdfSha384Native","HkdfSha512Native","AEAD_USAGES","BigInt","AesGcmContext","_rawKey","seal","iv","data","aad","_setupKey","alg","additionalData","encrypt","_key","open","decrypt","_importKey","createEncryptionContext","emitNotSupported","Promise","_resolve","reject","LABEL_SEC","ExporterContextImpl","exporterSecret","_data","_aad","exporterContext","RecipientExporterContextImpl","SenderExporterContextImpl","EncryptionContextImpl","baseNonce","seq","_aead","aead","_nK","keySize","_nN","nonceSize","_nT","tagSize","_ctx","computeNonce","seqBytes","buf","xor","incrementSeq","Number","MAX_SAFE_INTEGER","RecipientContextImpl","pt","SenderContextImpl","ct","LABEL_BASE_NONCE","LABEL_EXP","LABEL_INFO_HASH","LABEL_KEY","LABEL_PSK_ID_HASH","LABEL_SECRET","SUITE_ID_HEADER_HPKE","CipherSuiteNative","_kem","createSenderContext","_validateInputLength","mode","psk","_keyScheduleS","createRecipientContext","_keyScheduleR","ctx","_keySchedule","pskId","pskIdHash","infoHash","keyScheduleContext","exporterSecretInfo","keyInfo","baseNonceInfo","res","DhkemP256HkdfSha256Native","DhkemP384HkdfSha384Native","DhkemP521HkdfSha512Native","CipherSuite","ALG_NAME","PKCS8_ALG_ID_X25519","X25519","rawSk","rawSkBytes","kty","PKCS8_ALG_ID_X448","X448","cssMapping","btoa","unescape","encodeURIComponent","JSON","stringify","sourceMapping","element","createElement","setAttributes","attributes","insert","P","Gx","Gy","_a","_d","h","err","m","isStr","s","abytes","l","isView","isBytes","u8n","u8fr","from","padh","pad","padStart","bytesToHex","Array","_ch","ch","hexToBytes","hex","hl","al","array","ai","hi","n1","n2","toU8","cr","concatBytes","arrs","r","reduce","sum","forEach","big","arange","min","max","msg","isBig","M","invert","num","md","y","u","q","apoint","Point","B256","static","ex","ey","ez","et","freeze","fromAffine","fromBytes","zip215","normed","lastByte","bytesToNumLE","y2","isValid","uvRatio","isXOdd","isLastByteOdd","assertValidity","is0","X","Y","Z","T","X2","Y2","Z2","Z4","aX2","equals","other","X1","Y1","Z1","X1Z2","X2Z1","Y1Z2","Y2Z1","I","negate","double","A","B","C","D","x1y1","E","G","F","H","X3","Y3","T3","Z3","add","T1","T2","multiply","safe","N","wNAF","f","toAffine","z","iz","toBytes","numTo32bLE","toHex","clearCofactor","isSmallOrder","isTorsionFree","fromHex","toRawBytes","BASE","ZERO","reverse","pow2","power","RM1","v3","pow","b2","b4","b5","b10","b20","b40","b80","b160","b240","b250","pow_p_5_8","pow_2_252_3","vx2","root1","root2","useRoot1","useRoot2","noRoot","modL_LE","modN","getExtendedPublicKey","priv","hashed","head","prefix","scalar","point","pointBytes","hash2extK","fn","etc","callHash","sha512s","getPublicKey","sha512Async","messages","digest","sha512Sync","mod","randomBytes","getRandomValues","pwindows","Math","ceil","scalarBits","Gpows","ctneg","cnd","comp","points","precompute","mask","pow_2_w","shiftBy","wbits","off","offF","offP","abs","isEven","isNeg","memo","style","target","styleTarget","querySelector","window","HTMLIFrameElement","contentDocument","getTarget","lengths","includes","aexists","instance","checkFinished","destroyed","finished","clean","arrays","createView","arr","DataView","byteOffset","str","TextEncoder","encode","utf8ToBytes","Hash","hashCons","hashC","outputLen","blockLen","create","HashMD","padOffset","isLE","pos","view","take","dataView","process","subarray","roundClean","digestInto","out","aoutput","setBigUint64","_32n","_u32_max","wh","wl","setUint32","oview","outLen","state","destroy","_cloneInto","to","clone","SHA512_IV","Uint32Array","U32_MASK64","fromBig","le","shrSH","_l","shrSL","rotrSH","rotrSL","rotrBH","rotrBL","Ah","Al","Bh","Bl","add3L","Cl","add3H","low","Ch","add4L","Dl","add4H","Dh","add5L","El","add5H","Eh","K512","lst","SHA512_Kh","SHA512_Kl","SHA512_W_H","SHA512_W_L","SHA512","Fh","Fl","Gh","Gl","Hh","Hl","offset","getUint32","W15h","W15l","s0h","s0l","W2h","W2l","s1h","s1l","SUMl","SUMh","sigma1h","sigma1l","CHIh","T1ll","T1h","T1l","sigma0h","sigma0l","MAJh","MAJl","All","insertStyleElement","styleTagTransform","apply","parentNode","removeStyleElement"],"sourceRoot":""}