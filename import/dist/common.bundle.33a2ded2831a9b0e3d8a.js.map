{"version":3,"file":"common.bundle.33a2ded2831a9b0e3d8a.js","mappings":";o8FACA,IAAAA,EAAAC,EAAAC,EAAA,mBAAAC,OAAAA,OAAA,GAAAC,EAAAF,EAAAG,UAAA,aAAAC,EAAAJ,EAAAK,aAAA,yBAAAC,EAAAN,EAAAE,EAAAE,EAAAE,GAAA,IAAAC,EAAAL,GAAAA,EAAAM,qBAAAC,EAAAP,EAAAO,EAAAC,EAAAC,OAAAC,OAAAL,EAAAC,WAAA,OAAAK,EAAAH,EAAA,mBAAAV,EAAAE,EAAAE,GAAA,IAAAE,EAAAC,EAAAG,EAAAI,EAAA,EAAAC,EAAAX,GAAA,GAAAY,GAAA,EAAAC,EAAA,CAAAF,EAAA,EAAAb,EAAA,EAAAgB,EAAApB,EAAAqB,EAAAC,EAAAN,EAAAM,EAAAC,KAAAvB,EAAA,GAAAsB,EAAA,SAAArB,EAAAC,GAAA,OAAAM,EAAAP,EAAAQ,EAAA,EAAAG,EAAAZ,EAAAmB,EAAAf,EAAAF,EAAAmB,CAAA,YAAAC,EAAApB,EAAAE,GAAA,IAAAK,EAAAP,EAAAU,EAAAR,EAAAH,EAAA,GAAAiB,GAAAF,IAAAV,GAAAL,EAAAgB,EAAAO,OAAAvB,IAAA,KAAAK,EAAAE,EAAAS,EAAAhB,GAAAqB,EAAAH,EAAAF,EAAAQ,EAAAjB,EAAA,GAAAN,EAAA,GAAAI,EAAAmB,IAAArB,KAAAQ,EAAAJ,GAAAC,EAAAD,EAAA,OAAAC,EAAA,MAAAD,EAAA,GAAAA,EAAA,GAAAR,GAAAQ,EAAA,IAAAc,KAAAhB,EAAAJ,EAAA,GAAAoB,EAAAd,EAAA,KAAAC,EAAA,EAAAU,EAAAC,EAAAhB,EAAAe,EAAAf,EAAAI,EAAA,IAAAc,EAAAG,IAAAnB,EAAAJ,EAAA,GAAAM,EAAA,GAAAJ,GAAAA,EAAAqB,KAAAjB,EAAA,GAAAN,EAAAM,EAAA,GAAAJ,EAAAe,EAAAf,EAAAqB,EAAAhB,EAAA,OAAAH,GAAAJ,EAAA,SAAAmB,EAAA,MAAAH,GAAA,EAAAd,CAAA,iBAAAE,EAAAW,EAAAQ,GAAA,GAAAT,EAAA,QAAAU,UAAA,oCAAAR,GAAA,IAAAD,GAAAK,EAAAL,EAAAQ,GAAAhB,EAAAQ,EAAAL,EAAAa,GAAAxB,EAAAQ,EAAA,EAAAT,EAAAY,KAAAM,GAAA,CAAAV,IAAAC,EAAAA,EAAA,GAAAA,EAAA,IAAAU,EAAAf,GAAA,GAAAkB,EAAAb,EAAAG,IAAAO,EAAAf,EAAAQ,EAAAO,EAAAC,EAAAR,GAAA,OAAAI,EAAA,EAAAR,EAAA,IAAAC,IAAAH,EAAA,QAAAL,EAAAO,EAAAF,GAAA,MAAAL,EAAAA,EAAA0B,KAAAnB,EAAAI,IAAA,MAAAc,UAAA,wCAAAzB,EAAA2B,KAAA,OAAA3B,EAAAW,EAAAX,EAAA4B,MAAApB,EAAA,IAAAA,EAAA,YAAAA,IAAAR,EAAAO,EAAA,SAAAP,EAAA0B,KAAAnB,GAAAC,EAAA,IAAAG,EAAAc,UAAA,oCAAApB,EAAA,YAAAG,EAAA,GAAAD,EAAAR,CAAA,UAAAC,GAAAiB,EAAAC,EAAAf,EAAA,GAAAQ,EAAAV,EAAAyB,KAAAvB,EAAAe,MAAAE,EAAA,YAAApB,GAAAO,EAAAR,EAAAS,EAAA,EAAAG,EAAAX,CAAA,SAAAe,EAAA,UAAAa,MAAA5B,EAAA2B,KAAAV,EAAA,GAAAhB,EAAAI,EAAAE,IAAA,GAAAI,CAAA,KAAAS,EAAA,YAAAV,IAAA,UAAAmB,IAAA,UAAAC,IAAA,CAAA9B,EAAAY,OAAAmB,eAAA,IAAAvB,EAAA,GAAAL,GAAAH,EAAAA,EAAA,GAAAG,QAAAW,EAAAd,EAAA,GAAAG,EAAA,yBAAAH,GAAAW,EAAAmB,EAAArB,UAAAC,EAAAD,UAAAG,OAAAC,OAAAL,GAAA,SAAAO,EAAAhB,GAAA,OAAAa,OAAAoB,eAAApB,OAAAoB,eAAAjC,EAAA+B,IAAA/B,EAAAkC,UAAAH,EAAAhB,EAAAf,EAAAM,EAAA,sBAAAN,EAAAU,UAAAG,OAAAC,OAAAF,GAAAZ,CAAA,QAAA8B,EAAApB,UAAAqB,EAAAhB,EAAAH,EAAA,cAAAmB,GAAAhB,EAAAgB,EAAA,cAAAD,GAAAA,EAAAK,YAAA,oBAAApB,EAAAgB,EAAAzB,EAAA,qBAAAS,EAAAH,GAAAG,EAAAH,EAAAN,EAAA,aAAAS,EAAAH,EAAAR,EAAA,yBAAAW,EAAAH,EAAA,oDAAAwB,EAAA,kBAAAC,EAAA7B,EAAA8B,EAAAtB,EAAA,cAAAD,EAAAf,EAAAE,EAAAE,EAAAH,GAAA,IAAAO,EAAAK,OAAA0B,eAAA,IAAA/B,EAAA,gBAAAR,GAAAQ,EAAA,EAAAO,EAAA,SAAAf,EAAAE,EAAAE,EAAAH,GAAA,SAAAK,EAAAJ,EAAAE,GAAAW,EAAAf,EAAAE,EAAA,SAAAF,GAAA,YAAAwC,QAAAtC,EAAAE,EAAAJ,EAAA,GAAAE,EAAAM,EAAAA,EAAAR,EAAAE,EAAA,CAAA2B,MAAAzB,EAAAqC,YAAAxC,EAAAyC,cAAAzC,EAAA0C,UAAA1C,IAAAD,EAAAE,GAAAE,GAAAE,EAAA,UAAAA,EAAA,WAAAA,EAAA,cAAAS,EAAAf,EAAAE,EAAAE,EAAAH,EAAA,UAAA2C,EAAA5C,EAAAsB,GAAA,KAAAF,EAAApB,EAAA,KAAA6C,EAAAvB,CAAA,UAAAwB,EAAA5C,EAAAF,GAAA,gBAAAE,GAAA,GAAA6C,MAAAC,QAAA9C,GAAA,OAAAA,CAAA,CAAA+C,CAAA/C,IAAA,SAAAA,EAAAuB,GAAA,IAAAxB,EAAA,MAAAC,EAAA,yBAAAC,QAAAD,EAAAC,OAAAE,WAAAH,EAAA,uBAAAD,EAAA,KAAAD,EAAAI,EAAAI,EAAAI,EAAAS,EAAA,GAAAL,GAAA,EAAAV,GAAA,SAAAE,GAAAP,EAAAA,EAAA0B,KAAAzB,IAAAgD,KAAA,IAAAzB,EAAA,IAAAZ,OAAAZ,KAAAA,EAAA,OAAAe,GAAA,cAAAA,GAAAhB,EAAAQ,EAAAmB,KAAA1B,IAAA2B,QAAAP,EAAA8B,KAAAnD,EAAA6B,OAAAR,EAAAG,SAAAC,GAAAT,GAAA,UAAAd,GAAAI,GAAA,EAAAF,EAAAF,CAAA,iBAAAc,GAAA,MAAAf,EAAA,SAAAW,EAAAX,EAAA,SAAAY,OAAAD,KAAAA,GAAA,kBAAAN,EAAA,MAAAF,CAAA,SAAAiB,CAAA,EAAA+B,CAAAlD,EAAAF,IAAAqD,EAAAnD,EAAAF,IAAA,qBAAA0B,UAAA,6IAAA4B,EAAA,UAAAC,EAAArD,GAAA,gBAAAA,GAAA,GAAA6C,MAAAC,QAAA9C,GAAA,OAAAsD,EAAAtD,EAAA,CAAAuD,CAAAvD,IAAA,SAAAA,GAAA,uBAAAC,QAAA,MAAAD,EAAAC,OAAAE,WAAA,MAAAH,EAAA,qBAAA6C,MAAAW,KAAAxD,EAAA,CAAAyD,CAAAzD,IAAAmD,EAAAnD,IAAA,qBAAAwB,UAAA,wIAAAkC,EAAA,UAAAP,EAAAnD,EAAAmB,GAAA,GAAAnB,EAAA,qBAAAA,EAAA,OAAAsD,EAAAtD,EAAAmB,GAAA,IAAApB,EAAA,GAAA4D,SAAAlC,KAAAzB,GAAA4D,MAAA,uBAAA7D,GAAAC,EAAA6D,cAAA9D,EAAAC,EAAA6D,YAAAC,MAAA,QAAA/D,GAAA,QAAAA,EAAA8C,MAAAW,KAAAxD,GAAA,cAAAD,GAAA,2CAAAgE,KAAAhE,GAAAuD,EAAAtD,EAAAmB,QAAA,YAAAmC,EAAAtD,EAAAmB,IAAA,MAAAA,GAAAA,EAAAnB,EAAAsB,UAAAH,EAAAnB,EAAAsB,QAAA,QAAAxB,EAAA,EAAAI,EAAA2C,MAAA1B,GAAArB,EAAAqB,EAAArB,IAAAI,EAAAJ,GAAAE,EAAAF,GAAA,OAAAI,CAAA,UAAA8D,EAAA9D,EAAAH,EAAAD,EAAAE,EAAAI,EAAAe,EAAAZ,GAAA,QAAAD,EAAAJ,EAAAiB,GAAAZ,GAAAG,EAAAJ,EAAAqB,KAAA,OAAAzB,GAAA,YAAAJ,EAAAI,EAAA,CAAAI,EAAAoB,KAAA3B,EAAAW,GAAAuD,QAAAC,QAAAxD,GAAAyD,KAAAnE,EAAAI,EAAA,UAAAgE,EAAAlE,GAAA,sBAAAH,EAAA,KAAAD,EAAAuE,UAAA,WAAAJ,QAAA,SAAAjE,EAAAI,GAAA,IAAAe,EAAAjB,EAAAoE,MAAAvE,EAAAD,GAAA,SAAAyE,EAAArE,GAAA8D,EAAA7C,EAAAnB,EAAAI,EAAAmE,EAAAC,EAAA,OAAAtE,EAAA,UAAAsE,EAAAtE,GAAA8D,EAAA7C,EAAAnB,EAAAI,EAAAmE,EAAAC,EAAA,QAAAtE,EAAA,CAAAqE,OAAA,MAEA,IAAME,EAA8B,8BAC9BC,EAAmB,mBAErBC,EAAgC,KAChCC,EAAyB,KAK7B,SAASC,IACP,OAAID,GAA0BA,EAAuBE,OAC5CF,EAAuBE,OAGR,oBAAfC,YACPA,WAAWC,QACXD,WAAWC,OAAOF,OAEXC,WAAWC,OAAOF,OAEL,oBAAXG,QAA0BA,OAAOD,QAAUC,OAAOD,OAAOF,OAC3DG,OAAOD,OAAOF,YAED,IAAXI,EAAAA,GAA0BA,EAAAA,EAAOF,QAAUE,EAAAA,EAAOF,OAAOF,OAC3DI,EAAAA,EAAOF,OAAOF,OAED,oBAAXE,QAA0BA,OAAOF,OACnCE,OAAOF,OAGT,IACT,CAMA,SAASK,EAAkBC,GACzBR,EAAyBQ,GAAkB,IAC7C,CAEA,SAGeC,EAAaC,GAAA,OAAAC,EAAAjB,MAAC,KAADD,UAAA,CAmB5B,SAAAkB,IAFC,OAEDA,EAAAnB,EAAAoB,IAAAC,KAnBA,SAAAC,EAA6BC,GAAY,IAAAb,EAAAc,EAAA,OAAAJ,IAAAK,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAA9C,MAAA,OACP,GAA1B8B,EAASD,IACF,CAAFiB,EAAA9C,KAAA,cACH,IAAIgD,MAAM,uCAAsC,cAAAF,EAAA9C,KAAA,EAEhC8B,EAAOmB,UAC7B,MACAN,EACA,CACE7B,KAAM,OACNoC,WAAY,UAEd,EACA,IACD,OATc,OAATN,EAASE,EAAAK,KAAAL,EAAA9C,KAAG,EAWL8B,EAAOsB,UAAU,MAAOR,GAAU,cAAAE,EAAAO,OAAA,SAAAP,EAAAK,MAAA,wBAAAL,EAAAQ,OAAA,EAAAZ,EAAA,KAChDpB,MAAA,KAAAD,UAAA,UAKckC,EAAaC,GAAA,OAAAC,EAAAnC,MAAC,KAADD,UAAA,CAiB5B,SAAAoC,IAFC,OAEDA,EAAArC,EAAAoB,IAAAC,KAjBA,SAAAiB,EAA6BC,GAAY,IAAA7B,EAAA,OAAAU,IAAAK,KAAA,SAAAe,GAAA,cAAAA,EAAAb,KAAAa,EAAA5D,MAAA,OACP,GAA1B8B,EAASD,IACF,CAAF+B,EAAA5D,KAAA,cACH,IAAIgD,MAAM,uCAAsC,cAAAY,EAAA5D,KAAA,EAE3C8B,EAAOmB,UAClB,MACAU,EACA,CACE7C,KAAM,QACNoC,WAAY,UAEd,EACA,CAAC,WACF,cAAAU,EAAAP,OAAA,SAAAO,EAAAT,MAAA,wBAAAS,EAAAN,OAAA,EAAAI,EAAA,KACFpC,MAAA,KAAAD,UAAA,CAKD,SAASwC,IACP,IAAMC,EAAS7B,OAAO8B,aAAaC,QAAQvC,GAC3C,OAAOqC,EAASG,KAAKC,MAAMJ,GAAU,IACvC,CAMA,SAASK,EAAqBvB,GAC5BX,OAAO8B,aAAaK,QAClB3C,EACAwC,KAAKI,UAAUzB,GAEnB,CAKA,SAAS0B,IACPrC,OAAO8B,aAAaQ,WAAW9C,EACjC,CAKA,SAAS+C,IACP,IAAMC,EAAWxC,OAAO8B,aAAaC,QAAQtC,GAC7C,OAAO+C,EAAWR,KAAKC,MAAMO,GAAY,IAC3C,CAMA,SAASC,EAAYD,GACnBxC,OAAO8B,aAAaK,QAAQ1C,EAAkBuC,KAAKI,UAAUI,GAC/D,CAOA,SAASE,EAAwBC,GAE/B,IAAKA,GAAaA,EAAUtG,OAAS,GAAK,IAD3B,iBAC0CyC,KAAK6D,GAC5D,MAAM,IAAI5B,MAAM,oDAElB,OAAO,IAAI6B,WAAWD,EAAUE,MAAM,OAAOC,IAAI,SAACC,GAAC,OAAKC,SAASD,EAAG,GAAG,GACzE,CAOA,SAASE,EAAsBC,GAC7B,OAAO9E,EAAI8E,GAAQJ,IAAI,SAACK,GAAC,OAAKA,EAAEzE,SAAS,IAAI0E,SAAS,EAAG,IAAI,GAAEC,KAAK,GACtE,CAQA,SAASC,EAAaC,GAKpB,IAHA,IAAIC,EAAW,6DACXC,EAAe,GACfC,EAAe,GACVrI,EAAI,EAAGA,EAAIkI,EAAElH,OAAQhB,IAAK,CACjC,IAAgC,IAA5BmI,EAASG,QAAQJ,EAAElI,IACrB,MAAM,IAAI0F,MAAM,yBAAD6C,OAA0BL,EAAElI,GAAE,6BAE/C,IAAIwI,EAAQL,EAASG,QAAQJ,EAAElI,IAKlB,GAATwI,GAAcxI,IAAMqI,EAAarH,QACnCqH,EAAa1F,KAAK,GAIpB,IADA,IAAI8F,EAAI,EACDA,EAAIL,EAAapH,QAAUwH,EAAQ,GAAG,CAC3C,IAAIE,EAAcN,EAAaK,GAW/BD,GANEE,OADkBC,IAAhBD,EACYF,EAEc,GAAdE,EAAmBF,IAIZ,EAEvBJ,EAAaK,GAAKC,EAAc,IAChCD,GACF,CACF,CAEA,IAAIG,EAASP,EAAaE,OAAOH,EAAaS,WAC9C,OAAO,IAAItB,WAAWqB,EACxB,CAEA,SAQeE,EAAiBC,GAAA,OAAAC,EAAAhF,MAAC,KAADD,UAAA,CAkChC,SAAAiF,IAFC,OAEDA,EAAAlF,EAAAoB,IAAAC,KAlCA,SAAA8D,EAAiCf,GAAC,IAAAgB,EAAAC,EAAAC,EAAA5E,EAAA6E,EAAAC,EAAAC,EAAAC,EAAAC,EAAAzJ,EAAA,OAAAkF,IAAAK,KAAA,SAAAmE,GAAA,cAAAA,EAAAjE,KAAAiE,EAAAhH,MAAA,OACD,MAAzBwG,EAAUjB,EAAaC,IAEjBlH,OAAS,GAAC,CAAA0I,EAAAhH,KAAA,cACd,IAAIgD,MAAM,8DAAD6C,OACiDW,EAAQlI,SACvE,OAM6B,GAH1BmI,EAAUD,EAAQS,SAAS,EAAGT,EAAQlI,OAAS,GAC/CoI,EAAWF,EAAQS,SAAST,EAAQlI,OAAS,GAE7CwD,EAASD,IACF,CAAFmF,EAAAhH,KAAA,cACH,IAAIgD,MAAM,uCAAsC,cAAAgE,EAAAhH,KAAA,GAIjC8B,EAAOoF,OAAO,UAAWT,GAAQ,QAClB,OADhCE,EAAQK,EAAA7D,KACRyD,EAAQ,IAAI/B,WAAW8B,GAASK,EAAAhH,KAAA,GACf8B,EAAOoF,OAAO,UAAWN,GAAM,QAAhDC,EAAQG,EAAA7D,KACR2D,EAAQ,IAAIjC,WAAWgC,GACvBE,EAAmBD,EAAMG,SAAS,EAAG,GAGlC3J,EAAI,EAAC,aAAEA,EAAI,GAAC,CAAA0J,EAAAhH,KAAA,YACf0G,EAASpJ,KAAOyJ,EAAiBzJ,GAAE,CAAA0J,EAAAhH,KAAA,eAC/B,IAAIgD,MAAM,gCAA+B,QAF5B1F,IAAG0J,EAAAhH,KAAA,wBAAAgH,EAAA3D,OAAA,SAMnBoD,GAAO,yBAAAO,EAAA1D,OAAA,EAAAiD,EAAA,KACfjF,MAAA,KAAAD,UAAA,UAUc8F,EAASC,EAAAC,GAAA,OAAAC,EAAAhG,MAAC,KAADD,UAAA,UAAAiG,IA+EvB,OA/EuBA,EAAAlG,EAAAoB,IAAAC,KAAxB,SAAA8E,EAAyBC,EAAYC,GAAS,IAAAC,EAAAjB,EAAAkB,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAA,OAAA1F,IAAAK,KAAA,SAAAsF,GAAA,cAAAA,EAAApF,KAAAoF,EAAAnI,MAAA,OAAAmI,EAAAC,GACpCX,EAASU,EAAAnI,KACV,WADUmI,EAAAC,GACF,EASR,gBATQD,EAAAC,GASK,EAKb,wBALaD,EAAAC,IAMb,wBADqBD,EAAAC,GAAA,GA0BrB,eAzBqBD,EAAAC,GAyBT,mBAvCiC,GACjB,MADzBV,EAAkBnC,EAAaiC,IACjBlJ,OAAa,CAAA6J,EAAAnI,KAAA,cACzB,IAAIgD,MAAM,8CAAD6C,OACiC6B,EAAgBpJ,SAAQ,MACvE,cAAA6J,EAAA9E,OAAA,SAEIqE,EAAgBT,SAAS,EAAG,KAAG,WAGlCO,EAAWa,WAAW,MAAO,CAAFF,EAAAnI,KAAA,eAAAmI,EAAA9E,OAAA,SACtBsB,EAAwB6C,EAAW5G,MAAM,KAAG,OA8DA,eAAAuH,EAAA9E,OAAA,SAE9CsB,EAAwB6C,IA9DW,eAAAW,EAAAnI,KAAA,GAGpBoG,EAAkBoB,GAAW,QAKnD,GALMf,EAAO0B,EAAAhF,KAEPwE,EAAUlB,EAAQ,GAClBmB,EAAcnB,EAAQQ,SAAS,GAGrB,MAAZU,GAAgC,MAAZA,EAAgB,CAAAQ,EAAAnI,KAAA,eAChC,IAAIgD,MAAM,6BAAD6C,OACgB8B,EAAO,iDACrC,WAGwB,KAAvBC,EAAYtJ,OAAa,CAAA6J,EAAAnI,KAAA,eACrB,IAAIgD,MACR,mEACD,WAGwB,KAAvB4E,EAAYtJ,QAAqC,IAApBsJ,EAAY,IAAY,CAAAO,EAAAnI,KAAA,gBAAAmI,EAAA9E,OAAA,SAChDuE,EAAYX,SAAS,EAAG,KAAG,cAG9B,IAAIjE,MAAM,8BAA6B,QAGxB,GAHwB6E,EAGnBS,EAAAA,EAAOC,OAAOf,GAAhCM,EAAMD,EAANC,OAAQC,EAAKF,EAALE,MAED,eAAXD,EAAuB,CAAAK,EAAAnI,KAAA,eACnB,IAAIgD,MAAM,4EAEf,QAGkC,GAChB,MADfgF,EAAQM,EAAAA,EAAOE,UAAUT,IACrBzJ,OAAa,CAAA6J,EAAAnI,KAAA,eACf,IAAIgD,MAAM,0DAAD6C,OAC6CmC,EAAM1J,SACjE,QAMH,GAHM2J,EAAaD,EAAM,GACnBE,EAAUF,EAAMpH,MAAM,GAGT,IAAfqH,EAAgB,CAAAE,EAAAnI,KAAA,eACZ,IAAIgD,MAAM,0GAEf,eAAAmF,EAAA9E,OAAA,SAGI,IAAIwB,WAAWqD,IAAQ,QAK5B,GAFFO,QAAQC,KAAK,uBAAD7C,OACa4B,EAAS,kCAE9BD,EAAWa,WAAW,MAAO,CAAFF,EAAAnI,KAAA,gBAAAmI,EAAA9E,OAAA,SACtBsB,EAAwB6C,EAAW5G,MAAM,KAER,yBAAAuH,EAAA7E,OAAA,EAAAiE,EAAA,KAE/CjG,MAAA,KAAAD,UAAA,CAED,SAASsH,EAAiCC,GACxCjH,EAAgCiH,CAClC,CAKA,SAASC,EAAiBC,EAAWC,GACnC,IAAMC,EAAgBD,EAAeD,EAAUxK,OAG/C,GAAI0K,EAAgB,EAAG,CACrB,IAAMC,EAAU,IAAIpE,WAAWmE,GAAeE,KAAK,GACnD,OAAO,IAAIrE,WAAW,GAADgB,OAAAxF,EAAK4I,GAAO5I,EAAKyI,IACxC,CAGA,GAAIE,EAAgB,EAAG,CAGrB,IAFA,IAAMG,GAAqC,EAAjBH,EACtBI,EAAY,EACP9L,EAAI,EAAGA,EAAI6L,GAAqB7L,EAAIwL,EAAUxK,OAAQhB,IACxC,IAAjBwL,EAAUxL,IACZ8L,IAIJ,GAAIA,IAAcD,EAChB,MAAM,IAAInG,MAAM,iEAAD6C,OACoDsD,EAAiB,aAAAtD,OAAYuD,EAAS,MAG3G,OAAON,EAAUlI,MAAMuI,EAAmBA,EAAoBJ,EAChE,CACA,OAAOD,CACT,CAKA,SAASO,EAAyBC,EAAcC,GAC9C,IAAM/D,EAAI3F,MAAMW,KAAK,IAAIqE,WAAWyE,IAC9BtM,EAAI6C,MAAMW,KAAK,IAAIqE,WAAW0E,IACpC,OAAO,IAAI1E,WAAW,GAADgB,OAAKL,EAAMxI,GAClC,CAKA,SAASwM,EAAiBC,GACxB,IAAMC,EAAkB/E,EAAwB8E,GAG5CE,EAAQ,EAGZ,GAA+B,IAA3BD,EAAgBC,GAClB,MAAM,IAAI3G,MACR,8DAIJ,IAAM4G,EAAUF,IADhBC,GAEAA,IACA,IAAM3M,EAAI0M,EAAgB9I,MAAM+I,EAAOA,EAAQC,GAI/C,GAA+B,IAA3BF,EAHJC,GAASC,GAIP,MAAM,IAAI5G,MACR,8DAIJ,IAAM6G,EAAUH,IADhBC,GAEAA,IACA,IAAMnE,EAAIkE,EAAgB9I,MAAM+I,EAAOA,EAAQE,GAGzCC,EAAUjB,EAAiB7L,EAAG,IAC9B+M,EAAUlB,EAAiBrD,EAAG,IAGpC,OAAO,IAAIX,WAAW,GAADgB,OAAAxF,EAAKyJ,GAAOzJ,EAAK0J,IACxC,CAEA,SAMeC,EAAsBC,EAAAC,EAAAC,GAAA,OAAAC,EAAA9I,MAAC,KAADD,UAAA,CAuDrC,SAAA+I,IAFC,OAEDA,EAAAhJ,EAAAoB,IAAAC,KAvDA,SAAA4H,EACEC,EACAC,EACAC,GAAU,IAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAjJ,EAAA,OAAAU,IAAAK,KAAA,SAAAmI,GAAA,cAAAA,EAAAjI,KAAAiI,EAAAhL,MAAA,OAa6B,GAVjCyK,EAA2B,CAC/BQ,KAAM,qIACNC,QACE,sIAGER,EACe,oBAAXzI,QAA0BA,OAAOkJ,gCACzC,sCAG+ClF,KAF3C0E,EACJF,EAAyBC,IAC+B,CAAAM,EAAAhL,KAAA,cAClD,IAAIgD,MACR,8EACD,WAICsH,EAAqB,CAAFU,EAAAhL,KAAA,WACjBsK,IAAwBK,EAAwC,CAAAK,EAAAhL,KAAA,cAC5D,IAAIgD,MAAM,2EAAD6C,OAC8D8E,EAAwC,cAAA9E,OAAayE,EAAmB,MACpJ,OAMJ,OAFKM,EAA4B,IAAI/F,WACpCF,EAAwBgG,IACzBK,EAAAhL,KAAA,GACuBuD,EAAcqH,GAA0B,QAAjD,GAATC,EAASG,EAAA7H,KACC,CAAF6H,EAAAhL,KAAA,eACN,IAAIgD,MAAM,6BAA4B,QAMd,GAF1B8H,EAAqBtB,EAAiBe,GACtCQ,EAAgBpG,EAAwB6F,GACxC1I,EAASD,IACF,CAAFmJ,EAAAhL,KAAA,eACH,IAAIgD,MAAM,uCAAsC,eAAAgI,EAAAhL,KAAA,GAE3C8B,EAAOsJ,OAClB,CAAEtK,KAAM,QAASuK,KAAM,WACvBR,EACAC,EACAC,GACD,eAAAC,EAAA3H,OAAA,SAAA2H,EAAA7H,MAAA,yBAAA6H,EAAA1H,OAAA,EAAA+G,EAAA,KACF/I,MAAA,KAAAD,UAAA,CAQD,SAASiK,EAAeC,EAAQC,GAC9B,IAAMC,EAAc,CAAC,EAEfC,EAAqB,CACzBzC,QAAS,+BACT0C,OAAQ,+BACRC,YAAa,6BACbC,YACE,gEACFC,YACE,iLACFC,aAAc,+BACdC,SAAU,6DACVC,WAAY,wCACZC,WAAY,aACZC,MACE,iLACFC,WACE,iLACFC,gBACE,iLACFC,MAAO,kEACPC,OAAQ,kEACRC,SAAU,kEACVC,UACE,kEACFC,WACE,8EACFC,UACE,8HACFC,UAAW,gDACXC,aAAc,iCACdC,SAAU,wBACVC,OAAQ,kDA4BV,OAzBApP,OAAOqP,QAAQzB,GAAQ0B,QAAQ,SAAAC,GAAuB,IAAAC,EAAAvN,EAAAsN,EAAA,GAArBE,EAAQD,EAAA,GAAExO,EAAKwO,EAAA,GACxCE,EAAgBD,EAASE,OAC/B,GAA6B,IAAzBD,EAAc/O,OAChB,MAAM,IAAI0E,MAAM,sCAElB,IAAMuK,EAAgB7B,EAAmB2B,GACzC,IAAKE,EACH,MAAM,IAAIvK,MAAM,+CAAD6C,OACkCwH,EAAa,MAGhE,IAAMG,EAAa,IAAIC,OAAOF,GACxBG,EAAa/O,EAAM2O,OACzB,GAAyB,GAArBI,EAAWpP,OACb,MAAM,IAAI0E,MAAM,kBAAD6C,OAAmBwH,EAAa,eAGjD,IADqBG,EAAWzM,KAAK2M,GAEnC,MAAM,IAAI1K,MAAM,yCAAD6C,OAC4BwH,EAAa,MAG1D5B,EAAY4B,GAAiBK,CAC/B,GAEOjC,CACT,CAQA,SAASkC,EAAclJ,GACrB,IAAMmJ,EAAgB,CAAC,EACjBC,EAAc5J,KAAKC,MAAMO,GAEzBqJ,EAAkBC,SAASC,eAAe,oBAC1CC,EAAgBF,SAASC,eAAe,kBACxCE,EAAqBH,SAASC,eAAe,cAEnD,IAAKF,IAAoBI,EACvB,MAAM,IAAIlL,MAAM,2DAElB,IAAMmL,EAAoBJ,SAASC,eAAe,aAClD,IAAKG,EACH,MAAM,IAAInL,MACR,kEAyBJ,IApBqC,IAAjC6K,EAAYO,kBACdN,EAAgBO,MAAMC,QAAU,eAChCJ,EAAmBG,MAAMC,QAAU,eACnCJ,EAAmBG,MAAME,OAAS,iBAClCL,EAAmBG,MAAMtC,aAAe,MAExCkC,EAAcI,MAAMC,QAAU,eAC9BH,EAAkBE,MAAME,OAAS,iBACjCJ,EAAkBE,MAAMtC,aAAe,MAEvC6B,EAAgC,kBAAI,IAEpCE,EAAgBO,MAAMC,QAAU,OAChCJ,EAAmBG,MAAMC,QAAU,OACnCL,EAAcI,MAAMC,QAAU,OAE9BH,EAAkBE,MAAME,OAAS,OACjCX,EAAgC,kBAAI,GAGlCC,EAAYtC,OAAQ,CAEtB,IAAME,EAAcH,EAAeuC,EAAYtC,QAC/C5N,OAAOqP,QAAQvB,GAAawB,QAAQ,SAAAuB,GAAkB,IAAAC,EAAA7O,EAAA4O,EAAA,GAAhBE,EAAGD,EAAA,GAAE9P,EAAK8P,EAAA,GAC9CN,EAAkBE,MAAMK,GAAO/P,CACjC,GAEI8M,EAAYY,kBAEd0B,SAASY,gBAAgBN,MAAMhC,gBAC7BZ,EAAYY,gBACd0B,SAASa,KAAKP,MAAMhC,gBAAkBZ,EAAYY,iBAGhDZ,EAAYW,aACd2B,SAASC,eAAe,kBAAkBK,MAAMlC,MAC9CV,EAAYW,YAGhBwB,EAAsB,OAAInC,CAC5B,CAEA,GAAIoC,EAAYgB,iBAAkB,CAEhC,IAAMpD,EAAcH,EAAeuC,EAAYgB,kBAC/ClR,OAAOqP,QAAQvB,GAAawB,QAAQ,SAAA6B,GAAkB,IAAAC,EAAAnP,EAAAkP,EAAA,GAAhBJ,EAAGK,EAAA,GAAEpQ,EAAKoQ,EAAA,GAC9Cb,EAAmBG,MAAMK,GAAO/P,CAClC,GAEI8M,EAAYW,aACd2B,SAASC,eAAe,oBAAoBK,MAAMlC,MAChDV,EAAYW,YAGhBwB,EAAgC,iBAAInC,CACtC,CAEA,OAAOxH,KAAKI,UAAUuJ,EACxB,CAeA,SAASoB,EAAcC,EAAMtQ,EAAOuQ,GAClC,IAAMC,EAAU,CACdF,KAAMA,EACNtQ,MAAOA,GAILuQ,IACFC,EAAQD,UAAYA,GAGlBvN,EACFA,EAA8ByN,YAAYD,GACjClN,OAAOoN,SAAWpN,QAC3BA,OAAOoN,OAAOD,YACZ,CACEH,KAAMA,EACNtQ,MAAOA,GAET,IAGN,C","sources":["webpack://import/./src/turnkey-core.js"],"sourcesContent":["import { bech32 } from \"bech32\";\n\n/** constants for LocalStorage */\nconst TURNKEY_TARGET_EMBEDDED_KEY = \"TURNKEY_TARGET_EMBEDDED_KEY\";\nconst TURNKEY_SETTINGS = \"TURNKEY_SETTINGS\";\n\nvar parentFrameMessageChannelPort = null;\nvar cryptoProviderOverride = null;\n\n/*\n * Returns a reference to the WebCrypto subtle interface regardless of the host environment.\n */\nfunction getSubtleCrypto() {\n  if (cryptoProviderOverride && cryptoProviderOverride.subtle) {\n    return cryptoProviderOverride.subtle;\n  }\n  if (\n    typeof globalThis !== \"undefined\" &&\n    globalThis.crypto &&\n    globalThis.crypto.subtle\n  ) {\n    return globalThis.crypto.subtle;\n  }\n  if (typeof window !== \"undefined\" && window.crypto && window.crypto.subtle) {\n    return window.crypto.subtle;\n  }\n  if (typeof global !== \"undefined\" && global.crypto && global.crypto.subtle) {\n    return global.crypto.subtle;\n  }\n  if (typeof crypto !== \"undefined\" && crypto.subtle) {\n    return crypto.subtle;\n  }\n\n  return null;\n}\n\n/*\n * Allows tests to explicitly set the crypto provider (e.g. crypto.webcrypto) when the runtime\n * environment does not expose one on the global/window objects.\n */\nfunction setCryptoProvider(cryptoProvider) {\n  cryptoProviderOverride = cryptoProvider || null;\n}\n\n/*\n * Load a key to encrypt to as a CryptoKey and return it as a JSON Web Key.\n */\nasync function loadTargetKey(targetPublic) {\n  const subtle = getSubtleCrypto();\n  if (!subtle) {\n    throw new Error(\"WebCrypto subtle API is unavailable\");\n  }\n  const targetKey = await subtle.importKey(\n    \"raw\",\n    targetPublic,\n    {\n      name: \"ECDH\",\n      namedCurve: \"P-256\",\n    },\n    true,\n    []\n  );\n\n  return await subtle.exportKey(\"jwk\", targetKey);\n}\n\n/*\n * Loads the quorum public key as a CryptoKey.\n */\nasync function loadQuorumKey(quorumPublic) {\n  const subtle = getSubtleCrypto();\n  if (!subtle) {\n    throw new Error(\"WebCrypto subtle API is unavailable\");\n  }\n  return await subtle.importKey(\n    \"raw\",\n    quorumPublic,\n    {\n      name: \"ECDSA\",\n      namedCurve: \"P-256\",\n    },\n    true,\n    [\"verify\"]\n  );\n}\n\n/**\n * Gets the current target embedded private key JWK. Returns `null` if not found.\n */\nfunction getTargetEmbeddedKey() {\n  const jwtKey = window.localStorage.getItem(TURNKEY_TARGET_EMBEDDED_KEY);\n  return jwtKey ? JSON.parse(jwtKey) : null;\n}\n\n/**\n * Sets the target embedded public key JWK.\n * @param {JsonWebKey} targetKey\n */\nfunction setTargetEmbeddedKey(targetKey) {\n  window.localStorage.setItem(\n    TURNKEY_TARGET_EMBEDDED_KEY,\n    JSON.stringify(targetKey)\n  );\n}\n\n/**\n * Resets the current target embedded private key JWK.\n */\nfunction resetTargetEmbeddedKey() {\n  window.localStorage.removeItem(TURNKEY_TARGET_EMBEDDED_KEY);\n}\n\n/**\n * Gets the current settings.\n */\nfunction getSettings() {\n  const settings = window.localStorage.getItem(TURNKEY_SETTINGS);\n  return settings ? JSON.parse(settings) : null;\n}\n\n/**\n * Sets the settings object.\n * @param {Object} settings\n */\nfunction setSettings(settings) {\n  window.localStorage.setItem(TURNKEY_SETTINGS, JSON.stringify(settings));\n}\n\n/**\n * Takes a hex string (e.g. \"e4567ab\") and returns an array buffer (Uint8Array)\n * @param {string} hexString\n * @returns {Uint8Array}\n */\nfunction uint8arrayFromHexString(hexString) {\n  var hexRegex = /^[0-9A-Fa-f]+$/;\n  if (!hexString || hexString.length % 2 != 0 || !hexRegex.test(hexString)) {\n    throw new Error(\"cannot create uint8array from invalid hex string\");\n  }\n  return new Uint8Array(hexString.match(/../g).map((h) => parseInt(h, 16)));\n}\n\n/**\n * Takes a Uint8Array and returns a hex string\n * @param {Uint8Array} buffer\n * @return {string}\n */\nfunction uint8arrayToHexString(buffer) {\n  return [...buffer].map((x) => x.toString(16).padStart(2, \"0\")).join(\"\");\n}\n\n/**\n * Decodes a base58-encoded string into a buffer\n * This function throws an error when the string contains invalid characters.\n * @param {string} s The base58-encoded string.\n * @return {Uint8Array} The decoded buffer.\n */\nfunction base58Decode(s) {\n  // See https://en.bitcoin.it/wiki/Base58Check_encoding\n  var alphabet = \"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz\";\n  var decodedBytes = [];\n  var leadingZeros = [];\n  for (var i = 0; i < s.length; i++) {\n    if (alphabet.indexOf(s[i]) === -1) {\n      throw new Error(`cannot base58-decode: ${s[i]} isn't a valid character`);\n    }\n    var carry = alphabet.indexOf(s[i]);\n\n    // If the current base58 digit is 0, append a 0 byte.\n    // \"i == leadingZeros.length\" can only be true if we have not seen non-zero bytes so far.\n    // If we had seen a non-zero byte, carry wouldn't be 0, and i would be strictly more than `leadingZeros.length`\n    if (carry == 0 && i === leadingZeros.length) {\n      leadingZeros.push(0);\n    }\n\n    var j = 0;\n    while (j < decodedBytes.length || carry > 0) {\n      var currentByte = decodedBytes[j];\n\n      // shift the current byte 58 units and add the carry amount\n      // (or just add the carry amount if this is a new byte -- undefined case)\n      if (currentByte === undefined) {\n        currentByte = carry;\n      } else {\n        currentByte = currentByte * 58 + carry;\n      }\n\n      // find the new carry amount (1-byte shift of current byte value)\n      carry = currentByte >> 8;\n      // reset the current byte to the remainder (the carry amount will pass on the overflow)\n      decodedBytes[j] = currentByte % 256;\n      j++;\n    }\n  }\n\n  var result = leadingZeros.concat(decodedBytes.reverse());\n  return new Uint8Array(result);\n}\n\n/**\n * Decodes a base58check-encoded string and verifies the checksum.\n * Base58Check encoding includes a 4-byte checksum at the end to detect errors.\n * The checksum is the first 4 bytes of SHA256(SHA256(payload)).\n * This function throws an error if the checksum is invalid.\n * @param {string} s The base58check-encoded string.\n * @return {Promise<Uint8Array>} The decoded payload (without checksum).\n */\nasync function base58CheckDecode(s) {\n  const decoded = base58Decode(s);\n\n  if (decoded.length < 5) {\n    throw new Error(\n      `invalid base58check length: expected at least 5 bytes, got ${decoded.length}`\n    );\n  }\n\n  const payload = decoded.subarray(0, decoded.length - 4);\n  const checksum = decoded.subarray(decoded.length - 4);\n\n  const subtle = getSubtleCrypto();\n  if (!subtle) {\n    throw new Error(\"WebCrypto subtle API is unavailable\");\n  }\n\n  // Compute double SHA256 hash\n  const hash1Buf = await subtle.digest(\"SHA-256\", payload);\n  const hash1 = new Uint8Array(hash1Buf);\n  const hash2Buf = await subtle.digest(\"SHA-256\", hash1);\n  const hash2 = new Uint8Array(hash2Buf);\n  const computedChecksum = hash2.subarray(0, 4);\n\n  // Verify checksum\n  for (let i = 0; i < 4; i++) {\n    if (checksum[i] !== computedChecksum[i]) {\n      throw new Error(\"invalid base58check checksum\");\n    }\n  }\n\n  return payload;\n}\n\n/**\n * Returns private key bytes from a private key, represented in\n * the encoding and format specified by `keyFormat`. Defaults to\n * hex-encoding if `keyFormat` isn't passed.\n * @param {string} privateKey\n * @param {string} keyFormat Can be \"HEXADECIMAL\", \"SUI_BECH32\", \"BITCOIN_MAINNET_WIF\", \"BITCOIN_TESTNET_WIF\" or \"SOLANA\"\n * @return {Promise<Uint8Array>}\n */\nasync function decodeKey(privateKey, keyFormat) {\n  switch (keyFormat) {\n    case \"SOLANA\": {\n      const decodedKeyBytes = base58Decode(privateKey);\n      if (decodedKeyBytes.length !== 64) {\n        throw new Error(\n          `invalid key length. Expected 64 bytes. Got ${decodedKeyBytes.length()}.`\n        );\n      }\n      return decodedKeyBytes.subarray(0, 32);\n    }\n    case \"HEXADECIMAL\":\n      if (privateKey.startsWith(\"0x\")) {\n        return uint8arrayFromHexString(privateKey.slice(2));\n      }\n      return uint8arrayFromHexString(privateKey);\n    case \"BITCOIN_MAINNET_WIF\":\n    case \"BITCOIN_TESTNET_WIF\": {\n      const payload = await base58CheckDecode(privateKey);\n\n      const version = payload[0];\n      const keyAndFlags = payload.subarray(1);\n\n      // 0x80 = mainnet, 0xEF = testnet\n      if (version !== 0x80 && version !== 0xef) {\n        throw new Error(\n          `invalid WIF version byte: ${version}. Expected 0x80 (mainnet) or 0xEF (testnet).`\n        );\n      }\n\n      if (keyAndFlags.length === 32) {\n        throw new Error(\n          \"uncompressed WIF not supported; please use a compressed WIF key\"\n        );\n      }\n\n      if (keyAndFlags.length === 33 && keyAndFlags[32] === 0x01) {\n        return keyAndFlags.subarray(0, 32);\n      }\n\n      throw new Error(\"invalid WIF payload format\");\n    }\n    case \"SUI_BECH32\": {\n      const { prefix, words } = bech32.decode(privateKey);\n\n      if (prefix !== \"suiprivkey\") {\n        throw new Error(\n          `invalid SUI private key human-readable part (HRP): expected \"suiprivkey\"`\n        );\n      }\n\n      const bytes = bech32.fromWords(words);\n      if (bytes.length !== 33) {\n        throw new Error(\n          `invalid SUI private key length: expected 33 bytes, got ${bytes.length}`\n        );\n      }\n\n      const schemeFlag = bytes[0];\n      const privkey = bytes.slice(1);\n\n      // schemeFlag = 0 is Ed25519; We currently only support Ed25519 keys for SUI.\n      if (schemeFlag !== 0) {\n        throw new Error(\n          `invalid SUI private key scheme flag: expected 0 (Ed25519). Turnkey only supports Ed25519 keys for SUI.`\n        );\n      }\n\n      return new Uint8Array(privkey);\n    }\n    default:\n      console.warn(\n        `invalid key format: ${keyFormat}. Defaulting to HEXADECIMAL.`\n      );\n      if (privateKey.startsWith(\"0x\")) {\n        return uint8arrayFromHexString(privateKey.slice(2));\n      }\n      return uint8arrayFromHexString(privateKey);\n  }\n}\n\nfunction setParentFrameMessageChannelPort(port) {\n  parentFrameMessageChannelPort = port;\n}\n\n/**\n * Function to normalize padding of byte array with 0's to a target length\n */\nfunction normalizePadding(byteArray, targetLength) {\n  const paddingLength = targetLength - byteArray.length;\n\n  // Add leading 0's to array\n  if (paddingLength > 0) {\n    const padding = new Uint8Array(paddingLength).fill(0);\n    return new Uint8Array([...padding, ...byteArray]);\n  }\n\n  // Remove leading 0's from array\n  if (paddingLength < 0) {\n    const expectedZeroCount = paddingLength * -1;\n    let zeroCount = 0;\n    for (let i = 0; i < expectedZeroCount && i < byteArray.length; i++) {\n      if (byteArray[i] === 0) {\n        zeroCount++;\n      }\n    }\n    // Check if the number of zeros found equals the number of zeroes expected\n    if (zeroCount !== expectedZeroCount) {\n      throw new Error(\n        `invalid number of starting zeroes. Expected number of zeroes: ${expectedZeroCount}. Found: ${zeroCount}.`\n      );\n    }\n    return byteArray.slice(expectedZeroCount, expectedZeroCount + targetLength);\n  }\n  return byteArray;\n}\n\n/**\n * Additional Associated Data (AAD) in the format dictated by the enclave_encrypt crate.\n */\nfunction additionalAssociatedData(senderPubBuf, receiverPubBuf) {\n  const s = Array.from(new Uint8Array(senderPubBuf));\n  const r = Array.from(new Uint8Array(receiverPubBuf));\n  return new Uint8Array([...s, ...r]);\n}\n\n/**\n * Converts an ASN.1 DER-encoded ECDSA signature to the raw format that WebCrypto uses.\n */\nfunction fromDerSignature(derSignature) {\n  const derSignatureBuf = uint8arrayFromHexString(derSignature);\n\n  // Check and skip the sequence tag (0x30)\n  let index = 2;\n\n  // Parse 'r' and check for integer tag (0x02)\n  if (derSignatureBuf[index] !== 0x02) {\n    throw new Error(\n      \"failed to convert DER-encoded signature: invalid tag for r\"\n    );\n  }\n  index++; // Move past the INTEGER tag\n  const rLength = derSignatureBuf[index];\n  index++; // Move past the length byte\n  const r = derSignatureBuf.slice(index, index + rLength);\n  index += rLength; // Move to the start of s\n\n  // Parse 's' and check for integer tag (0x02)\n  if (derSignatureBuf[index] !== 0x02) {\n    throw new Error(\n      \"failed to convert DER-encoded signature: invalid tag for s\"\n    );\n  }\n  index++; // Move past the INTEGER tag\n  const sLength = derSignatureBuf[index];\n  index++; // Move past the length byte\n  const s = derSignatureBuf.slice(index, index + sLength);\n\n  // Normalize 'r' and 's' to 32 bytes each\n  const rPadded = normalizePadding(r, 32);\n  const sPadded = normalizePadding(s, 32);\n\n  // Concatenate and return the raw signature\n  return new Uint8Array([...rPadded, ...sPadded]);\n}\n\n/**\n * Function to verify enclave signature on import bundle received from the server.\n * @param {string} enclaveQuorumPublic uncompressed public key for the quorum key which produced the signature\n * @param {string} publicSignature signature bytes encoded as a hexadecimal string\n * @param {string} signedData signed bytes encoded as a hexadecimal string. This could be public key bytes directly, or JSON-encoded bytes\n */\nasync function verifyEnclaveSignature(\n  enclaveQuorumPublic,\n  publicSignature,\n  signedData\n) {\n  /** Turnkey Signer enclave's public keys */\n  const TURNKEY_SIGNERS_ENCLAVES = {\n    prod: \"04cf288fe433cc4e1aa0ce1632feac4ea26bf2f5a09dcfe5a42c398e06898710330f0572882f4dbdf0f5304b8fc8703acd69adca9a4bbf7f5d00d20a5e364b2569\",\n    preprod:\n      \"04f3422b8afbe425d6ece77b8d2469954715a2ff273ab7ac89f1ed70e0a9325eaa1698b4351fd1b23734e65c0b6a86b62dd49d70b37c94606aac402cbd84353212\",\n  };\n\n  const environment =\n    (typeof window !== \"undefined\" && window.__TURNKEY_SIGNER_ENVIRONMENT__) ||\n    \"__TURNKEY_SIGNER_ENVIRONMENT__\";\n  const TURNKEY_SIGNER_ENCLAVE_QUORUM_PUBLIC_KEY =\n    TURNKEY_SIGNERS_ENCLAVES[environment];\n  if (TURNKEY_SIGNER_ENCLAVE_QUORUM_PUBLIC_KEY === undefined) {\n    throw new Error(\n      \"Configuration error: TURNKEY_SIGNER_ENCLAVE_QUORUM_PUBLIC_KEY is undefined\"\n    );\n  }\n\n  // todo(olivia): throw error if enclave quorum public is null once server changes are deployed\n  if (enclaveQuorumPublic) {\n    if (enclaveQuorumPublic !== TURNKEY_SIGNER_ENCLAVE_QUORUM_PUBLIC_KEY) {\n      throw new Error(\n        `enclave quorum public keys from client and bundle do not match. Client: ${TURNKEY_SIGNER_ENCLAVE_QUORUM_PUBLIC_KEY}. Bundle: ${enclaveQuorumPublic}.`\n      );\n    }\n  }\n\n  const encryptionQuorumPublicBuf = new Uint8Array(\n    uint8arrayFromHexString(TURNKEY_SIGNER_ENCLAVE_QUORUM_PUBLIC_KEY)\n  );\n  const quorumKey = await loadQuorumKey(encryptionQuorumPublicBuf);\n  if (!quorumKey) {\n    throw new Error(\"failed to load quorum key\");\n  }\n\n  // The ECDSA signature is ASN.1 DER encoded but WebCrypto uses raw format\n  const publicSignatureBuf = fromDerSignature(publicSignature);\n  const signedDataBuf = uint8arrayFromHexString(signedData);\n  const subtle = getSubtleCrypto();\n  if (!subtle) {\n    throw new Error(\"WebCrypto subtle API is unavailable\");\n  }\n  return await subtle.verify(\n    { name: \"ECDSA\", hash: \"SHA-256\" },\n    quorumKey,\n    publicSignatureBuf,\n    signedDataBuf\n  );\n}\n\n/**\n * Function to validate and sanitize the styles object using the accepted map of style keys and values (as regular expressions).\n * Any invalid style throws an error. Returns an object of valid styles.\n * @param {Object} styles\n * @return {Object}\n */\nfunction validateStyles(styles, element) {\n  const validStyles = {};\n\n  const cssValidationRegex = {\n    padding: \"^(\\\\d+(px|em|%|rem) ?){1,4}$\",\n    margin: \"^(\\\\d+(px|em|%|rem) ?){1,4}$\",\n    borderWidth: \"^(\\\\d+(px|em|rem) ?){1,4}$\",\n    borderStyle:\n      \"^(none|solid|dashed|dotted|double|groove|ridge|inset|outset)$\",\n    borderColor:\n      \"^(transparent|inherit|initial|#[0-9a-f]{3,8}|rgba?\\\\(\\\\d{1,3}, \\\\d{1,3}, \\\\d{1,3}(, \\\\d?(\\\\.\\\\d{1,2})?)?\\\\)|hsla?\\\\(\\\\d{1,3}, \\\\d{1,3}%, \\\\d{1,3}%(, \\\\d?(\\\\.\\\\d{1,2})?)?\\\\))$\",\n    borderRadius: \"^(\\\\d+(px|em|%|rem) ?){1,4}$\",\n    fontSize: \"^(\\\\d+(px|em|rem|%|vh|vw|in|cm|mm|pt|pc|ex|ch|vmin|vmax))$\",\n    fontWeight: \"^(normal|bold|bolder|lighter|\\\\d{3})$\",\n    fontFamily: '^[^\";<>]*$', // checks for the absence of some characters that could lead to CSS/HTML injection\n    color:\n      \"^(transparent|inherit|initial|#[0-9a-f]{3,8}|rgba?\\\\(\\\\d{1,3}, \\\\d{1,3}, \\\\d{1,3}(, \\\\d?(\\\\.\\\\d{1,2})?)?\\\\)|hsla?\\\\(\\\\d{1,3}, \\\\d{1,3}%, \\\\d{1,3}%(, \\\\d?(\\\\.\\\\d{1,2})?)?\\\\))$\",\n    labelColor:\n      \"^(transparent|inherit|initial|#[0-9a-f]{3,8}|rgba?\\\\(\\\\d{1,3}, \\\\d{1,3}, \\\\d{1,3}(, \\\\d?(\\\\.\\\\d{1,2})?)?\\\\)|hsla?\\\\(\\\\d{1,3}, \\\\d{1,3}%, \\\\d{1,3}%(, \\\\d?(\\\\.\\\\d{1,2})?)?\\\\))$\",\n    backgroundColor:\n      \"^(transparent|inherit|initial|#[0-9a-f]{3,8}|rgba?\\\\(\\\\d{1,3}, \\\\d{1,3}, \\\\d{1,3}(, \\\\d?(\\\\.\\\\d{1,2})?)?\\\\)|hsla?\\\\(\\\\d{1,3}, \\\\d{1,3}%, \\\\d{1,3}%(, \\\\d?(\\\\.\\\\d{1,2})?)?\\\\))$\",\n    width: \"^(\\\\d+(px|em|rem|%|vh|vw|in|cm|mm|pt|pc|ex|ch|vmin|vmax)|auto)$\",\n    height: \"^(\\\\d+(px|em|rem|%|vh|vw|in|cm|mm|pt|pc|ex|ch|vmin|vmax)|auto)$\",\n    maxWidth: \"^(\\\\d+(px|em|rem|%|vh|vw|in|cm|mm|pt|pc|ex|ch|vmin|vmax)|none)$\",\n    maxHeight:\n      \"^(\\\\d+(px|em|rem|%|vh|vw|in|cm|mm|pt|pc|ex|ch|vmin|vmax)|none)$\",\n    lineHeight:\n      \"^(\\\\d+(\\\\.\\\\d+)?(px|em|rem|%|vh|vw|in|cm|mm|pt|pc|ex|ch|vmin|vmax)|normal)$\",\n    boxShadow:\n      \"^(none|(\\\\d+(px|em|rem) ?){2,4} (#[0-9a-f]{3,8}|rgba?\\\\(\\\\d{1,3}, \\\\d{1,3}, \\\\d{1,3}(, \\\\d?(\\\\.\\\\d{1,2})?)?\\\\)) ?(inset)?)$\",\n    textAlign: \"^(left|right|center|justify|initial|inherit)$\",\n    overflowWrap: \"^(normal|break-word|anywhere)$\",\n    wordWrap: \"^(normal|break-word)$\",\n    resize: \"^(none|both|horizontal|vertical|block|inline)$\",\n  };\n\n  Object.entries(styles).forEach(([property, value]) => {\n    const styleProperty = property.trim();\n    if (styleProperty.length === 0) {\n      throw new Error(\"css style property cannot be empty\");\n    }\n    const styleRegexStr = cssValidationRegex[styleProperty];\n    if (!styleRegexStr) {\n      throw new Error(\n        `invalid or unsupported css style property: \"${styleProperty}\"`\n      );\n    }\n    const styleRegex = new RegExp(styleRegexStr);\n    const styleValue = value.trim();\n    if (styleValue.length == 0) {\n      throw new Error(`css style for \"${styleProperty}\" is empty`);\n    }\n    const isValidStyle = styleRegex.test(styleValue);\n    if (!isValidStyle) {\n      throw new Error(\n        `invalid css style value for property \"${styleProperty}\"`\n      );\n    }\n    validStyles[styleProperty] = styleValue;\n  });\n\n  return validStyles;\n}\n\n/**\n * Function to apply settings on this page. For now, the only settings that can be applied\n * are for \"styles\". Upon successful application, return the valid, sanitized settings JSON string.\n * @param {string} settings\n * @return {string}\n */\nfunction applySettings(settings) {\n  const validSettings = {};\n  const settingsObj = JSON.parse(settings);\n\n  const passphraseLabel = document.getElementById(\"passphrase-label\");\n  const mnemonicLabel = document.getElementById(\"mnemonic-label\");\n  const passphraseTextarea = document.getElementById(\"passphrase\");\n\n  if (!passphraseLabel || !passphraseTextarea) {\n    throw new Error(\"no passphrase HTML elements found to apply settings to.\");\n  }\n  const plaintextTextarea = document.getElementById(\"plaintext\");\n  if (!plaintextTextarea) {\n    throw new Error(\n      \"no plaintext textarea HTML element found to apply settings to.\"\n    );\n  }\n\n  // Apply enablePassphrase setting\n  if (settingsObj.enablePassphrase === true) {\n    passphraseLabel.style.display = \"inline-block\";\n    passphraseTextarea.style.display = \"inline-block\";\n    passphraseTextarea.style.border = \"solid 1px #ccc\";\n    passphraseTextarea.style.borderRadius = \"4px\";\n\n    mnemonicLabel.style.display = \"inline-block\";\n    plaintextTextarea.style.border = \"solid 1px #ccc\";\n    plaintextTextarea.style.borderRadius = \"4px\";\n\n    validSettings[\"enablePassphrase\"] = true;\n  } else {\n    passphraseLabel.style.display = \"none\";\n    passphraseTextarea.style.display = \"none\";\n    mnemonicLabel.style.display = \"none\";\n\n    plaintextTextarea.style.border = \"none\";\n    validSettings[\"enablePassphrase\"] = false;\n  }\n\n  if (settingsObj.styles) {\n    // Validate, sanitize, and apply the styles to the \"plaintext\" textarea.\n    const validStyles = validateStyles(settingsObj.styles);\n    Object.entries(validStyles).forEach(([key, value]) => {\n      plaintextTextarea.style[key] = value;\n    });\n\n    if (validStyles.backgroundColor) {\n      // Apply background color to document and body as well.\n      document.documentElement.style.backgroundColor =\n        validStyles.backgroundColor;\n      document.body.style.backgroundColor = validStyles.backgroundColor;\n    }\n\n    if (validStyles.labelColor) {\n      document.getElementById(\"mnemonic-label\").style.color =\n        validStyles.labelColor;\n    }\n\n    validSettings[\"styles\"] = validStyles;\n  }\n\n  if (settingsObj.passphraseStyles) {\n    // Validate, sanitize, and apply the styles to the \"passphrase\" textarea.\n    const validStyles = validateStyles(settingsObj.passphraseStyles);\n    Object.entries(validStyles).forEach(([key, value]) => {\n      passphraseTextarea.style[key] = value;\n    });\n\n    if (validStyles.labelColor) {\n      document.getElementById(\"passphrase-label\").style.color =\n        validStyles.labelColor;\n    }\n\n    validSettings[\"passphraseStyles\"] = validStyles;\n  }\n\n  return JSON.stringify(validSettings);\n}\n\n/**\n * Function to send a message.\n *\n * If this page is embedded as an iframe we'll send a postMessage\n * in one of two ways depending on the version of @turnkey/iframe-stamper:\n *   1. newer versions (>=v2.1.0) pass a MessageChannel MessagePort from the parent frame for postMessages.\n *   2. older versions (<v2.1.0) still use the contentWindow so we will postMessage to the window.parent for backwards compatibility.\n *\n * Otherwise we'll display it in the DOM.\n * @param type message type. Can be \"PUBLIC_KEY_CREATED\" or \"BUNDLE_INJECTED\"\n * @param value message value\n * @param requestId serves as an idempotency key to match incoming requests. Backwards compatible: if not provided, it isn't passed in.\n */\nfunction sendMessageUp(type, value, requestId) {\n  const message = {\n    type: type,\n    value: value,\n  };\n\n  // Only include requestId if it was provided\n  if (requestId) {\n    message.requestId = requestId;\n  }\n\n  if (parentFrameMessageChannelPort) {\n    parentFrameMessageChannelPort.postMessage(message);\n  } else if (window.parent !== window) {\n    window.parent.postMessage(\n      {\n        type: type,\n        value: value,\n      },\n      \"*\"\n    );\n  }\n}\n\nexport {\n  setCryptoProvider,\n  loadTargetKey,\n  getTargetEmbeddedKey,\n  setTargetEmbeddedKey,\n  resetTargetEmbeddedKey,\n  getSettings,\n  setSettings,\n  sendMessageUp,\n  uint8arrayFromHexString,\n  uint8arrayToHexString,\n  base58Decode,\n  base58CheckDecode,\n  decodeKey,\n  setParentFrameMessageChannelPort,\n  normalizePadding,\n  fromDerSignature,\n  additionalAssociatedData,\n  verifyEnclaveSignature,\n  validateStyles,\n  applySettings,\n};\n"],"names":["e","t","r","Symbol","n","iterator","o","toStringTag","i","c","prototype","Generator","u","Object","create","_regeneratorDefine2","f","p","y","G","v","a","d","bind","length","l","TypeError","call","done","value","GeneratorFunction","GeneratorFunctionPrototype","getPrototypeOf","setPrototypeOf","__proto__","displayName","_regenerator","w","m","defineProperty","_invoke","enumerable","configurable","writable","_OverloadYield","k","_slicedToArray","Array","isArray","_arrayWithHoles","next","push","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","_toConsumableArray","_arrayLikeToArray","_arrayWithoutHoles","from","_iterableToArray","_nonIterableSpread","toString","slice","constructor","name","test","asyncGeneratorStep","Promise","resolve","then","_asyncToGenerator","arguments","apply","_next","_throw","TURNKEY_TARGET_EMBEDDED_KEY","TURNKEY_SETTINGS","parentFrameMessageChannelPort","cryptoProviderOverride","getSubtleCrypto","subtle","globalThis","crypto","window","global","setCryptoProvider","cryptoProvider","loadTargetKey","_x","_loadTargetKey","_regeneratorRuntime","mark","_callee","targetPublic","targetKey","wrap","_context","prev","Error","importKey","namedCurve","sent","exportKey","abrupt","stop","loadQuorumKey","_x2","_loadQuorumKey","_callee2","quorumPublic","_context2","getTargetEmbeddedKey","jwtKey","localStorage","getItem","JSON","parse","setTargetEmbeddedKey","setItem","stringify","resetTargetEmbeddedKey","removeItem","getSettings","settings","setSettings","uint8arrayFromHexString","hexString","Uint8Array","match","map","h","parseInt","uint8arrayToHexString","buffer","x","padStart","join","base58Decode","s","alphabet","decodedBytes","leadingZeros","indexOf","concat","carry","j","currentByte","undefined","result","reverse","base58CheckDecode","_x3","_base58CheckDecode","_callee3","decoded","payload","checksum","hash1Buf","hash1","hash2Buf","hash2","computedChecksum","_context3","subarray","digest","decodeKey","_x4","_x5","_decodeKey","_callee4","privateKey","keyFormat","decodedKeyBytes","version","keyAndFlags","_bech32$decode","prefix","words","bytes","schemeFlag","privkey","_context4","t0","startsWith","bech32","decode","fromWords","console","warn","setParentFrameMessageChannelPort","port","normalizePadding","byteArray","targetLength","paddingLength","padding","fill","expectedZeroCount","zeroCount","additionalAssociatedData","senderPubBuf","receiverPubBuf","fromDerSignature","derSignature","derSignatureBuf","index","rLength","sLength","rPadded","sPadded","verifyEnclaveSignature","_x6","_x7","_x8","_verifyEnclaveSignature","_callee5","enclaveQuorumPublic","publicSignature","signedData","TURNKEY_SIGNERS_ENCLAVES","environment","TURNKEY_SIGNER_ENCLAVE_QUORUM_PUBLIC_KEY","encryptionQuorumPublicBuf","quorumKey","publicSignatureBuf","signedDataBuf","_context5","prod","preprod","__TURNKEY_SIGNER_ENVIRONMENT__","verify","hash","validateStyles","styles","element","validStyles","cssValidationRegex","margin","borderWidth","borderStyle","borderColor","borderRadius","fontSize","fontWeight","fontFamily","color","labelColor","backgroundColor","width","height","maxWidth","maxHeight","lineHeight","boxShadow","textAlign","overflowWrap","wordWrap","resize","entries","forEach","_ref","_ref2","property","styleProperty","trim","styleRegexStr","styleRegex","RegExp","styleValue","applySettings","validSettings","settingsObj","passphraseLabel","document","getElementById","mnemonicLabel","passphraseTextarea","plaintextTextarea","enablePassphrase","style","display","border","_ref3","_ref4","key","documentElement","body","passphraseStyles","_ref5","_ref6","sendMessageUp","type","requestId","message","postMessage","parent"],"sourceRoot":""}